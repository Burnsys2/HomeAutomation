version: '3'
services:

   node-red:
    image: burnsys/nodered:pi
    container_name: node-red
    environment:
       - TZ=America/Argentina/Buenos_Aires
       - LD_LIBRARY_PATH=/opt/vc/lib
    ports:
       - 1880:1880
       - 20911:20911/udp
    devices:
       - /dev/vchiq
    user: root:root
    volumes:
       - /mnt/swarmData/nodered-data:/data
       - /opt/vc:/opt/vc:ro
    restart: unless-stopped
    deploy:
      placement:
        constraints:
          - "node.hostname==RPI4"