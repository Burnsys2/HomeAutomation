[{"id":"bb63d718.931208","type":"tab","label":"Interruptores y Luces","disabled":false,"info":""},{"id":"887b2e31.18293","type":"tab","label":"Relays","disabled":false,"info":""},{"id":"2bcc0ccb.cd26a4","type":"tab","label":"Sensores Clima","disabled":false,"info":""},{"id":"930c94d9.38ece8","type":"tab","label":"Sensores Elect","disabled":false,"info":""},{"id":"57b26073.47916","type":"tab","label":"Arduinos","disabled":false,"info":""},{"id":"28d40fc8.b7186","type":"tab","label":"RPI","disabled":false,"info":""},{"id":"792c9759.e6c028","type":"tab","label":"RPI Leds","disabled":false,"info":""},{"id":"848f86f5.f33168","type":"tab","label":"MXQ","disabled":false,"info":""},{"id":"73aaa5f5.ea3f4c","type":"tab","label":"Network","disabled":false,"info":""},{"id":"c5b2ea55.84d058","type":"tab","label":"Escenas","disabled":false,"info":""},{"id":"235e5af0.561006","type":"tab","label":"RF / Alarma","disabled":false,"info":""},{"id":"5a08b38d.d6a17c","type":"tab","label":"RF Relays","disabled":false,"info":""},{"id":"2228dc2c.99e004","type":"tab","label":"Presencia Celus","disabled":true,"info":""},{"id":"d0c77eb4.886e7","type":"tab","label":"Compu","disabled":false,"info":""},{"id":"295f893a.42f726","type":"tab","label":"AAC","disabled":true,"info":""},{"id":"d9b60640.843728","type":"tab","label":"AAC 2","disabled":false,"info":""},{"id":"c2cec058.34604","type":"tab","label":"Ventilador de Techo","disabled":false,"info":""},{"id":"3e473a01.8f8df6","type":"tab","label":"PS4","disabled":false,"info":""},{"id":"230ac56e.bc629a","type":"tab","label":"HT","disabled":false,"info":""},{"id":"9bee6473.dc8598","type":"tab","label":"TV","disabled":false,"info":""},{"id":"d4cc4a57.a7caa8","type":"tab","label":"Proyector","disabled":false,"info":""},{"id":"e4c6ee16.54f72","type":"tab","label":"Ambilight","disabled":false,"info":""},{"id":"1a093aba.d33055","type":"tab","label":"Escenas Leds","disabled":false,"info":""},{"id":"75f22ec1.216f","type":"tab","label":"Leds","disabled":false,"info":""},{"id":"254f6ab6.9adb86","type":"tab","label":"Audio","disabled":false,"info":""},{"id":"d0b4c293.95815","type":"tab","label":"Plex","disabled":true,"info":""},{"id":"7ad2ef9d.dd79e","type":"tab","label":"IR IN","disabled":true,"info":""},{"id":"1ac54ead.f37ca1","type":"tab","label":"Timbre","disabled":false,"info":""},{"id":"6fe007d2.25c638","type":"tab","label":"Bomba","disabled":false,"info":""},{"id":"a6dc66a1.81b618","type":"subflow","name":"Teclas Comedor","info":"","category":"Teclas","in":[],"out":[{"x":840,"y":180,"wires":[{"id":"4bd83602.e50528","port":0}]},{"x":840,"y":260,"wires":[{"id":"b3844f54.971c1","port":0}]},{"x":840,"y":340,"wires":[{"id":"77ace720.6a17a8","port":0}]}],"env":[]},{"id":"bdb2280d.bcc368","type":"subflow","name":"Teclas Living Izq","info":"","category":"Teclas","in":[],"out":[{"x":840,"y":180,"wires":[{"id":"a24d1547.0131d8","port":0}]},{"x":840,"y":260,"wires":[{"id":"7008c2e8.16bd0c","port":0}]},{"x":840,"y":340,"wires":[{"id":"8655dca8.9a6e8","port":0}]}],"env":[]},{"id":"611d2ba5.389f94","type":"subflow","name":"Teclas Living Der","info":"","category":"Teclas","in":[],"out":[{"x":800,"y":80,"wires":[{"id":"e1138e2e.bcc34","port":0}]},{"x":800,"y":140,"wires":[{"id":"1e86def4.62f8f1","port":0}]},{"x":960,"y":400,"wires":[{"id":"fba26c2c.32ce9","port":0}]},{"x":1040,"y":600,"wires":[{"id":"93e52afb.02aa18","port":0}]},{"x":920,"y":320,"wires":[{"id":"7f58764.5ff8288","port":0}]}],"env":[]},{"id":"4329d030.ac594","type":"subflow","name":"Teclas Escritorio","info":"","category":"Teclas","in":[],"out":[{"x":1100,"y":160,"wires":[{"id":"9549a648.31a008","port":0}]},{"x":1100,"y":240,"wires":[{"id":"4f2f07ae.451ce8","port":0}]}],"env":[]},{"id":"d1c44675.ff7c58","type":"subflow","name":"Teclas Escalera","info":"","category":"Teclas","in":[],"out":[{"x":1040,"y":160,"wires":[{"id":"ee3445cd.4bc588","port":0}]},{"x":1040,"y":240,"wires":[{"id":"b9b56de3.61b1a","port":0}]},{"x":1040,"y":320,"wires":[{"id":"c1cb512c.d2da8","port":0}]},{"x":1040,"y":400,"wires":[{"id":"648562a3.49f70c","port":0}]}],"env":[]},{"id":"5f9dfcc6.ecd504","type":"subflow","name":"Teclas Living IR","info":"","category":"Teclas","in":[],"out":[{"x":1160,"y":220,"wires":[{"id":"944b10bd.cc3db","port":0}]},{"x":1160,"y":300,"wires":[]},{"x":1180,"y":340,"wires":[{"id":"ecbd23f3.4fedc","port":0}]},{"x":1260,"y":480,"wires":[]}],"env":[],"color":"#DDAA99","outputLabels":["Boton Encoder","Tecla Negra","Boton Blanco","Boton Azul"]},{"id":"95877930.dde488","type":"subflow","name":"Teclas Living Der 2","info":"","category":"","in":[],"out":[{"x":1520,"y":640,"wires":[{"id":"3fab11c4.3b9dae","port":0},{"id":"3f63fc9d.7b9534","port":0}]}],"env":[]},{"id":"fc481a7.a3f47e8","type":"subflow","name":"RPI Leds","info":"","category":"","in":[{"x":320,"y":160,"wires":[{"id":"9de6eb68.6ef4a8"}]}],"out":[],"env":[],"color":"#DDAA99"},{"id":"2a658747.a40e88","type":"subflow","name":"Get Tfs Item","info":"","category":"","in":[{"x":220,"y":220,"wires":[{"id":"de92246e.105268"}]}],"out":[{"x":940,"y":220,"wires":[{"id":"64e4d2ac.24fecc","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"73bc3aee.13bf44","type":"ui_group","name":"Relays","tab":"71106a75.760e94","order":1,"disp":true,"width":"6","collapse":false},{"id":"71106a75.760e94","type":"ui_tab","name":"Home","icon":"dashboard","disabled":false,"hidden":false},{"id":"e139a1a.7183f6","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#006582","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#006582","edited":true},"page-titlebar-backgroundColor":{"value":"#006582","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#333333","edited":false},"group-textColor":{"value":"#00a0ce","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#006582","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Casa","hideToolbar":"false","allowSwipe":"true","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":7,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"bc90829.106738","type":"ui_spacer","name":"spacer","group":"","order":4,"width":1,"height":1},{"id":"79688aa3.509134","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"7","height":1},{"id":"d96ba3a3.29883","type":"ui_spacer","name":"spacer","group":"","order":5,"width":"7","height":1},{"id":"1ad27743.ce9fb9","type":"mqtt-broker","name":"OpenWrt","broker":"mqtt.burnsys.ddns.net","port":"1883","clientid":"RPI/NodeRed","usetls":false,"compatmode":false,"keepalive":"5","cleansession":true,"birthTopic":"RPI/NodeRed/status","birthQos":"0","birthPayload":"connecting","closeTopic":"MXQ/in/NODESTART","closeQos":"0","closePayload":"","willTopic":"MXQ/in/NODESTART","willQos":"0","willPayload":"disconnecting"},{"id":"fc604a2d.fe42a8","type":"ui_tab","name":"Sensores","icon":"fa-thermometer-half","order":2,"disabled":false,"hidden":false},{"id":"5635ed61.b910e4","type":"ui_group","name":"Escritorio","tab":"70f5bc92.40b124","order":1,"disp":true,"width":"6","collapse":false},{"id":"7a092dd.29b3ed4","type":"ui_group","name":"AAC","tab":"9c83baa6.e50518","order":2,"disp":true,"width":"6","collapse":false},{"id":"70f5bc92.40b124","type":"ui_tab","name":"Luces","icon":"wb_incandescent","order":1,"disabled":false,"hidden":false},{"id":"bf36a591.082a28","type":"ui_group","name":"Interion","tab":"fc604a2d.fe42a8","order":2,"disp":false,"width":"6","collapse":false},{"id":"9c83baa6.e50518","type":"ui_tab","name":"Control remoto","icon":"settings_remote","order":5,"disabled":false,"hidden":false},{"id":"913b3f65.8b281","type":"ui_group","name":"Off","tab":"f7cb5ff4.efee3","order":1,"disp":true,"width":"6","collapse":false},{"id":"f7cb5ff4.efee3","type":"ui_tab","name":"Off","icon":"dashboard","order":4,"disabled":false,"hidden":true},{"id":"4776a043.c6708","type":"ui_group","name":"Compu","tab":"9c83baa6.e50518","order":4,"disp":true,"width":"6","collapse":false},{"id":"f8522291.e6b8b","type":"ui_tab","name":"Escenas","icon":"weekend","order":6,"disabled":false,"hidden":false},{"id":"837d3079.305cd","type":"ui_group","name":"Acciones","tab":"f8522291.e6b8b","order":1,"disp":true,"width":"6","collapse":false},{"id":"20a076b7.fe135a","type":"ui_group","name":"TV","tab":"9c83baa6.e50518","order":1,"disp":true,"width":"6","collapse":true},{"id":"a676754.6a79888","type":"ui_group","name":"Proyector","tab":"9c83baa6.e50518","order":6,"disp":true,"width":"6","collapse":false},{"id":"7ad1e0a0.b2f66","type":"ui_group","name":"Muteki","tab":"9c83baa6.e50518","order":7,"disp":true,"width":"6","collapse":false},{"id":"a0a12305.1eb01","type":"ui_group","name":"Exterior","tab":"fc604a2d.fe42a8","order":1,"disp":false,"width":"6","collapse":false},{"id":"bee8228d.0d274","type":"ui_group","name":"RPI ","tab":"9febe8d8.a75bd8","order":1,"disp":true,"width":"6","collapse":false},{"id":"8baa852c.3b6cc8","type":"ui_group","name":"Comedor","tab":"70f5bc92.40b124","order":3,"disp":true,"width":"6","collapse":false},{"id":"6d3da8b1.90ed78","type":"ui_group","name":"Living","tab":"70f5bc92.40b124","order":4,"disp":true,"width":"6","collapse":false},{"id":"6d364717.d4fd68","type":"ui_group","name":"PS4","tab":"9c83baa6.e50518","order":5,"disp":true,"width":"6","collapse":false},{"id":"a95b4552.f7fa88","type":"ui_group","name":"Frente","tab":"70f5bc92.40b124","order":5,"disp":true,"width":"6","collapse":false},{"id":"622bb9e6.9808f8","type":"ui_group","name":"Luz y Lluvia","tab":"fc604a2d.fe42a8","order":4,"disp":false,"width":"6","collapse":false},{"id":"33cc97f1.362a58","type":"ui_tab","name":"Leds","icon":"flare","order":7,"disabled":false,"hidden":false},{"id":"f687a4d9.3b1578","type":"ui_group","name":"Config","tab":"33cc97f1.362a58","order":1,"disp":false,"width":"6","collapse":false},{"id":"46ccdc7e.a82334","type":"ui_group","name":"AAC Presion","tab":"fc604a2d.fe42a8","order":3,"disp":false,"width":"6","collapse":false},{"id":"3b8c578d.7ea768","type":"ui_tab","name":"Alarma","icon":"videocam","disabled":false,"hidden":false},{"id":"b32fa3e9.f2b7f","type":"ui_group","name":"Alarma","tab":"3b8c578d.7ea768","order":1,"disp":true,"width":"6","collapse":false},{"id":"9febe8d8.a75bd8","type":"ui_tab","name":"Infra","icon":"usb","order":9,"disabled":false,"hidden":false},{"id":"b89f1435.0c4bf8","type":"ui_group","name":"Arduino","tab":"9febe8d8.a75bd8","order":3,"disp":true,"width":"6","collapse":false},{"id":"8b4e6efd.7f29a","type":"ui_spacer","name":"spacer","group":"b1a52249.fc203","order":1,"width":1,"height":1},{"id":"bc362a5c.0bea88","type":"ui_group","name":"Camaras","tab":"9febe8d8.a75bd8","order":7,"disp":true,"width":"6","collapse":false},{"id":"456e3133.11777","type":"ui_tab","name":"Sensores Crudos","icon":"dashboard","order":10,"disabled":false,"hidden":false},{"id":"cd9fc1f7.18d92","type":"ui_group","name":"Clima","tab":"456e3133.11777","order":1,"disp":true,"width":"6","collapse":false},{"id":"e8c5d0b7.ae42a","type":"ui_group","name":"Electricidad","tab":"456e3133.11777","order":2,"disp":true,"width":"6","collapse":false},{"id":"e5a1cfdf.94ab5","type":"influxdb","hostname":"influx.burnsys.ddns.net","port":"8086","protocol":"http","database":"sensores","name":"InfluxDb Sensores","usetls":false,"tls":"","influxdbVersion":"1.x"},{"id":"f177c7aa.290658","type":"ui_group","name":"Red","tab":"9febe8d8.a75bd8","order":6,"disp":true,"width":"6","collapse":false},{"id":"6c822d18.0fa384","type":"ui_tab","name":"Patio","icon":"dashboard","order":11,"disabled":false,"hidden":false},{"id":"35f37aae.e9b246","type":"ui_group","name":"Audio","tab":"6c822d18.0fa384","order":2,"disp":true,"width":"6","collapse":false},{"id":"7354ee51.5c171","type":"ui_group","name":"Luces","tab":"6c822d18.0fa384","order":1,"disp":true,"width":"6","collapse":false},{"id":"dc87ba92.248b68","type":"ui_spacer","name":"spacer","group":"582f7a51.db5c44","order":2,"width":1,"height":1},{"id":"9baecddc.3dece","type":"ui_group","name":"AAC Pieza","tab":"9c83baa6.e50518","order":7,"disp":true,"width":"6","collapse":false},{"id":"b881457e.8f3768","type":"ui_group","name":"HT Pieza","tab":"9c83baa6.e50518","order":8,"disp":true,"width":"6","collapse":false},{"id":"93dce1d.02bb22","type":"ui_group","name":"12v","tab":"ebe417b8.fb1578","order":2,"disp":true,"width":"6","collapse":false},{"id":"45baee32.ecd35","type":"tls-config","name":"gBridge Tls","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"mqtt.gbridge.io","verifyservercert":true},{"id":"1630588a.b134c7","type":"nora-config","name":"nora config","group":"Casa","notify":false},{"id":"95807cf0.32584","type":"ui_group","name":"Acciones","tab":"33cc97f1.362a58","order":2,"disp":true,"width":"6","collapse":false},{"id":"fce9dc0d.50b3","type":"ui_group","name":"MXQ","tab":"9febe8d8.a75bd8","order":2,"disp":true,"width":"6","collapse":false},{"id":"f6973454.34b7b8","type":"ui_group","name":"AAC2","tab":"9c83baa6.e50518","order":9,"disp":true,"width":"6","collapse":false},{"id":"d1ddffae.14853","type":"ui_spacer","name":"spacer","group":"35f37aae.e9b246","order":3,"width":"6","height":1},{"id":"f26c6aa4.77c7d8","type":"ui_group","name":"Planta Alta","tab":"70f5bc92.40b124","order":5,"disp":true,"width":"6","collapse":false},{"id":"ebe417b8.fb1578","type":"ui_tab","name":"Electricidad","icon":"dashboard","order":12,"disabled":false,"hidden":false},{"id":"e11d6ab1.7fd148","type":"ui_group","name":"220v","tab":"ebe417b8.fb1578","order":1,"disp":true,"width":"6","collapse":false},{"id":"af98a57c.70b9c8","type":"Plex server","host":"192.168.2.125","port":"32400","username":"burnsys@gmail.com","password":"jst4kix741"},{"id":"1cabbab6.955e55","type":"plex-ws-server","hostname":"192.168.2.125","port":"32400","timeout":"1000","token":"gkbcREsCBNEEq8qg7Eds","secure":false},{"id":"39827c21.42a8c4","type":"ui_group","name":"Ambilight","tab":"33cc97f1.362a58","order":3,"disp":true,"width":"6","collapse":false},{"id":"4672a874.eb0c98","type":"ui_group","name":"NodeMcu","tab":"9febe8d8.a75bd8","order":4,"disp":true,"width":"6","collapse":false},{"id":"d65d81f9.33213","type":"node-red-contrib-whatsapp-cmb-account","name":"Crisolini Pablo"},{"id":"9007d0d9.5e369","type":"node-red-contrib-whatsapp-cmb-account","name":"Babu"},{"id":"d17a98f.baf2068","type":"telegrambot-config","botname":"CasaBot","usernames":"sss","chatIds":"1683927493","pollInterval":"300"},{"id":"d267a3e3.05ccb","type":"ui_group","name":"ESP01","tab":"9febe8d8.a75bd8","order":5,"disp":true,"width":"6","collapse":false},{"id":"9f3c103b.20242","type":"mqtt in","z":"2bcc0ccb.cd26a4","name":"Luz (A11 Blanco)","topic":"Arduino/PBLiving/out/Sensores/Analog/11","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":160,"y":420,"wires":[["65dfdee.897542","168fd1b0.3e5f9e","c0c5968f.951788"]]},{"id":"8dcdadb5.5986a","type":"switch","z":"2bcc0ccb.cd26a4","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"500","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":630,"y":360,"wires":[["142446b4.25c239"],["5c73d1cd.f08fd"]],"outputLabels":["Noche","Dia"]},{"id":"4496e2e.6d6c81c","type":"mqtt out","z":"2bcc0ccb.cd26a4","name":"Luz Frente (24)","topic":"Arduino/PBLiving/in/Relay/24","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":1400,"y":340,"wires":[]},{"id":"f85b7a96.dd6998","type":"ui_gauge","z":"2bcc0ccb.cd26a4","name":"","group":"622bb9e6.9808f8","order":1,"width":0,"height":0,"gtype":"gage","title":"Luz","label":"units","format":"{{value}}","min":0,"max":"1024","colors":["#000000","#939300","#faff15"],"seg1":"300","seg2":"580","x":790,"y":540,"wires":[]},{"id":"1f1e34f6.fd0fdb","type":"ui_chart","z":"2bcc0ccb.cd26a4","name":"","group":"622bb9e6.9808f8","order":2,"width":0,"height":0,"label":"Luz","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#d2cd00","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":790,"y":480,"wires":[[]]},{"id":"b3be2ee9.2699e","type":"mqtt out","z":"bb63d718.931208","name":"Luz Balcon Frente (22)","topic":"Arduino/PBLiving/in/Relay/22","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1580,"y":340,"wires":[],"inputLabels":["kkl"]},{"id":"d3653a73.948618","type":"mqtt out","z":"bb63d718.931208","name":"Luz Frente (24)","topic":"Arduino/PBLiving/in/Relay/24","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1560,"y":280,"wires":[],"inputLabels":["kkl"]},{"id":"2a022a96.881a76","type":"ui_button","z":"295f893a.42f726","name":"","group":"7a092dd.29b3ed4","order":2,"width":"3","height":"1","passthru":false,"label":"Direct","tooltip":"","color":"","bgcolor":"","icon":"fa-rss","payload":"90,86,11,31,11,10,11,31,11,31,12,10,11,10,11,32,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,10,11,32,11,10,11,10,11,10,11,10,11,32,11,32,11,32,11,32,11,31,11,31,11,32,11,32,11,10,11,10,11,10,11,10,11,31,11,32,11,31,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,32,11,32,11,32,11,32,11,32,11","payloadType":"str","topic":"","x":950,"y":380,"wires":[["66ea1ea6.f51c9"]]},{"id":"980d5cb0.21c5f","type":"mqtt in","z":"a6dc66a1.81b618","name":"Teclas Comedor 1 (39) (UTP Gris Marron)","topic":"Arduino/PBLiving/out/Button/39/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":320,"y":180,"wires":[["4bd83602.e50528"]]},{"id":"18b95865.e85318","type":"mqtt in","z":"a6dc66a1.81b618","name":"Teclas Comedor 2 (45)  (UTP Gris Azul)","topic":"Arduino/PBLiving/out/Button/45/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":330,"y":260,"wires":[["b3844f54.971c1"]]},{"id":"527925a6.48493c","type":"mqtt in","z":"a6dc66a1.81b618","name":"Teclas Comedor 3 (37)  (UTP Gris Verde)","topic":"Arduino/PBLiving/out/Button/37/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":320,"y":340,"wires":[["77ace720.6a17a8"]]},{"id":"4bd83602.e50528","type":"function","z":"a6dc66a1.81b618","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":180,"wires":[[]]},{"id":"b3844f54.971c1","type":"function","z":"a6dc66a1.81b618","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":260,"wires":[[]]},{"id":"77ace720.6a17a8","type":"function","z":"a6dc66a1.81b618","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":340,"wires":[[]]},{"id":"ed1b7452.7a60a8","type":"subflow:a6dc66a1.81b618","z":"bb63d718.931208","name":"","env":[],"x":1260,"y":460,"wires":[["1fd7774e.b0dce9"],["3c9fe8bd.319fb8"],["7ebac973.5a9558"]]},{"id":"417567b8.43fdc8","type":"mqtt in","z":"bdb2280d.bcc368","name":"Teclas Living Izq 1 (33) (UTP Negro Marron Claro)","topic":"Arduino/PBLiving/out/Button/33/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":350,"y":180,"wires":[["a24d1547.0131d8"]]},{"id":"a09a1e1a.481d9","type":"mqtt in","z":"bdb2280d.bcc368","name":"Teclas Living Izq 2 (41) (UTP Negro Azul)","topic":"Arduino/PBLiving/out/Button/41/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":400,"y":260,"wires":[["7008c2e8.16bd0c"]]},{"id":"a186b481.31f528","type":"mqtt in","z":"bdb2280d.bcc368","name":"Teclas Living Izq 3 (29) (UTP Azul Claro)","topic":"Arduino/PBLiving/out/Button/29/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":360,"y":340,"wires":[["8655dca8.9a6e8"]]},{"id":"a24d1547.0131d8","type":"function","z":"bdb2280d.bcc368","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":180,"wires":[[]]},{"id":"7008c2e8.16bd0c","type":"function","z":"bdb2280d.bcc368","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":260,"wires":[[]]},{"id":"8655dca8.9a6e8","type":"function","z":"bdb2280d.bcc368","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":340,"wires":[[]]},{"id":"e1138e2e.bcc34","type":"mqtt in","z":"611d2ba5.389f94","name":"Teclas Living Der 1 (49) (UTP Negro Naranja)","topic":"Arduino/PBLiving/out/Button/49","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":270,"y":80,"wires":[[]]},{"id":"1e86def4.62f8f1","type":"mqtt in","z":"611d2ba5.389f94","name":"Teclas Living Der 1 (47) (UTP Negro Naranja Claro)","topic":"Arduino/PBLiving/out/Button/47","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":270,"y":140,"wires":[[]]},{"id":"76af4115.35a28","type":"subflow:bdb2280d.bcc368","z":"bb63d718.931208","name":"","x":860,"y":380,"wires":[["889bd440.0cc928"],["104f8203.015b3e"],["48b04e6.93c95b"]]},{"id":"c2806dd.8fe4e9","type":"comment","z":"a6dc66a1.81b618","name":"UTP Gris Verde (Interferencia con LEDS)","info":"","x":320,"y":420,"wires":[]},{"id":"21d4f582.ba380a","type":"function","z":"2bcc0ccb.cd26a4","name":"Invertir","func":"msg.payload = Math.round(1024 - msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":480,"wires":[["1f1e34f6.fd0fdb"]]},{"id":"3c9fe8bd.319fb8","type":"mqtt out","z":"bb63d718.931208","name":"Luz Comedor 2","topic":"Arduino/PBTablero/in/Relay/24","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1520,"y":500,"wires":[],"inputLabels":["kkl"]},{"id":"6e3faea4.c4467","type":"mqtt out","z":"bb63d718.931208","name":"Luz Distribuidor (28)","topic":"Arduino/PBTablero/in/Relay/28","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1180,"y":780,"wires":[],"inputLabels":["kkl"]},{"id":"1fd7774e.b0dce9","type":"mqtt out","z":"bb63d718.931208","name":"Luz Comedor (26)","topic":"Arduino/PBTablero/in/Relay/26","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1510,"y":460,"wires":[],"inputLabels":["kkl"]},{"id":"1e1a71ae.7d617e","type":"mqtt out","z":"bb63d718.931208","name":"Reflector Patio (32)","topic":"Arduino/PBTablero/in/Relay/32","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":670,"y":600,"wires":[],"inputLabels":["kkl"]},{"id":"d58fafa8.afc3a","type":"mqtt out","z":"bb63d718.931208","name":"Luz Vestidor (34)","topic":"Arduino/PBTablero/in/Relay/34","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1090,"y":200,"wires":[],"inputLabels":["kkl"]},{"id":"b305e4f1.6db828","type":"mqtt out","z":"bb63d718.931208","name":"Luz Patio (36)","topic":"Arduino/PBTablero/in/Relay/36","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1020,"y":600,"wires":[],"inputLabels":["kkl"]},{"id":"f6f9e411.ad5958","type":"mqtt out","z":"bb63d718.931208","name":"Tomas Escritorio (40)","topic":"Arduino/PBTablero/in/Relay/40","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1580,"y":240,"wires":[],"inputLabels":["kkl"]},{"id":"80bef1c8.5912c","type":"mqtt out","z":"bb63d718.931208","name":"Luz Escalera (42)","topic":"Arduino/PBTablero/in/Relay/42","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1090,"y":840,"wires":[],"inputLabels":["kkl"]},{"id":"48b04e6.93c95b","type":"mqtt out","z":"bb63d718.931208","name":"Luz Living Delante (46)","topic":"Arduino/PBTablero/in/Relay/46","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1270,"y":360,"wires":[],"inputLabels":["kkl"]},{"id":"104f8203.015b3e","type":"mqtt out","z":"bb63d718.931208","name":"Luz Living Sillon (48)","topic":"Arduino/PBTablero/in/Relay/48","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1260,"y":320,"wires":[],"inputLabels":["kkl"]},{"id":"ba06410d.21eed","type":"mqtt in","z":"4329d030.ac594","name":"Teclas Escritorio 1 (43) (Marron Claro)","topic":"Arduino/PBTablero/out/Button/43/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":630,"y":160,"wires":[["9549a648.31a008"]]},{"id":"cacc8c6.1db477","type":"mqtt in","z":"4329d030.ac594","name":"Teclas Comedor 2 (45)  (Naranja Claro)","topic":"Arduino/PBTablero/out/Button/45/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":630,"y":240,"wires":[["4f2f07ae.451ce8"]]},{"id":"9549a648.31a008","type":"function","z":"4329d030.ac594","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":160,"wires":[[]]},{"id":"4f2f07ae.451ce8","type":"function","z":"4329d030.ac594","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":240,"wires":[[]]},{"id":"a478fa1.383f408","type":"subflow:4329d030.ac594","z":"bb63d718.931208","name":"","env":[],"x":380,"y":700,"wires":[["a81689ea.d25ec8"],["1e1a71ae.7d617e","b305e4f1.6db828"]]},{"id":"c9a8d319.b74a7","type":"mqtt in","z":"d1c44675.ff7c58","name":"Teclas Escalera 1 (49) (UTP Verde)","topic":"Arduino/PBTablero/out/Button/49/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":500,"y":160,"wires":[["ee3445cd.4bc588"]]},{"id":"aea402da.e7db4","type":"mqtt in","z":"d1c44675.ff7c58","name":"Teclas Escalera 2 (39)  (UTP Naranja)","topic":"Arduino/PBTablero/out/Button/39/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":510,"y":240,"wires":[["b9b56de3.61b1a"]]},{"id":"a60cbf82.5aaf1","type":"mqtt in","z":"d1c44675.ff7c58","name":"Teclas Escalera 3 (41)  (UTP Azul Claro)","topic":"Arduino/PBTablero/out/Button/41/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":510,"y":320,"wires":[["c1cb512c.d2da8"]]},{"id":"ee3445cd.4bc588","type":"function","z":"d1c44675.ff7c58","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":160,"wires":[[]]},{"id":"b9b56de3.61b1a","type":"function","z":"d1c44675.ff7c58","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":240,"wires":[[]]},{"id":"c1cb512c.d2da8","type":"function","z":"d1c44675.ff7c58","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":320,"wires":[[]]},{"id":"a6aa7bbe.024c78","type":"subflow:d1c44675.ff7c58","z":"bb63d718.931208","name":"","x":120,"y":800,"wires":[["6e3faea4.c4467"],["80bef1c8.5912c"],["13c009f0.c3cc06","3ad2a028.d8585"],["80bef1c8.5912c"]]},{"id":"93783de8.9ed18","type":"mqtt in","z":"d1c44675.ff7c58","name":"Teclas Escalera Arriba (47)  (UTP Azul)","topic":"Arduino/PBTablero/out/Button/47/toggle","qos":"2","broker":"1ad27743.ce9fb9","x":510,"y":400,"wires":[["648562a3.49f70c"]]},{"id":"648562a3.49f70c","type":"function","z":"d1c44675.ff7c58","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":400,"wires":[[]]},{"id":"43d17969.14ea08","type":"function","z":"bb63d718.931208","name":"Apagar PB","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":740,"wires":[["6e3faea4.c4467","1fd7774e.b0dce9","1e1a71ae.7d617e","b305e4f1.6db828","3c9fe8bd.319fb8","3da337a9.1afa28","fa3e99d5.822c88","ca66185d.810e38"]]},{"id":"76df58a3.9fc248","type":"function","z":"bb63d718.931208","name":"Prender","func":"msg.payload = \"1\";\nreturn msg;","outputs":1,"noerr":0,"x":880,"y":900,"wires":[["80bef1c8.5912c"]]},{"id":"a072092b.57f2e8","type":"mqtt in","z":"235e5af0.561006","name":"","topic":"Arduino/+/out/Sensores/RF433","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":130,"y":720,"wires":[["62acdaee.5710d4","2409d46b.9c7d3c","938ee41.529da18","43b3abeb.5a4814"]]},{"id":"8654a4a2.6ce7f8","type":"switch","z":"235e5af0.561006","name":"Sensor","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"6173422","vt":"str"},{"t":"eq","v":"10721578","vt":"str"},{"t":"eq","v":"8359674","vt":"str"},{"t":"eq","v":"2089918","vt":"str"},{"t":"eq","v":"4023790","vt":"str"},{"t":"eq","v":"15524906","vt":"str"},{"t":"eq","v":"13670218","vt":"str"},{"t":"eq","v":"1691514","vt":"str"},{"t":"eq","v":"13670218","vt":"str"},{"t":"eq","v":"2332970","vt":"str"},{"t":"eq","v":"2680394","vt":"str"},{"t":"eq","v":"16517578","vt":"str"},{"t":"eq","v":"4023982","vt":"str"}],"checkall":"false","repair":false,"outputs":13,"x":640,"y":240,"wires":[["8fea8ef8.9ae8b"],["fbc45d11.96fee","eae60e68.55c21"],["6e7c6369.e563cc"],[],[],["dbcfdb9c.cc17f8","875113b9.1007f"],["5882b20c.270a7c","fbc45d11.96fee"],["8ef2b4c3.eba3f8"],[],[],[],["a1c6741d.1aaf08"],[]],"outputLabels":["Apertura Ventana Comedor","Sensor Movimiento Patio","Sensor Movimiento Entrada","","","Sensor Movimiento Vestidor","Sensor Movimiento Patio Arriba","Sensor Movimiento Balcon PA Pieza Nuestra","","","","Sensor Movimiento Balcon PA Pieza Nenes","Timbre"]},{"id":"1e3ca871.15f0e8","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"2","extend":true,"units":"min","reset":"","bytopic":"all","outputs":1,"x":890,"y":640,"wires":[["6ce2e5e9.a8672c","2c69a6ee.42f82a"]]},{"id":"6ce2e5e9.a8672c","type":"mqtt out","z":"235e5af0.561006","name":"Reflector Patio (32)","topic":"Arduino/PBTablero/in/Relay/32","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":1150,"y":660,"wires":[],"inputLabels":["kkl"]},{"id":"1fefe0db.43387f","type":"change","z":"2bcc0ccb.cd26a4","name":"","rules":[{"t":"set","p":"EsDeNoche","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1060,"y":380,"wires":[["725ae951.b61ef8","4496e2e.6d6c81c","733d1c45.c294a4"]]},{"id":"fbc45d11.96fee","type":"switch","z":"235e5af0.561006","name":"Es de Noche","property":"EsDeDia","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"false","repair":false,"outputs":2,"x":710,"y":640,"wires":[[],["1e3ca871.15f0e8"]],"outputLabels":["Dia","Noche"]},{"id":"13c009f0.c3cc06","type":"switch","z":"bb63d718.931208","name":"Doble Click","property":"ApagarPB","propertyType":"flow","rules":[{"t":"else"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":370,"y":860,"wires":[["c8553840.d9dc38","c3acd3f.3c65b3"],["d638f01b.851fa","45c91492.2569fc","ed524448.244858","69460f1f.3024b"]],"outputLabels":["Primera Vez","Segunda Vez"]},{"id":"c8553840.d9dc38","type":"change","z":"bb63d718.931208","name":"Set Doble Click","rules":[{"t":"set","p":"ApagarPB","pt":"flow","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":920,"wires":[["db447b8a.783528"]]},{"id":"d638f01b.851fa","type":"change","z":"bb63d718.931208","name":"Reset Doble Click","rules":[{"t":"set","p":"ApagarPB","pt":"flow","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":960,"wires":[[]]},{"id":"db447b8a.783528","type":"delay","z":"bb63d718.931208","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":980,"wires":[["d638f01b.851fa"]]},{"id":"45c91492.2569fc","type":"switch","z":"bb63d718.931208","name":"Es de Dia","property":"EsDeDia","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":680,"y":860,"wires":[[],["76df58a3.9fc248"]],"outputLabels":["Dia","Noche"]},{"id":"ea0c865d.ea1e08","type":"link in","z":"bb63d718.931208","name":"Apagar Luces PB","links":["3384ee93.136ba2","bd05e2f5.6e656","c3acd3f.3c65b3"],"x":715,"y":780,"wires":[["43d17969.14ea08"]]},{"id":"c3acd3f.3c65b3","type":"link out","z":"bb63d718.931208","name":"","links":["ea0c865d.ea1e08"],"x":655,"y":780,"wires":[]},{"id":"fce73a35.a51d58","type":"ui_button","z":"c5b2ea55.84d058","name":"","group":"837d3079.305cd","order":14,"width":0,"height":0,"passthru":true,"label":"Activar Modo Proyector","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":290,"y":640,"wires":[["bd05e2f5.6e656","2d4563f6.7f655c","21496688.72dc4a","772140a3.884df","28f0f831.ebe1b8","9744ab09.b13a28"]]},{"id":"6469230a.5002ac","type":"change","z":"295f893a.42f726","name":"Apagar AAC","rules":[{"t":"set","p":"payload","pt":"msg","to":"89,86,11,31,11,10,11,32,11,32,11,10,11,10,11,31,11,10,12,10,11,32,11,10,11,10,11,31,11,32,11,10,11,32,11,10,11,31,12,32,11,31,11,32,11,10,11,32,11,32,11,31,11,10,11,10,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,31,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,31,11,32,11,32,11,32,11,32,12,103,89,86,11,32,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,31,11,10,11,10,11,32,11,32,11,10,11,32,11,10,11,32,11,32,11,32,11,32,11,10,11,32,11,32,11,31,11,10,11,10,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,32,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,32,11,32,11,32,11,32,11,32,11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":320,"wires":[["66ea1ea6.f51c9"]]},{"id":"c28715fd.aebe78","type":"ui_button","z":"295f893a.42f726","name":"","group":"837d3079.305cd","order":7,"width":0,"height":0,"passthru":false,"label":"Apagar IR Living","tooltip":"","color":"","bgcolor":"","icon":"","payload":"182,88,12,32,12,32,12,10,12,10,12,9,12,10,12,9,12,32,12,10,12,10,12,32,12,10,12,32,12,32,12,32,12,32,12,10,12,10,12,10,12,10,12,32,12,32,12,10,12,10,12,32,12,32,12,32,12,32,12,10,12,10,12,32,12,32,12","payloadType":"str","topic":"","x":1590,"y":540,"wires":[["d87b7cfd.51b71"]]},{"id":"d87b7cfd.51b71","type":"link out","z":"295f893a.42f726","name":"","links":["550e66eb.5a2678","6055a41.50a7f5c"],"x":1635,"y":460,"wires":[]},{"id":"3d8ca24f.a3ff5e","type":"ui_button","z":"c5b2ea55.84d058","name":"","group":"837d3079.305cd","order":14,"width":0,"height":0,"passthru":false,"label":"Apagar Todo PB","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":700,"y":60,"wires":[["65481fe8.c3dd"]]},{"id":"a905769a.3cb038","type":"link in","z":"c5b2ea55.84d058","name":"Apagar Todo Planta Baja","links":["65481fe8.c3dd","ed524448.244858","eff538e0.ffbe98"],"x":830,"y":120,"wires":[["3384ee93.136ba2","745f0f58.b0dd8","3685c04c.89fdd","44791da0.fb09b4"]],"l":true},{"id":"25b13e03.853852","type":"link out","z":"c5b2ea55.84d058","name":"","links":["fb42c720.28e758"],"x":835,"y":360,"wires":[]},{"id":"3384ee93.136ba2","type":"link out","z":"c5b2ea55.84d058","name":"","links":["ea0c865d.ea1e08"],"x":995,"y":140,"wires":[]},{"id":"a2d82b6a.3909a8","type":"ui_button","z":"c5b2ea55.84d058","name":"","group":"837d3079.305cd","order":14,"width":0,"height":0,"passthru":false,"label":"Apagar Luces PB","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":230,"y":860,"wires":[["bd05e2f5.6e656"]]},{"id":"65481fe8.c3dd","type":"link out","z":"c5b2ea55.84d058","name":"","links":["a905769a.3cb038"],"x":815,"y":60,"wires":[]},{"id":"bd05e2f5.6e656","type":"link out","z":"c5b2ea55.84d058","name":"","links":["ea0c865d.ea1e08"],"x":515,"y":740,"wires":[]},{"id":"745f0f58.b0dd8","type":"link out","z":"c5b2ea55.84d058","name":"","links":["6ca521c4.a62d8"],"x":995,"y":100,"wires":[]},{"id":"ed524448.244858","type":"link out","z":"bb63d718.931208","name":"","links":["a905769a.3cb038"],"x":675,"y":900,"wires":[]},{"id":"3bf0f746.bff0d8","type":"function","z":"887b2e31.18293","name":"Separar Topic","func":"var topics = msg.topic.split(\"/\");\nmsg.arduino =  topics[1];\nmsg.relay =  topics[4];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":380,"y":560,"wires":[["1a27ef99.f047a"]]},{"id":"1a27ef99.f047a","type":"switch","z":"887b2e31.18293","name":"Aduino","property":"arduino","propertyType":"msg","rules":[{"t":"eq","v":"PBTablero","vt":"str"},{"t":"eq","v":"PBLiving","vt":"str"},{"t":"eq","v":"Bomba","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":550,"y":560,"wires":[["6e803e9f.3fed1"],["7691be04.f618d"],["2b766caf.56d994"]],"outputLabels":["Tablero","Living",null]},{"id":"6e803e9f.3fed1","type":"switch","z":"887b2e31.18293","name":"Tablero","property":"relay","propertyType":"msg","rules":[{"t":"eq","v":"26","vt":"str"},{"t":"eq","v":"28","vt":"str"},{"t":"eq","v":"30","vt":"str"},{"t":"eq","v":"32","vt":"str"},{"t":"eq","v":"34","vt":"str"},{"t":"eq","v":"36","vt":"str"},{"t":"eq","v":"38","vt":"str"},{"t":"eq","v":"40","vt":"str"},{"t":"eq","v":"42","vt":"str"},{"t":"eq","v":"44","vt":"str"},{"t":"eq","v":"46","vt":"str"},{"t":"eq","v":"48","vt":"str"},{"t":"eq","v":"4","vt":"str"},{"t":"eq","v":"5","vt":"str"},{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"24","vt":"str"}],"checkall":"false","repair":false,"outputs":16,"x":740,"y":380,"wires":[["b9fd7b44.1ff218","ba628250.8d496"],["a40018d7.3573f8","aa5b0c1c.1dfe"],["5bf062f5.67438c","eae181f9.8e62c"],["7974db4.e5cf524","167468f2.ed98d7"],["c1cc9f3b.956ff","43dac68f.75b118"],["d2a4ea2a.2c1288","ffc845a9.83d3b8"],["ac435dc5.be83f"],["464e40ab.062a3"],["c58df6a3.089e88","82f14c8d.8eb31"],["e8d70996.265418","36e2c321.fbe4cc"],["c9463021.a8f87","a37bbbaf.62f288"],["384c1577.e7793a","29179a1e.be09e6"],["cb96c096.0556d"],["d23a3a74.2ed6d8"],["948f6b1.f2fa198"],["e5b9b0f.2b9625","48872c5b.418a94"]],"outputLabels":["Comedor (26)","Distribuidor (28)","Luiz Escritorio (30)","Reflector Patio (32)","Vestidor (34)","Patio (36)","38","Toma Escritorio (40)","Escalera (42)","Living 2","Living 3","Living (48)","SIN USO","12V (5)","","Comedor Centro"]},{"id":"7691be04.f618d","type":"switch","z":"887b2e31.18293","name":"Living","property":"relay","propertyType":"msg","rules":[{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"26","vt":"str"},{"t":"eq","v":"28","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":730,"y":1200,"wires":[["7b4dca76.1c3a74"],["7cef22c5.6999bc"],["23f565bd.45fb9a","76741a46.ec1784","1348b166.e2033f"],["3d690c4e.637994"]],"outputLabels":["Luces Balcon (30)","Frente (24)","Subwoofer (26)","12V Arriba (28)"]},{"id":"b9fd7b44.1ff218","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Comedor","tooltip":"","group":"8baa852c.3b6cc8","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/26","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1020,"y":100,"wires":[["8591f331.53aaf"]]},{"id":"a40018d7.3573f8","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Distribuidor","tooltip":"","group":"8baa852c.3b6cc8","order":4,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/28","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1030,"y":180,"wires":[["8591f331.53aaf"]]},{"id":"8591f331.53aaf","type":"mqtt out","z":"887b2e31.18293","name":"Relays","topic":"","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1530,"y":480,"wires":[],"inputLabels":["kkl"]},{"id":"5bf062f5.67438c","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Pow  Vent Techo","tooltip":"","group":"5635ed61.b910e4","order":7,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/30","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1040,"y":260,"wires":[["8591f331.53aaf"]]},{"id":"7974db4.e5cf524","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Reflector Patio","tooltip":"","group":"7354ee51.5c171","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/32","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1040,"y":340,"wires":[["8591f331.53aaf"]]},{"id":"c1cc9f3b.956ff","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Vestidor","tooltip":"","group":"6d3da8b1.90ed78","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/34","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1020,"y":420,"wires":[["8591f331.53aaf"]]},{"id":"d2a4ea2a.2c1288","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Patio","tooltip":"","group":"7354ee51.5c171","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/36","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1010,"y":500,"wires":[["8591f331.53aaf"]]},{"id":"464e40ab.062a3","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Tomas Escritorio","tooltip":"","group":"5635ed61.b910e4","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/40","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1040,"y":580,"wires":[["8591f331.53aaf"]]},{"id":"c58df6a3.089e88","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Escalera","tooltip":"","group":"8baa852c.3b6cc8","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/42","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1020,"y":620,"wires":[["8591f331.53aaf"]]},{"id":"384c1577.e7793a","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Living Sillon","tooltip":"","group":"6d3da8b1.90ed78","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/48","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1030,"y":860,"wires":[["8591f331.53aaf"]]},{"id":"23f565bd.45fb9a","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Subwoofers","tooltip":"","group":"6d3da8b1.90ed78","order":6,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBLiving/in/Relay/26","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1030,"y":1180,"wires":[["8591f331.53aaf"]]},{"id":"3d690c4e.637994","type":"ui_switch","z":"887b2e31.18293","name":"","label":"12V Arriba","tooltip":"","group":"93dce1d.02bb22","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBLiving/in/Relay/28","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1030,"y":1260,"wires":[["8591f331.53aaf"]]},{"id":"7cef22c5.6999bc","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Frente","tooltip":"","group":"a95b4552.f7fa88","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBLiving/in/Relay/24","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1010,"y":1140,"wires":[["8591f331.53aaf"]]},{"id":"7b4dca76.1c3a74","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Balcon","tooltip":"","group":"a95b4552.f7fa88","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBLiving/in/Relay/22","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1010,"y":1300,"wires":[["8591f331.53aaf"]]},{"id":"ef3c0dd1.4e914","type":"mqtt in","z":"887b2e31.18293","name":"","topic":"+/+/out/Relay/+","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":140,"y":560,"wires":[["3bf0f746.bff0d8"]]},{"id":"2942877b.3cd328","type":"mqtt in","z":"2228dc2c.99e004","name":"Celu Chicho","topic":"OpenWrt/+/status/mac-b8-d7-af-b0-e2-9d/event","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":150,"y":400,"wires":[["8806729d.692f9"]]},{"id":"8806729d.692f9","type":"trigger","z":"2228dc2c.99e004","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"10","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":370,"y":400,"wires":[["73c5d745.50d6b8"]]},{"id":"ccda35c.053ecc8","type":"mqtt in","z":"2228dc2c.99e004","name":"Celu Babu","topic":"OpenWrt/+/status/mac-38-80-df-18-15-ec/event","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":140,"y":540,"wires":[["dd6a52b3.6617d"]]},{"id":"dd6a52b3.6617d","type":"trigger","z":"2228dc2c.99e004","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"10","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":310,"y":540,"wires":[["679956e6.e82388"]]},{"id":"73c5d745.50d6b8","type":"switch","z":"2228dc2c.99e004","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"new","vt":"str"},{"t":"eq","v":"del","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":400,"wires":[["ba660829.d94f18"],["aed88acf.478a28"]],"outputLabels":["Conectado","Desconectado"]},{"id":"ba660829.d94f18","type":"change","z":"2228dc2c.99e004","name":"","rules":[{"t":"set","p":"ChichoPresente","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":400,"wires":[["5fcded9.0865814"]]},{"id":"aed88acf.478a28","type":"change","z":"2228dc2c.99e004","name":"","rules":[{"t":"set","p":"ChichoPresente","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":440,"wires":[["5fcded9.0865814"]]},{"id":"679956e6.e82388","type":"switch","z":"2228dc2c.99e004","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"new","vt":"str"},{"t":"eq","v":"del","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":540,"wires":[["4b025905.3cc0c8"],["22f9821d.a23dbe"]],"outputLabels":["Conectado","Desconectado"]},{"id":"4b025905.3cc0c8","type":"change","z":"2228dc2c.99e004","name":"","rules":[{"t":"set","p":"BabuPresente","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":520,"wires":[["5fcded9.0865814"]]},{"id":"22f9821d.a23dbe","type":"change","z":"2228dc2c.99e004","name":"","rules":[{"t":"set","p":"BabuPresente","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":560,"wires":[["5fcded9.0865814"]]},{"id":"5fcded9.0865814","type":"function","z":"2228dc2c.99e004","name":"AlguienPresente","func":"var AlguienPres = (global.get(\"BabuPresente\") || global.get(\"ChichoPresente\"));\nglobal.set(\"AlguienPresente\",AlguienPres);\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":500,"wires":[[]]},{"id":"c1566fcc.e4eaa","type":"mqtt out","z":"57b26073.47916","name":"","topic":"","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":950,"y":340,"wires":[]},{"id":"6d72d354.428d6c","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/+/out/IP","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":140,"y":340,"wires":[["256f449a.6123fc","666818ba.645868"]]},{"id":"413f35da.f67f5c","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp LasSeen","topic":"ESCRITORIO/out/lastseen/epoch","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":120,"y":120,"wires":[["7f6526a6.d24708","1a8b8922.1ae247"]]},{"id":"7f6526a6.d24708","type":"trigger","z":"d0c77eb4.886e7","name":"","op1":"","op2":"false","op1type":"nul","op2type":"bool","duration":"1","extend":true,"overrideDelay":false,"units":"min","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":350,"y":160,"wires":[["ef8f262.37035d8"]]},{"id":"ef8f262.37035d8","type":"change","z":"d0c77eb4.886e7","name":"set CompOn","rules":[{"t":"set","p":"CompuPrendida","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":140,"wires":[["68d8060d.bd4da8","b229f4be.adc378"]]},{"id":"26418e8.f185b72","type":"mqtt out","z":"d0c77eb4.886e7","name":"Monitor Socket (40)","topic":"Arduino/PBTablero/in/Relay/40","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1070,"y":260,"wires":[],"inputLabels":["kkl"]},{"id":"8cc81701.1d2f78","type":"ui_button","z":"d0c77eb4.886e7","name":"","group":"4776a043.c6708","order":1,"width":"3","height":"1","passthru":false,"label":"Turn On","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":900,"y":40,"wires":[["849b3d9f.dee7d"]]},{"id":"6ca521c4.a62d8","type":"link in","z":"d0c77eb4.886e7","name":"Apagar PC","links":["745f0f58.b0dd8"],"x":975,"y":220,"wires":[["e1c0ca03.795908"]]},{"id":"e1c0ca03.795908","type":"function","z":"d0c77eb4.886e7","name":"Shut Down Comp","func":"msg.payload = \"now\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1110,"y":160,"wires":[["e85602ca.7f09"]]},{"id":"e85602ca.7f09","type":"mqtt out","z":"d0c77eb4.886e7","name":"","topic":"ESCRITORIO/in/shutdown","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1360,"y":160,"wires":[]},{"id":"861d211f.91bd2","type":"ui_button","z":"d0c77eb4.886e7","name":"","group":"4776a043.c6708","order":2,"width":"3","height":"1","passthru":false,"label":"Turn Off","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"TOGGLE","payloadType":"str","topic":"","x":900,"y":160,"wires":[["e1c0ca03.795908"]]},{"id":"68d8060d.bd4da8","type":"ui_switch","z":"d0c77eb4.886e7","name":"","label":"Comp","tooltip":"","group":"5635ed61.b910e4","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":710,"y":100,"wires":[["c56c377d.5386b8"]]},{"id":"133875fc.e712aa","type":"change","z":"2bcc0ccb.cd26a4","name":"","rules":[{"t":"set","p":"EsDeDia","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1470,"y":420,"wires":[[]]},{"id":"c56c377d.5386b8","type":"switch","z":"d0c77eb4.886e7","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":890,"y":120,"wires":[["849b3d9f.dee7d"],["e1c0ca03.795908"]],"outputLabels":["Prendida","Apagada"]},{"id":"adc054f7.7b3a78","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp Off","topic":"ESCRITORIO/out/SHUTDOWN","qos":"1","datatype":"auto","broker":"1ad27743.ce9fb9","x":120,"y":240,"wires":[["3bc3e4a7.a3a2bc"]]},{"id":"3bc3e4a7.a3a2bc","type":"change","z":"d0c77eb4.886e7","name":"Payload 0","rules":[{"t":"set","p":"payload","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":200,"wires":[["ef8f262.37035d8"]]},{"id":"b1d29e4f.f0f78","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp On","topic":"ESCRITORIO/out/IP","qos":"1","datatype":"auto","broker":"1ad27743.ce9fb9","x":120,"y":60,"wires":[["1a8b8922.1ae247"]]},{"id":"1a8b8922.1ae247","type":"change","z":"d0c77eb4.886e7","name":"Payload 1","rules":[{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":80,"wires":[["ef8f262.37035d8"]]},{"id":"37791139.092ede","type":"exec","z":"3e473a01.8f8df6","command":"ps4-waker standby","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Stand By","x":680,"y":120,"wires":[[],[],[]]},{"id":"7d2472a2.30d41c","type":"exec","z":"3e473a01.8f8df6","command":"ps4-waker","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Prender","x":660,"y":220,"wires":[[],[],[]]},{"id":"ecec0d4d.75abb","type":"link in","z":"3e473a01.8f8df6","name":"PS4 StandBy","links":["2b6212be.bbb05e","5c1eb982.eb3e88","79fc54ec.57faec"],"x":200,"y":120,"wires":[["37791139.092ede"]]},{"id":"75850dc9.24f0e4","type":"link in","z":"3e473a01.8f8df6","name":"PS4 Prender","links":["d5512660.a02bf8","8fbf78ab.1f29a8","e83353ed.ea3a2"],"x":215,"y":220,"wires":[["7d2472a2.30d41c"]]},{"id":"5b01d785.763578","type":"ui_button","z":"3e473a01.8f8df6","name":"","group":"6d364717.d4fd68","order":2,"width":"3","height":"1","passthru":false,"label":"Apagar","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"","payloadType":"str","topic":"","x":340,"y":80,"wires":[["37791139.092ede"]]},{"id":"6ec5d081.13756","type":"ui_button","z":"3e473a01.8f8df6","name":"","group":"6d364717.d4fd68","order":1,"width":"3","height":"1","passthru":false,"label":"Prender","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":340,"y":180,"wires":[["7d2472a2.30d41c"]]},{"id":"66ea1ea6.f51c9","type":"mqtt out","z":"295f893a.42f726","name":"","topic":"Arduino/PBTablero/in/IR/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1370,"y":360,"wires":[]},{"id":"87d09d20.76ddc","type":"change","z":"230ac56e.bc629a","name":"Power Muteki","rules":[{"t":"set","p":"payload","pt":"msg","to":"49,11,24,11,12,11,24,11,12,11,24,11,12,10,13,11,12,10,13,11,12,10,13,10,25,10,25,11,12,11,12,430","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":160,"wires":[["e14546fc.fe30c8"]]},{"id":"ad23c6a.6bda438","type":"link in","z":"230ac56e.bc629a","name":"Muteki Apagar","links":["1c538dff.50a992","4584644d.b2547c","744d68f5.52b7b8","3be5da58.c5d4a6"],"x":435,"y":380,"wires":[["667368e5.39beb8","dfb47d02.7d201"]]},{"id":"667368e5.39beb8","type":"change","z":"230ac56e.bc629a","name":"Apagar Subwoofers","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":440,"wires":[["b57ff1b4.07a6f"]]},{"id":"b57ff1b4.07a6f","type":"mqtt out","z":"230ac56e.bc629a","name":"Toma SubWoofer (26)","topic":"Arduino/PBLiving/in/Relay/26","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":900,"y":440,"wires":[],"inputLabels":["kkl"]},{"id":"7dbba7.e218f458","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"913b3f65.8b281","order":2,"width":"3","height":"1","passthru":false,"label":"PS4","tooltip":"","color":"","bgcolor":"","icon":"","payload":"49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311","payloadType":"str","topic":"","x":450,"y":100,"wires":[["c8ed4564.50aa78"]]},{"id":"da95dadf.54feb8","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"7ad1e0a0.b2f66","order":1,"width":"3","height":"1","passthru":false,"label":"Telecentro","tooltip":"","color":"","bgcolor":"","icon":"","payload":"49,10,13,10,25,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,11,12,10,25,10,13,10,25,11,12,10,13,310,49,11,12,10,25,10,13,11,12,11,24,11,12,11,13,10,13,10,13,11,12,10,13,10,25,11,12,10,13,10,13,11,24,10,13,10,25,10,13,10,13,311,48,11,12,11,24,11,12,11,12,11,24,11,12,10,12,11,12,10,13,11,12,11,12,10,25,10,13,11,12,11,12,11,24,11,12,10,25,10,13,11,12","payloadType":"str","topic":"","x":470,"y":200,"wires":[["e14546fc.fe30c8"]]},{"id":"8fbf78ab.1f29a8","type":"link out","z":"230ac56e.bc629a","name":"","links":["75850dc9.24f0e4","e4af47ab.016738"],"x":735,"y":140,"wires":[]},{"id":"b61ea9c6.b22358","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Pieza Nuestra LasSeen","topic":"OpenWrt/Ping/192.168.2.47/lastseen/epoch","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":110,"y":220,"wires":[["93aca954.871cd8"]]},{"id":"93aca954.871cd8","type":"trigger","z":"9bee6473.dc8598","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"5","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":320,"y":220,"wires":[["9556d962.343f38"]]},{"id":"9556d962.343f38","type":"change","z":"9bee6473.dc8598","name":"set TVPiezaNuestraPrendida","rules":[{"t":"set","p":"TVPiezaNuestraPrendida","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":280,"wires":[["74209ce6.41be74","39f5845a.1a619c"]]},{"id":"74209ce6.41be74","type":"ui_switch","z":"9bee6473.dc8598","name":"","label":"TV Pieza","tooltip":"","group":"f26c6aa4.77c7d8","order":1,"width":"3","height":"1","passthru":false,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":760,"y":280,"wires":[["904ba9a9.7982b8"]]},{"id":"b0ec0aa3.8392f8","type":"ui_button","z":"9bee6473.dc8598","name":"","group":"20a076b7.fe135a","order":1,"width":0,"height":0,"passthru":false,"label":"Power Tele","tooltip":"","color":"","bgcolor":"","icon":"","payload":"18,15,35,15,17,15,18,15,18,15,18,15,18,15,18,15,18,31,18,15,35,15,18","payloadType":"str","topic":"","x":710,"y":100,"wires":[["904ba9a9.7982b8"]]},{"id":"f4236661.eb0168","type":"mqtt out","z":"9bee6473.dc8598","name":"","topic":"NodeMcu/PiezaNuestra/in/IR/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1420,"y":240,"wires":[]},{"id":"904ba9a9.7982b8","type":"change","z":"9bee6473.dc8598","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"18,15,35,15,17,15,18,15,18,15,18,15,18,15,18,15,18,31,18,15,35,15,18","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":240,"wires":[["f4236661.eb0168"]]},{"id":"abd1cb9f.c69ab8","type":"link in","z":"9bee6473.dc8598","name":"Apagar Tv Living","links":["2ad750f0.7a56e","72a15218.1299fc","d6975a9c.3dc248"],"x":935,"y":700,"wires":[["9252059.c8547f8"]]},{"id":"e7f0a3b8.edc83","type":"link in","z":"9bee6473.dc8598","name":"Prender Tv Living","links":["33d81369.56798c"],"x":875,"y":820,"wires":[["31eb6eb4.73e6d2"]]},{"id":"b81bb3e8.bde01","type":"switch","z":"9bee6473.dc8598","name":"Prendida?","property":"TVPiezaNuestraPrendida","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":710,"y":60,"wires":[["904ba9a9.7982b8"]],"outputLabels":["Prendida"]},{"id":"48e4772.7832188","type":"ui_button","z":"9bee6473.dc8598","name":"","group":"20a076b7.fe135a","order":4,"width":"3","height":"1","passthru":false,"label":"Subir Volumen","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-up","payload":"18,14,36,15,18,15,18,15,18,14,18,15,18,15,18,31,35,15,18,15,18,15,18,18,14,36,15,18,15,18,15,18,14,18,15,18,15,18,31,35,15,18,15,18,15,18","payloadType":"str","topic":"","x":1000,"y":380,"wires":[["f4236661.eb0168"]]},{"id":"9ba4f536.674c48","type":"ui_button","z":"9bee6473.dc8598","name":"","group":"20a076b7.fe135a","order":3,"width":"3","height":"1","passthru":false,"label":"Bajar Volumen","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-down","payload":"18,15,35,15,17,15,18,15,18,15,18,15,18,15,18,32,35,15,18,15,18,31,18,18,15,35,15,17,15,18,15,18,15,18,15,18,15,18,32,35,15,18,15,18,31,18","payloadType":"str","topic":"","x":1000,"y":420,"wires":[["f4236661.eb0168"]]},{"id":"e14546fc.fe30c8","type":"mqtt out","z":"230ac56e.bc629a","name":"","topic":"Arduino/PBTablero/in/IR/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1070,"y":300,"wires":[]},{"id":"c8ed4564.50aa78","type":"change","z":"230ac56e.bc629a","name":"PS4","rules":[{"t":"set","p":"payload","pt":"msg","to":"49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":140,"wires":[["e14546fc.fe30c8","8fbf78ab.1f29a8"]]},{"id":"69611082.28aee","type":"change","z":"230ac56e.bc629a","name":"Telecentro","rules":[{"t":"set","p":"payload","pt":"msg","to":"49,10,13,10,25,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,11,12,10,25,10,13,10,25,11,12,10,13,310,49,11,12,10,25,10,13,11,12,11,24,11,12,11,13,10,13,10,13,11,12,10,13,10,25,11,12,10,13,10,13,11,24,10,13,10,25,10,13,10,13,311,48,11,12,11,24,11,12,11,12,11,24,11,12,10,12,11,12,10,13,11,12,11,12,10,25,10,13,11,12,11,12,11,24,11,12,10,25,10,13,11,12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":240,"wires":[["e14546fc.fe30c8","6ffc208b.be4f8"]]},{"id":"3cea545.81724ac","type":"link in","z":"230ac56e.bc629a","name":"Muteki Telecentro","links":["10c536dc.ed24f9","acdb7c61.ea52a"],"x":435,"y":240,"wires":[["69611082.28aee"]]},{"id":"f2785731.bd36e8","type":"link in","z":"230ac56e.bc629a","name":"Muteki PS4","links":[],"x":435,"y":140,"wires":[["c8ed4564.50aa78"]]},{"id":"7a8d5316.fd25ac","type":"link in","z":"230ac56e.bc629a","name":"Muteki Mute","links":["25714e8.454ecb2","61001a59.ae7164"],"x":435,"y":320,"wires":[["f09434f0.d25528"]]},{"id":"f09434f0.d25528","type":"change","z":"230ac56e.bc629a","name":"Mute","rules":[{"t":"set","p":"payload","pt":"msg","to":"49,10,13,10,13,10,25,10,13,10,25,10,12,10,13,10,13,10,13,10,13,10,13,10,25,10,25,10,13,10,13,442,49,10,13,10,13,10,25,10,13,10,25,11,12,10,13,10,13,11,12,11,12,10,13,11,24,11,24,11,12,11,12,443,49,10,13,10,13,10,25,11,12,10,25,10,13,10,13,11,12,10,13,10,13,10,13,10,25,10,25,10,13,10,13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":320,"wires":[["e14546fc.fe30c8"]]},{"id":"f5fdfcff.d3be5","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"7ad1e0a0.b2f66","order":7,"width":0,"height":0,"passthru":true,"label":"Mute","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-off","payload":"","payloadType":"str","topic":"","x":450,"y":280,"wires":[["f09434f0.d25528"]]},{"id":"16987e28.ccd0c2","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"7ad1e0a0.b2f66","order":3,"width":"3","height":"1","passthru":false,"label":"Apagar","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"49,11,24,11,12,11,24,11,12,11,24,11,12,10,13,11,12,10,13,11,12,10,13,10,25,10,25,11,12,11,12,430,49,10,25,10,13,10,25,10,13,10,25,10,13,10,13,10,13,10,13,11,12,10,13,10,25,10,25,10,13,10,13,430,49,10,25,11,12,11,24,10,13,11,24,11,12,10,13,11,12,11,12,11,12,11,12,10,25,10,25,11,12,11,12","payloadType":"str","topic":"","x":180,"y":380,"wires":[["1c538dff.50a992"]]},{"id":"1c538dff.50a992","type":"link out","z":"230ac56e.bc629a","name":"","links":["ad23c6a.6bda438"],"x":355,"y":380,"wires":[]},{"id":"fcada3ec.cffd","type":"mqtt out","z":"d4cc4a57.a7caa8","name":"","topic":"Arduino/PBTablero/in/RF433/","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1120,"y":220,"wires":[],"inputLabels":["kkl"]},{"id":"40b8d541.4c5d4c","type":"trigger","z":"d4cc4a57.a7caa8","name":"","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"1","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":700,"y":120,"wires":[["fcada3ec.cffd"]]},{"id":"4ed881e6.4c7a2","type":"link in","z":"d4cc4a57.a7caa8","name":"Proyector Pantalla Subir","links":["5516103c.a77ac","23801964.bda096","c5995599.14e858"],"x":295,"y":60,"wires":[["22ed0059.f7bab"]]},{"id":"22ed0059.f7bab","type":"change","z":"d4cc4a57.a7caa8","name":"Subir","rules":[{"t":"set","p":"payload","pt":"msg","to":"110101100010001010100010","tot":"str"},{"t":"set","p":"PantallaProyector","pt":"global","to":"100","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":80,"wires":[["40b8d541.4c5d4c"]]},{"id":"24810692.44e16a","type":"link in","z":"d4cc4a57.a7caa8","name":"Proyector Pantalla Bajar","links":["e1efbdd4.5baf8","f82f3292.24346","12848232.f8f20e"],"x":295,"y":140,"wires":[["ef07a12.2a0f46"]]},{"id":"ef07a12.2a0f46","type":"change","z":"d4cc4a57.a7caa8","name":"Bajar","rules":[{"t":"set","p":"payload","pt":"msg","to":"110101100010001010100100","tot":"str"},{"t":"set","p":"PantallaProyector","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":140,"wires":[["40b8d541.4c5d4c","f4ca659a.008868"]]},{"id":"511546f7.774948","type":"change","z":"d4cc4a57.a7caa8","name":"Parar","rules":[{"t":"set","p":"payload","pt":"msg","to":"110101100010001010101000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":220,"wires":[["fcada3ec.cffd"]]},{"id":"c265eb3b.3f8a88","type":"link in","z":"d4cc4a57.a7caa8","name":"Proyector Pantalla Parar","links":[],"x":295,"y":220,"wires":[["511546f7.774948"]]},{"id":"1dd91f1e.361d91","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"a676754.6a79888","order":3,"width":"6","height":"1","passthru":true,"label":"Parar","tooltip":"","color":"","bgcolor":"","icon":"fa-stop","payload":"","payloadType":"str","topic":"","x":330,"y":260,"wires":[["511546f7.774948"]]},{"id":"8dccc4a5.52f1e8","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"a676754.6a79888","order":4,"width":"3","height":"1","passthru":false,"label":"Prender","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":340,"y":380,"wires":[["78855132.54d3d"]]},{"id":"12954b05.ef1bd5","type":"change","z":"d4cc4a57.a7caa8","name":"Apagar","rules":[{"t":"set","p":"payload","pt":"msg","to":"182,88,12,32,12,32,12,10,12,10,12,9,12,10,12,9,12,32,12,10,12,10,12,32,12,10,12,32,12,32,12,32,12,32,12,10,12,32,12,32,12,32,12,10,12,10,12,32,12,10,12,32,12,10,12,10,12,10,12,32,12,32,12,10,12,32,12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":480,"wires":[["120ca2b2.f9ce1d"]]},{"id":"f8106cce.9b491","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"a676754.6a79888","order":7,"width":"3","height":"1","passthru":false,"label":"Menu","tooltip":"","color":"","bgcolor":"","icon":"fa-bars","payload":"182,88,12,32,12,32,12,10,12,10,12,9,12,10,12,9,12,32,12,10,12,10,12,32,12,10,12,32,12,32,12,32,12,32,12,10,12,10,12,10,12,10,12,32,12,32,12,10,12,10,12,32,12,32,12,32,12,32,12,10,12,10,12,32,12,32,12,182,88,12,32,12,32,12,10,12,10,12,9,12,10,12,9,12,32,12,10,12,10,12,32,12,10,12,32,12,32,12,32,12,32,12,10,12,10,12,10,12,10,12,32,12,32,12,10,12,10,12,32,12,32,12,32,12,32,12,10,12,10,12,32,12,32,12","payloadType":"str","topic":"","x":610,"y":720,"wires":[["9530ba68.b56d08"]]},{"id":"b31906b3.858ef8","type":"link in","z":"d4cc4a57.a7caa8","name":"Proyector Apagar","links":["ee6bc9d.7703638","d60eac.212d8158"],"x":375,"y":500,"wires":[["12954b05.ef1bd5"]]},{"id":"120ca2b2.f9ce1d","type":"trigger","z":"d4cc4a57.a7caa8","name":"","op1":"","op2":"","op1type":"pay","op2type":"pay","duration":"2","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":680,"y":480,"wires":[["9530ba68.b56d08"]]},{"id":"9530ba68.b56d08","type":"mqtt out","z":"d4cc4a57.a7caa8","name":"","topic":"Arduino/PBTablero/in/IR/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":990,"y":440,"wires":[]},{"id":"755337e5.6985c8","type":"link in","z":"d4cc4a57.a7caa8","name":"Proyector Prender","links":[],"x":395,"y":420,"wires":[["78855132.54d3d"]]},{"id":"78855132.54d3d","type":"change","z":"d4cc4a57.a7caa8","name":"Prender","rules":[{"t":"set","p":"payload","pt":"msg","to":"182,88,12,32,12,32,12,10,12,10,12,9,12,10,12,9,12,32,12,9,12,9,12,32,12,10,12,32,12,32,12,32,12,32,12,32,12,32,12,32,12,32,12,10,12,10,12,32,12,10,12,10,12,10,12,10,12,9,12,32,12,32,12,10,12,32,12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":420,"wires":[["9530ba68.b56d08"]]},{"id":"495c213.82ae9e","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"a676754.6a79888","order":6,"width":"3","height":"1","passthru":false,"label":"Apagar","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"181,89,12,32,12,32,12,10,12,10,12,10,12,10,11,10,12,33,12, 9,12,10,12,32,12,10,12,32,12,32,12,33,11,32,12,10,12,32,12,32,12,32,12,10,12,10,12,32,12,10,12,32,12,10,12,10,11,10,12,32,12,32,12,10,12,32,12,783,181,89,12,32,12,32,12,10,12,10,12,10,12,10,11,10,12,33,12, 9,12,10,12,32,12,10,12,32,12,32,12,33,11,32,12,10,12,32,12,32,12,32,12,10,12,10,12,32,12,10,12,32,12,10,12,10,11,10,12,32,12,32,12,10,12,32,12,783","payloadType":"str","topic":"","x":380,"y":540,"wires":[["12954b05.ef1bd5"]]},{"id":"dea05145.83588","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"a676754.6a79888","order":1,"width":"3","height":"1","passthru":true,"label":"Subir","tooltip":"","color":"","bgcolor":"","icon":"fa-arrow-up","payload":"","payloadType":"str","topic":"","x":370,"y":160,"wires":[["22ed0059.f7bab"]]},{"id":"8be774a4.192e38","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"a676754.6a79888","order":2,"width":"3","height":"1","passthru":true,"label":"Bajar","tooltip":"","color":"","bgcolor":"","icon":"fa-arrow-down","payload":"","payloadType":"str","topic":"","x":370,"y":40,"wires":[["ef07a12.2a0f46"]]},{"id":"26f8115c.6b657e","type":"link out","z":"c5b2ea55.84d058","name":"","links":["58568a39.50a6d4","7feab9a2.7110a8"],"x":1295,"y":260,"wires":[]},{"id":"6055a41.50a7f5c","type":"link in","z":"c5b2ea55.84d058","name":"Apagar Todo IR Living","links":["4b6c144e.3a0a8c","5f169587.07a31c","d87b7cfd.51b71"],"x":940,"y":260,"wires":[["24f9bd91.b9d4b2","744d68f5.52b7b8","26f8115c.6b657e"]],"l":true},{"id":"24f9bd91.b9d4b2","type":"delay","z":"c5b2ea55.84d058","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1140,"y":320,"wires":[["2ad750f0.7a56e"]]},{"id":"2ad750f0.7a56e","type":"link out","z":"c5b2ea55.84d058","name":"","links":["abd1cb9f.c69ab8"],"x":1295,"y":320,"wires":[]},{"id":"744d68f5.52b7b8","type":"link out","z":"c5b2ea55.84d058","name":"","links":["ad23c6a.6bda438","8db477cd.aac3e8"],"x":1115,"y":220,"wires":[]},{"id":"dfb47d02.7d201","type":"change","z":"230ac56e.bc629a","name":"Apagar Muteki","rules":[{"t":"set","p":"payload","pt":"msg","to":"48,11,24,11,24,11,24,11,12,11,24,11,24,11,12,11,12,11,12,11,24,11,12,11,12,11,12,11,12,11,12,419,48,11,24,11,24,11,24,11,12,11,24,11,24,11,12,11,12,11,12,11,24,11,12,11,12,11,12,11,12,11,12,419","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":380,"wires":[["e14546fc.fe30c8"]]},{"id":"b040e837.c30f28","type":"ui_button","z":"9bee6473.dc8598","name":"","group":"20a076b7.fe135a","order":2,"width":"3","height":"1","passthru":false,"label":"Telecentro","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"18,17,18,17,36,34,36,17,18,17,18,17,18,16,19,34,19,16,36,17,18","payloadType":"str","topic":"","x":990,"y":340,"wires":[["ed3caea1.14085"]]},{"id":"d12cc57d.dfa268","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"7ad1e0a0.b2f66","order":6,"width":"3","height":"1","passthru":true,"label":"Volumen UP 1","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-up","payload":"49,10,13,10,25,10,13,10,13,11,24,10,13,10,13,10,13,10,13,11,12,10,13,11,25,11,24,10,13,10,13,442,49,10,13,10,25,10,13,10,13,11,24,10,13,10,13,10,13,10,13,11,12,10,13,11,25,11,24,10,13,10,13,442","payloadType":"str","topic":"","x":400,"y":640,"wires":[["8a314981.e48488"]]},{"id":"800b8d3.d14977","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"7ad1e0a0.b2f66","order":5,"width":"3","height":"1","passthru":true,"label":"Volumen Down 1","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-down","payload":"49,10,25,10,25,10,13,10,13,10,25,10,13,10,13,10,13,10,12,10,13,10,13,10,25,10,25,10,13,10,13,430,49,10,25,10,25,10,13,10,13,10,25,10,13,10,13,10,13,10,12,10,13,10,13,10,25,10,25,10,13,10,13,430","payloadType":"str","topic":"","x":410,"y":720,"wires":[["a9c28ecf.eab8f"]]},{"id":"e7d74a7e.0edf38","type":"ui_button","z":"295f893a.42f726","name":"","group":"913b3f65.8b281","order":1,"width":0,"height":0,"passthru":false,"label":"Vent Super Bajo","tooltip":"","color":"","bgcolor":"","icon":"","payload":"88,87,11,31,11,10,11,32,11,31,11,10,11,10,11,31,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,10,11,31,12,32,11,10,11,32,11,32,11,31,11,31,11,32,11,31,11,10,11,32,11,9,12,10,11,10,11,10,11,10,11,10,11,32,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,10,11,10,11,10,11,32,11,31,12,10,11,31,11,31,11,104,89,86,11,32,11,9,12,32,11,31,11,10,11,10,11,31,11,10,11,10,11,32,11,10,11,10,11,32,11,32,11,10,11,31,12,31,12,10,11,32,11,31,11,31,11,31,11,31,11,31,12,10,11,31,11,10,11,10,11,10,11,10,11,10,11,10,11,31,12,31,11,32,11,10,11,10,11,31,12,10,11,10,12,10,11,10,11,10,11,31,11,31,11,10,11,31,11,32,11","payloadType":"str","topic":"","x":980,"y":340,"wires":[["66ea1ea6.f51c9"]]},{"id":"7bf2cd28.ce9dd4","type":"ui_slider","z":"295f893a.42f726","name":"","label":"Ventilador","tooltip":"","group":"7a092dd.29b3ed4","order":5,"width":"4","height":"1","passthru":false,"outs":"end","topic":"","min":"1","max":"3","step":1,"x":520,"y":640,"wires":[["30cac02e.da374"]]},{"id":"972311ac.5637","type":"ui_switch","z":"295f893a.42f726","name":"","label":"Frio","tooltip":"","group":"7a092dd.29b3ed4","order":4,"width":"2","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":530,"y":560,"wires":[["8a961b62.4e2688"]]},{"id":"ad594988.7bd4b8","type":"ui_switch","z":"295f893a.42f726","name":"","label":"Prendido","tooltip":"","group":"7a092dd.29b3ed4","order":3,"width":0,"height":0,"passthru":false,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":520,"y":500,"wires":[["ed080e99.59801"]]},{"id":"8a961b62.4e2688","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACLivingFrio","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":560,"wires":[["9161da56.e95698"]]},{"id":"30cac02e.da374","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACLivingVentilador","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":640,"wires":[["9161da56.e95698"]]},{"id":"9161da56.e95698","type":"function","z":"295f893a.42f726","name":"","func":"if (global.get(\"AACLivingPrendido\") === false) {\n    msg.payload = \"89,86,11,31,11,10,11,32,11,32,11,10,11,10,11,31,11,10,12,10,11,32,11,10,11,10,11,31,11,32,11,10,11,32,11,10,11,31,12,32,11,31,11,32,11,10,11,32,11,32,11,31,11,10,11,10,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,31,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,31,11,32,11,32,11,32,11,32,12,103,89,86,11,32,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,31,11,10,11,10,11,32,11,32,11,10,11,32,11,10,11,32,11,32,11,32,11,32,11,10,11,32,11,32,11,31,11,10,11,10,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,32,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,32,11,32,11,32,11,32,11,32,11\";\n    return msg; \n}\nvar Frio = global.get(\"AACLivingFrio\");\n\n//msg.payload = global.AACLivingVentilador.Value;\nswitch(global.get(\"AACLivingVentilador\")) {\n  case 1:\n      if (Frio === true)\n      {msg.payload = \"88,87,11,31,11,10,11,32,11,31,11,10,11,10,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,32,11,10,11,31,12,10,11,32,11,32,11,31,11,32,11,10,11,32,11,31,12,31,11,10,11,10,11,10,11,10,11,31,11,10,11,10,11,31,11,32,11,32,11,10,11,10,11,9,12,10,11,10,11,10,11,10,11,10,11,32,11,31,11,32,11,32,11,32,11,103,88,86,11,32,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,32,11,10,11,32,11,10,11,32,11,32,11,31,12,32,11,10,11,32,11,31,12,32,11,10,11,10,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,32,11,10,11,10,11,9,11,10,11,10,12,10,11,10,11,10,11,32,11,32,11,32,11,32,11,31,12\";}\n      else\n      {msg.payload = \"88,87,11,31,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,10,11,32,11,32,11,10,11,10,11,31,11,31,11,32,11,31,12,32,11,10,11,31,11,30,12,10,11,10,11,10,11,10,11,10,11,31,12,32,11,32,11,10,11,10,11,31,11,10,11,10,11,10,11,10,11,10,11,32,11,32,11,10,11,32,11,32,11,103,89,87,11,31,12,10,11,32,11,32,11,10,11,10,11,31,11,10,11,10,11,32,11,10,11,10,11,31,12,31,11,10,11,32,11,32,11,10,11,10,11,31,11,31,11,31,11,31,11,31,11,10,11,31,11,31,11,10,11,10,11,10,11,10,11,9,12,32,11,31,11,32,11,10,11,10,11,31,11,10,11,10,11,10,11,10,11,10,11,32,11,31,11,10,11,32,11,31,12\";}\n    break;\n  case 2:\n      if (Frio === true)\n      {msg.payload = \"88,86,11,31,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,10,11,32,11,10,11,32,11,10,11,32,11,32,11,32,11,32,11,32,11,31,11,10,11,31,11,10,11,10,11,10,11,10,11,10,11,10,11,31,11,10,11,10,11,10,11,10,11,9,12,10,11,31,11,10,11,31,11,32,11,32,11,32,11,32,11,31,11,103,88,86,11,32,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,10,11,10,11,31,11,31,12,10,11,32,11,10,11,31,11,10,11,32,11,32,11,32,11,32,11,32,11,31,11,10,11,32,11,10,11,10,11,10,11,10,11,10,11,9,11,32,11,10,11,10,11,10,11,10,11,10,11,10,11,32,11,10,11,32,11,32,11,32,11,32,11,32,11,32,11\";}\n      else\n      {msg.payload = \"87,87,11,32,11,10,11,31,12,32,11,10,11,10,11,32,11,10,11,10,11,31,12,10,11,10,11,32,11,32,11,10,11,32,11,10,11,31,11,10,11,32,11,32,11,31,11,31,11,32,11,32,11,10,11,32,11,10,11,10,11,10,11,10,11,10,11,32,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,10,11,9,12,10,11,32,11,32,11,10,11,31,12,32,11,104,89,87,11,32,11,10,11,32,11,32,11,10,11,9,12,32,11,10,11,10,11,32,11,10,11,10,11,32,11,32,11,10,11,32,11,9,11,32,11,10,11,31,12,31,11,31,11,32,11,32,11,32,11,9,12,32,11,9,12,10,11,10,11,10,11,10,11,32,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,10,11,10,11,10,11,31,11,32,11,10,11,32,11,32,11\";}\n    break;\n  case 3:\n      if (Frio === true)\n      {msg.payload = \"88,87,11,32,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,32,11,10,11,32,11,10,11,10,11,32,11,32,11,32,11,32,11,32,11,32,11,31,11,32,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,32,11,10,11,10,11,10,11,10,11,10,11,10,11,31,11,10,11,32,11,31,11,32,11,32,11,32,11,31,12,103,88,86,11,32,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,10,11,10,11,32,11,32,11,10,11,32,11,10,11,10,11,32,11,32,11,32,11,31,11,32,11,32,11,32,11,32,11,10,11,10,11,9,12,10,11,10,11,10,11,10,11,32,11,10,11,10,11,10,11,9,11,10,11,10,12,32,11,10,11,32,11,32,11,32,11,32,11,32,11,32,11\";}\n      else\n      {msg.payload = \"88,87,11,31,11,10,11,32,11,31,11,10,11,10,11,32,11,10,11,10,11,32,11,10,11,9,12,31,12,31,11,10,11,31,12,10,11,10,11,32,11,32,11,31,11,31,11,31,11,32,11,32,11,32,11,9,12,9,12,10,11,10,11,10,11,10,11,32,11,31,11,31,12,10,11,10,11,31,11,10,11,10,11,10,11,9,11,10,11,31,12,31,11,10,11,32,11,32,11,104,89,86,11,31,11,10,11,32,11,32,11,9,12,9,12,31,11,10,11,10,11,32,11,10,11,10,11,32,11,32,11,9,12,31,11,9,12,10,11,32,11,32,11,32,11,32,11,32,11,31,12,31,11,31,12,9,12,10,11,10,11,10,11,10,11,10,11,32,11,31,11,32,11,10,11,9,11,32,11,10,11,10,11,10,11,10,11,10,11,32,11,31,11,10,11,32,11,32,11\";}\n    break;\n  default:\n    // code block\n}\n    return msg;","outputs":1,"noerr":0,"x":1230,"y":560,"wires":[["66ea1ea6.f51c9"]]},{"id":"ed080e99.59801","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACLivingPrendido","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":500,"wires":[["9161da56.e95698"]]},{"id":"f15b031a.7478b","type":"switch","z":"295f893a.42f726","name":"Prendido","property":"payload","propertyType":"msg","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":1440,"y":460,"wires":[["6469230a.5002ac"],["9161da56.e95698"]]},{"id":"dd172b82.ab38f8","type":"ui_template","z":"230ac56e.bc629a","group":"7ad1e0a0.b2f66","name":"Subir Volumen 4","order":9,"width":"3","height":"1","format":"<script>\nthis.scope.on = {payload: \"49,10,13,10,25,10,13,10,13,11,24,10,13,10,13,10,13,10,13,11,12,10,13,11,25,11,24,10,13,10,13,442,49,10,13,10,25,10,13,10,13,11,24,10,13,10,13,10,13,10,13,11,12,10,13,11,25,11,24,10,13,10,13,442\"};\nthis.scope.off = {payload: 0};\n</script>\n<md-button\n   ng-touchstart=\"send(on)\"\n   ng-mousedown=\"send(on)\"\n   ng-touchend=\"send(off)\"\n   ng-mouseup=\"send(off)\">\n       Subir Volumen 3\n</md-button>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":320,"y":520,"wires":[["d29e1a1d.6ab168"]]},{"id":"d29e1a1d.6ab168","type":"trigger","z":"230ac56e.bc629a","name":"","op1":"","op2":"0","op1type":"pay","op2type":"str","duration":"-500","extend":false,"units":"ms","reset":"0","bytopic":"all","outputs":1,"x":620,"y":500,"wires":[["e14546fc.fe30c8"]]},{"id":"dfb14418.91ee08","type":"ui_template","z":"230ac56e.bc629a","group":"7ad1e0a0.b2f66","name":"Bajar Volumen 3","order":8,"width":"3","height":"1","format":"<script>\nthis.scope.on = {payload: \"49,10,25,10,25,10,13,10,13,10,25,10,13,10,13,10,13,10,12,10,13,10,13,10,25,10,25,10,13,10,13,430,49,10,25,10,25,10,13,10,13,10,25,10,13,10,13,10,13,10,12,10,13,10,13,10,25,10,25,10,13,10,13,430\"};\nthis.scope.off = {payload: 0};\n</script>\n<md-button\n   ng-touchstart=\"send(on)\"\n   ng-mousedown=\"send(on)\"\n   ng-touchend=\"send(off)\"\n   ng-mouseup=\"send(off)\">\n       Bajar Volumen 3\n</md-button> ","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":320,"y":480,"wires":[["d29e1a1d.6ab168"]]},{"id":"8af43110.2bdf2","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"a676754.6a79888","order":6,"width":"3","height":"1","passthru":false,"label":"Mute","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-off","payload":"182,88,12,32,12,32,12,10,12,10,12,9,12,10,12,9,12,32,12,10,12,10,12,32,12,10,12,32,12,32,12,32,12,32,12,10,12,32,12,32,12,32,12,10,12,10,12,32,12,10,12,32,12,10,12,10,12,10,12,32,12,32,12,10,12,32,12, 9,12,10,12,32,12,10,12,32,12,32,12,33,11,32,12,10,12,32,12,32,12,32,12,10,12,10,12,32,12,10,12,32,12,10,12,10,11,10,12,32,12,32,12,10,12,32,12,783,181,89,12,32,12,32,12,10,12,10,12,10,12,10,11,10,12,33,12, 9,12,10,12,32,12,10,12,32,12,32,12,33,11,32,12,10,12,32,12,32,12,32,12,10,12,10,12,32,12,10,12,32,12,10,12,10,11,10,12,32,12,32,12,10,12,32,12,783","payloadType":"str","topic":"","x":610,"y":680,"wires":[["9530ba68.b56d08"]]},{"id":"76741a46.ec1784","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Subwoofers","tooltip":"","group":"7ad1e0a0.b2f66","order":4,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBLiving/in/Relay/26","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1030,"y":1220,"wires":[["8591f331.53aaf"]]},{"id":"632bbf3f.f4a89","type":"ui_button","z":"295f893a.42f726","name":"","group":"7a092dd.29b3ed4","order":1,"width":"3","height":"1","passthru":false,"label":"Apagar","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"89,86,11,31,11,10,11,32,11,32,11,10,11,10,11,31,11,10,12,10,11,32,11,10,11,10,11,31,11,32,11,10,11,32,11,10,11,31,12,32,11,31,11,32,11,10,11,32,11,32,11,31,11,10,11,10,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,31,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,31,11,32,11,32,11,32,11,32,12,103,89,86,11,32,11,10,11,32,11,32,11,10,11,10,11,32,11,10,11,10,11,31,11,10,11,10,11,32,11,32,11,10,11,32,11,10,11,32,11,32,11,32,11,32,11,10,11,32,11,32,11,31,11,10,11,10,11,10,11,10,11,32,11,10,11,10,11,31,11,32,11,32,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,32,11,32,11,32,11,32,11,32,11","payloadType":"str","topic":"","x":960,"y":280,"wires":[["66ea1ea6.f51c9"]]},{"id":"39f5845a.1a619c","type":"ui_switch","z":"9bee6473.dc8598","name":"","label":"TV Pieza","tooltip":"","group":"20a076b7.fe135a","order":1,"width":"3","height":"1","passthru":false,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":760,"y":340,"wires":[["904ba9a9.7982b8"]]},{"id":"2c69a6ee.42f82a","type":"mqtt out","z":"235e5af0.561006","name":"Luz Patio (36)","topic":"Arduino/PBTablero/in/Relay/36","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1140,"y":700,"wires":[],"inputLabels":["kkl"]},{"id":"dbcfdb9c.cc17f8","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"20","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":890,"y":600,"wires":[["b31bef.2987d41"]]},{"id":"b31bef.2987d41","type":"mqtt out","z":"235e5af0.561006","name":"Luz Vestidor (34)","topic":"Arduino/PBTablero/in/Relay/34","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1150,"y":620,"wires":[],"inputLabels":["kkl"]},{"id":"d32cb70a.b7fcf8","type":"function","z":"2228dc2c.99e004","name":"Setear Fecha","func":"var topics = msg.topic.split(\"/\");\nmsg.Mac = topics[3];\nmsg.Router = topics[1];\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":180,"wires":[["3f936b5f.fd8514"]]},{"id":"511b6daa.89fb74","type":"mqtt in","z":"2228dc2c.99e004","name":"Eventos  Wifi","topic":"OpenWrt/+/status/+/event","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":170,"y":140,"wires":[["d32cb70a.b7fcf8"]]},{"id":"c116c286.819b9","type":"debug","z":"2228dc2c.99e004","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1130,"y":200,"wires":[]},{"id":"3f936b5f.fd8514","type":"switch","z":"2228dc2c.99e004","name":"","property":"Mac","propertyType":"msg","rules":[{"t":"eq","v":"mac-b8-d7-af-b0-e2-9d","vt":"str"},{"t":"eq","v":"mac-38-80-df-18-15-ec","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":630,"y":200,"wires":[["390ccb8f.d92d64"],["efb30fd2.69a57"]],"outputLabels":["Chicho","Babu"]},{"id":"390ccb8f.d92d64","type":"function","z":"2228dc2c.99e004","name":"Chicho","func":"msg.Device = \"Chicho\";\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":160,"wires":[["3566f1c8.7d56fe"]]},{"id":"efb30fd2.69a57","type":"function","z":"2228dc2c.99e004","name":"Babu","func":"msg.Device = \"Babu\";\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":220,"wires":[["3566f1c8.7d56fe"]]},{"id":"3566f1c8.7d56fe","type":"function","z":"2228dc2c.99e004","name":"Logica","func":"\nglobal.set(\"Pres/\" + msg.Device + \"/LastSeen\",new Date());\nglobal.set(\"Pres/\" + msg.Device + \"/Ubicacion\",msg.Router);\nif (msg.payload == \"new\")\n{global.set(\"Pres/\" + msg.Device + \"/Presente\",true);}\nelse\n{global.set(\"Pres/\" + msg.Device + \"/Presente\",false);}\nreturn msg;","outputs":1,"noerr":0,"x":950,"y":200,"wires":[["c116c286.819b9"]]},{"id":"b9bbf481.68b538","type":"ui_button","z":"c5b2ea55.84d058","name":"","group":"837d3079.305cd","order":14,"width":0,"height":0,"passthru":false,"label":"Apagar Todo Living","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":230,"y":320,"wires":[["6abe0d5b.91b464"]]},{"id":"6abe0d5b.91b464","type":"link out","z":"c5b2ea55.84d058","name":"","links":["d8ffd3b2.e534f"],"x":415,"y":360,"wires":[]},{"id":"833100a0.e5f0c","type":"link in","z":"bb63d718.931208","name":"Apagar Luces Living","links":["b5514a52.2ccb08","6e56b3ee.42e21c"],"x":715,"y":540,"wires":[["3da337a9.1afa28","13259406.fd9c8c"]]},{"id":"3da337a9.1afa28","type":"function","z":"bb63d718.931208","name":"Apagar Luces Living","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":900,"y":540,"wires":[["104f8203.015b3e","d58fafa8.afc3a","48b04e6.93c95b","889bd440.0cc928","c47bebca.18de88"]]},{"id":"5bd4377.58992c8","type":"mqtt in","z":"2228dc2c.99e004","name":"Eventos  Wifi","topic":"OpenWrt/+/status/+/","qos":"2","broker":"1ad27743.ce9fb9","x":150,"y":220,"wires":[["aa2c1124.bac7d"]]},{"id":"aa2c1124.bac7d","type":"debug","z":"2228dc2c.99e004","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":370,"y":260,"wires":[]},{"id":"944b10bd.cc3db","type":"function","z":"5f9dfcc6.ecd504","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":220,"wires":[[]]},{"id":"455fd92c.9203e8","type":"subflow:5f9dfcc6.ecd504","z":"bb63d718.931208","name":"","env":[],"x":100,"y":80,"wires":[["61001a59.ae7164"],[],["8a49d2e9.5f9e2"],["2152d1d.25a1c2e"]]},{"id":"d8ffd3b2.e534f","type":"link in","z":"c5b2ea55.84d058","name":"Apagar Todo Living","links":["2c6a112c.8fd2ae","6abe0d5b.91b464","8a49d2e9.5f9e2","3685c04c.89fdd"],"x":590,"y":360,"wires":[["b5514a52.2ccb08","25b13e03.853852","4b6c144e.3a0a8c"]],"l":true},{"id":"b5514a52.2ccb08","type":"link out","z":"c5b2ea55.84d058","name":"","links":["833100a0.e5f0c"],"x":835,"y":400,"wires":[]},{"id":"4b6c144e.3a0a8c","type":"link out","z":"c5b2ea55.84d058","name":"","links":["6055a41.50a7f5c"],"x":835,"y":320,"wires":[]},{"id":"8a49d2e9.5f9e2","type":"link out","z":"bb63d718.931208","name":"","links":["d8ffd3b2.e534f"],"x":255,"y":100,"wires":[]},{"id":"168fd1b0.3e5f9e","type":"function","z":"2bcc0ccb.cd26a4","name":"Invertir","func":"msg.payload = Math.round(1024 - msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":540,"wires":[["f85b7a96.dd6998"]]},{"id":"10fcbb19.64efb5","type":"mqtt in","z":"2bcc0ccb.cd26a4","name":"Lluvia  (A15 Naranja","topic":"Arduino/PBLiving/out/Sensores/Analog/15","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":150,"y":160,"wires":[["ee5705ab.f79a48","214d3c34.0ed094"]]},{"id":"e6661dc0.44827","type":"ui_gauge","z":"2bcc0ccb.cd26a4","name":"","group":"622bb9e6.9808f8","order":3,"width":0,"height":0,"gtype":"gage","title":"Lluvia","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#000000","#01928a","#166dfe"],"seg1":"30","seg2":"70","x":890,"y":160,"wires":[]},{"id":"5020374e.25b588","type":"mqtt in","z":"611d2ba5.389f94","name":"Teclas Living Der 1 (35) (UTP Negro Naranja Claro)","topic":"Arduino/PBLiving/out/Button/35/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":250,"y":320,"wires":[["7f58764.5ff8288"]]},{"id":"7f58764.5ff8288","type":"function","z":"611d2ba5.389f94","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":320,"wires":[[]]},{"id":"7b4f0659.b9ec28","type":"mqtt in","z":"611d2ba5.389f94","name":"Encoder 0 (13)","topic":"Arduino/PBLiving/out/Encoder/0/value","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":280,"y":420,"wires":[["5c9fdad1.e0a4e4"]]},{"id":"3c9c2a81.108fc6","type":"mqtt in","z":"611d2ba5.389f94","name":"Encoder 1 (14)","topic":"Arduino/PBLiving/out/Encoder/1/value","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":320,"y":540,"wires":[["99cf7cac.7f194"]]},{"id":"2462dea6.9d2f92","type":"subflow:611d2ba5.389f94","z":"75f22ec1.216f","name":"","env":[],"x":140,"y":520,"wires":[["3b6ab568.c5be6a"],["e65da136.aa8ee"],["efb462ab.601b6"],["efb462ab.601b6","c915f07d.f44ef"],["6b13299.94ad3d8"]]},{"id":"fba26c2c.32ce9","type":"change","z":"611d2ba5.389f94","name":"","rules":[{"t":"set","p":"Pote1","pt":"global","to":"payload","tot":"msg"},{"t":"set","p":"NroEncoder","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":420,"wires":[[]]},{"id":"256f449a.6123fc","type":"function","z":"57b26073.47916","name":"Inicializar","func":"var topics = msg.topic.split(\"/\");\nif (topics[0].toUpperCase() == \"ARDUINO\")\n{\n    msg.ip = msg.topic;\n    msg.topic = \"Arduino/\" + topics[1] + \"/in/\";\n    msg.ArduinoName = \"Arduino/\" + topics[1];\n    msg.host = msg.payload;\n    global.set(msg.ArduinoName,msg.payload);\n    return msg;    \n}\n","outputs":1,"noerr":0,"x":380,"y":340,"wires":[["afdbb2b3.a8ce","dcb90eac.3ec2d","e6346b2a.c7a8f8","99f128b8.8258f8","4a233454.2c259c","690ec881.6b6488","2e938730.aaa208","5b8400aa.a2ab8","8c5f4b50.903368","629dcb66.377934"]]},{"id":"afdbb2b3.a8ce","type":"function","z":"57b26073.47916","name":"MaxDev","func":"msg.topic = msg.topic + \"Sensores/MAXDEV\";\nmsg.payload = 20;\nreturn msg;","outputs":1,"noerr":0,"x":620,"y":280,"wires":[["c1566fcc.e4eaa"]]},{"id":"dcb90eac.3ec2d","type":"function","z":"57b26073.47916","name":"Milis","func":"msg.topic = msg.topic + \"Sensores/MILIS\";\nmsg.payload = 50;\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":320,"wires":[["c1566fcc.e4eaa"]]},{"id":"e6346b2a.c7a8f8","type":"function","z":"57b26073.47916","name":"Noise Milis","func":"msg.topic = msg.topic + \"Relay/NOISEMILLIS\";\nmsg.payload = 30;\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":360,"wires":[["c1566fcc.e4eaa"]]},{"id":"666818ba.645868","type":"debug","z":"57b26073.47916","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":390,"y":400,"wires":[]},{"id":"940ec39d.c1b34","type":"ui_chart","z":"2bcc0ccb.cd26a4","name":"","group":"622bb9e6.9808f8","order":4,"width":0,"height":0,"label":"Lluvia","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":890,"y":80,"wires":[[]]},{"id":"296d7504.367dca","type":"range","z":"2bcc0ccb.cd26a4","minin":"0","maxin":"1024","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":470,"y":160,"wires":[["e6661dc0.44827","fe6efba7.7188a8","dd1bf912.b28218"]]},{"id":"1ad21b50.4914b5","type":"mqtt in","z":"930c94d9.38ece8","name":"Tablero Volts (A3)","topic":"Arduino/PBTablero/out/Sensores/Analog/Max/3","qos":"2","broker":"1ad27743.ce9fb9","x":190,"y":240,"wires":[["20d46931.130a56","3dc8b540.d71e8a"]]},{"id":"37a28d45.077482","type":"ui_chart","z":"930c94d9.38ece8","name":"","group":"e11d6ab1.7fd148","order":4,"width":0,"height":0,"label":"Volts","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"160","ymax":"240","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":850,"y":220,"wires":[[]]},{"id":"20d46931.130a56","type":"range","z":"930c94d9.38ece8","minin":"578","maxin":"613","minout":"165","maxout":"181","action":"scale","round":true,"property":"payload","name":"","x":380,"y":220,"wires":[["c36fed42.5c683","98bbab7b.188e98","b902c043.7dfc4"]]},{"id":"fa8577db.ecaab8","type":"mqtt in","z":"930c94d9.38ece8","name":"Tablero Amps (A12)","topic":"Arduino/PBLiving/out/Sensores/Analog/Max/12","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":130,"y":380,"wires":[["5d979510.30364c","d0174328.ef71a"]]},{"id":"5d979510.30364c","type":"range","z":"930c94d9.38ece8","minin":"57","maxin":"95","minout":"9","maxout":"16.2","action":"scale","round":false,"property":"payload","name":"","x":380,"y":340,"wires":[["1acb3f3a.35b0e1"]]},{"id":"e9212db8.007b8","type":"ui_chart","z":"930c94d9.38ece8","name":"","group":"e11d6ab1.7fd148","order":5,"width":0,"height":0,"label":"Amps","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"40","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":870,"y":360,"wires":[[]]},{"id":"1acb3f3a.35b0e1","type":"function","z":"930c94d9.38ece8","name":"Redondeo","func":"msg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":340,"wires":[["b012fb74.fc3998","3f28239a.45699c","57a7a262.e9272c"]]},{"id":"3f28239a.45699c","type":"change","z":"930c94d9.38ece8","name":"","rules":[{"t":"set","p":"Amps","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":400,"wires":[[]]},{"id":"98bbab7b.188e98","type":"change","z":"930c94d9.38ece8","name":"","rules":[{"t":"set","p":"Volts","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":280,"wires":[[]]},{"id":"e8dc009e.b6db2","type":"function","z":"930c94d9.38ece8","name":"","func":"var Watts =  Math.round(global.get(\"Amps\") * global.get(\"Volts\") * 1) /1\nglobal.set(\"Watts\",Watts)\nglobal.set(\"WattsAcumm\",global.get(\"WattsAcumm\") + Watts )\nglobal.set(\"WattsAcummCnt\",global.get(\"WattsAcummCnt\") + 1 )\nmsg.payload = Watts\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":450,"y":560,"wires":[["bfac5399.e34c2","da409666.c002c8"]]},{"id":"6e47d63c.d243c8","type":"inject","z":"930c94d9.38ece8","name":"Watts cada 2 seg","repeat":"2","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"","payloadType":"date","x":230,"y":560,"wires":[["e8dc009e.b6db2"]]},{"id":"dbdd5238.1ff37","type":"ui_chart","z":"930c94d9.38ece8","name":"","group":"e11d6ab1.7fd148","order":6,"width":0,"height":0,"label":"Watts","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"8800","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":770,"y":600,"wires":[[]]},{"id":"8df7d439.902dd8","type":"inject","z":"930c94d9.38ece8","name":"Acumulado Watts (1 Hora)","repeat":"10","crontab":"","once":true,"onceDelay":"10","topic":"","payload":"","payloadType":"date","x":320,"y":680,"wires":[["d9abc83e.199c18"]]},{"id":"d9abc83e.199c18","type":"function","z":"930c94d9.38ece8","name":"","func":"msg.Watts = global.get(\"WattsAcumm\")\nmsg.Cnt = global.get(\"WattsAcummCnt\")\nmsg.payload = msg.Watts / 1000 * msg.Cnt / 3600\nglobal.set(\"WattsAcumm\",0)\nglobal.set(\"WattsAcummCnt\",0)\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":700,"wires":[[]]},{"id":"dd1bf912.b28218","type":"switch","z":"2bcc0ccb.cd26a4","name":"Llueve?","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"10","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":700,"y":200,"wires":[["4ebd7094.cbca3"],["1f93b319.4b52fd"]],"outputLabels":["Llueve","No Llueve"]},{"id":"4ebd7094.cbca3","type":"function","z":"2bcc0ccb.cd26a4","name":"Llueve","func":"msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":200,"wires":[["37fc6ace.6d0736"]]},{"id":"1f93b319.4b52fd","type":"function","z":"2bcc0ccb.cd26a4","name":"No Llueve","func":"msg.payload = false;\nreturn msg;","outputs":1,"noerr":0,"x":880,"y":240,"wires":[["37fc6ace.6d0736"]]},{"id":"37fc6ace.6d0736","type":"change","z":"2bcc0ccb.cd26a4","name":"","rules":[{"t":"set","p":"Llueve","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":200,"wires":[[]]},{"id":"9b693f6f.31219","type":"ui_led","z":"235e5af0.561006","order":1,"group":"b32fa3e9.f2b7f","width":"","height":"","label":"Entrada","colorForValue":[{"color":"grey","value":"0","valueType":"num"},{"color":"red","value":"1","valueType":"num"}],"name":"Entrada","x":1040,"y":180,"wires":[]},{"id":"8f6a9ccd.2311f","type":"ui_led","z":"235e5af0.561006","order":4,"group":"b32fa3e9.f2b7f","width":"","height":"","label":"Vestidor","colorForValue":[{"color":"grey","value":"0","valueType":"num"},{"color":"red","value":"1","valueType":"num"}],"name":"Vestidor","x":1040,"y":240,"wires":[]},{"id":"8439a120.efd7a","type":"ui_led","z":"235e5af0.561006","order":7,"group":"b32fa3e9.f2b7f","width":"","height":"","label":"Patio","colorForValue":[{"color":"grey","value":"0","valueType":"num"},{"color":"red","value":"1","valueType":"num"}],"name":"Patio","x":1050,"y":300,"wires":[]},{"id":"65dfdee.897542","type":"aggregator","z":"2bcc0ccb.cd26a4","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":430,"y":420,"wires":[["8dcdadb5.5986a","21d4f582.ba380a"]]},{"id":"fe6efba7.7188a8","type":"aggregator","z":"2bcc0ccb.cd26a4","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":690,"y":80,"wires":[["940ec39d.c1b34"]]},{"id":"c36fed42.5c683","type":"aggregator","z":"930c94d9.38ece8","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":590,"y":240,"wires":[["37a28d45.077482"]]},{"id":"b012fb74.fc3998","type":"aggregator","z":"930c94d9.38ece8","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":730,"y":360,"wires":[["e9212db8.007b8"]]},{"id":"bfac5399.e34c2","type":"aggregator","z":"930c94d9.38ece8","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"aggregationType":"median","x":610,"y":600,"wires":[["dbdd5238.1ff37"]]},{"id":"849b3d9f.dee7d","type":"wake on lan","z":"d0c77eb4.886e7","mac":"E0:D5:5E:47:F3:C1","host":"","udpport":"9","name":"PC","x":1090,"y":100,"wires":[]},{"id":"725ae951.b61ef8","type":"Invert","z":"2bcc0ccb.cd26a4","name":"Invert","x":1290,"y":420,"wires":[["133875fc.e712aa"]]},{"id":"c81d7a30.a3fa68","type":"trigger","z":"57b26073.47916","name":"","op1":"","op2":"","op1type":"date","op2type":"date","duration":"5","extend":false,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":640,"y":580,"wires":[["99f128b8.8258f8"]]},{"id":"61d6c495.e7e54c","type":"switch","z":"57b26073.47916","name":"Responde Ping?","property":"payload","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":870,"y":520,"wires":[["ae85b6d5.63f218"],["850a633f.0f152"]]},{"id":"ae85b6d5.63f218","type":"function","z":"57b26073.47916","name":"Arduino Down","func":"global.set(msg.ArduinoName + \"/Up\",false);\nmsg.LastSeen = global.get(msg.ArduinoName + \"/LastSeen\");\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":420,"wires":[[]]},{"id":"850a633f.0f152","type":"function","z":"57b26073.47916","name":"Arduino Up","func":"global.set(msg.ArduinoName + \"/Up\",true);\nglobal.set(msg.ArduinoName + \"/LastSeen\",new Date());\nmsg.payload = true;\nmsg.LastSeen = new Date();\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":540,"wires":[[]]},{"id":"b492275e.fcfe48","type":"ui_text","z":"57b26073.47916","group":"b89f1435.0c4bf8","order":5,"width":0,"height":0,"name":"PBLiving","label":"LastSeen","format":"{{msg.LastSeen}}","layout":"row-spread","x":600,"y":800,"wires":[]},{"id":"de8340ab.decd","type":"ui_text","z":"57b26073.47916","group":"b89f1435.0c4bf8","order":13,"width":0,"height":0,"name":"PBTablero","label":"LastSeen","format":"{{msg.LastSeen}}","layout":"row-spread","x":610,"y":920,"wires":[]},{"id":"99f128b8.8258f8","type":"adv ping","z":"57b26073.47916","name":"","host":"","x":640,"y":520,"wires":[["61d6c495.e7e54c","c81d7a30.a3fa68"]]},{"id":"60ed99dc.830dd8","type":"trigger","z":"bb63d718.931208","name":"","op1":"","op2":"0","op1type":"pay","op2type":"str","duration":"2","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":780,"y":300,"wires":[["d58fafa8.afc3a"]]},{"id":"ee5705ab.f79a48","type":"ui_level","z":"2bcc0ccb.cd26a4","group":"cd9fc1f7.18d92","order":2,"width":0,"height":0,"name":"","label":"Lluvia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":"1024","segWarn":"","segHigh":"","unit":"units","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":370,"y":260,"wires":[]},{"id":"214d3c34.0ed094","type":"function","z":"2bcc0ccb.cd26a4","name":"Invertir","func":"msg.payload = Math.round(1024 - msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":160,"wires":[["296d7504.367dca"]]},{"id":"c0c5968f.951788","type":"ui_level","z":"2bcc0ccb.cd26a4","group":"cd9fc1f7.18d92","order":2,"width":0,"height":0,"name":"","label":"Luz","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":"1024","segWarn":"","segHigh":"","unit":"units","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":350,"y":320,"wires":[]},{"id":"d0174328.ef71a","type":"ui_level","z":"930c94d9.38ece8","group":"e8c5d0b7.ae42a","order":2,"width":0,"height":0,"name":"","label":"Amps","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":"1024","segWarn":"","segHigh":"","unit":"units","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":370,"y":460,"wires":[]},{"id":"3dc8b540.d71e8a","type":"ui_level","z":"930c94d9.38ece8","group":"e8c5d0b7.ae42a","order":2,"width":0,"height":0,"name":"","label":"Volts","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":"1024","segWarn":"","segHigh":"","unit":"units","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":370,"y":420,"wires":[]},{"id":"4a233454.2c259c","type":"function","z":"57b26073.47916","name":"PING","func":"msg.topic = msg.topic + \"PING\";\nmsg.payload = 1;\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":160,"wires":[[]]},{"id":"8899307f.25896","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/PCAmbilight/out/PONG","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1150,"y":1360,"wires":[["2cdc476c.ba5288"]]},{"id":"cdd4a2c5.d5c87","type":"ui_button","z":"57b26073.47916","name":"","group":"b89f1435.0c4bf8","order":7,"width":0,"height":0,"passthru":false,"label":"Reboot PBLiving","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"Arduino/PBLiving/in/RESET","x":950,"y":280,"wires":[["aaed4da3.1d519"]]},{"id":"c89b94c6.d243e8","type":"ui_button","z":"57b26073.47916","name":"","group":"b89f1435.0c4bf8","order":15,"width":0,"height":0,"passthru":false,"label":"Reboot PBTablero","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"Arduino/PBTablero/in/RESET","x":1350,"y":360,"wires":[["aaed4da3.1d519"]]},{"id":"3a9cad9f.86dc72","type":"mqtt in","z":"930c94d9.38ece8","name":"Tablero Amps (A12)","topic":"Arduino/PBLiving/out/Sensores/Analog/12","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":170,"y":480,"wires":[["c474e789.14d038"]]},{"id":"c474e789.14d038","type":"ui_level","z":"930c94d9.38ece8","group":"e8c5d0b7.ae42a","order":2,"width":0,"height":0,"name":"","label":"Amps","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":"1024","segWarn":"","segHigh":"","unit":"units","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":true,"tickmode":"off","peakmode":false,"peaktime":"3000","x":370,"y":500,"wires":[]},{"id":"8243518b.b9425","type":"influxdb out","z":"887b2e31.18293","influxdb":"e5a1cfdf.94ab5","name":"","measurement":"Relays","precision":"s","retentionPolicy":"","x":770,"y":120,"wires":[]},{"id":"97dab7ab.a7c948","type":"function","z":"887b2e31.18293","name":"","func":"msg.payload = [{\n    value: msg.payload\n},\n{\n    arduino:msg.arduino,\n    nro:msg.relay\n}];\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":120,"wires":[["8243518b.b9425"]]},{"id":"698870fb.682f5","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/PBLiving/out/LastSeen","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":210,"y":820,"wires":[["f7536e2c.98f8d","88f0291.63bc6d8"]]},{"id":"f7536e2c.98f8d","type":"trigger","z":"57b26073.47916","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"7","extend":true,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":460,"y":840,"wires":[["2400c417.1b36cc","5c5e651a.a6069c","3fb20c49.151574"]]},{"id":"2400c417.1b36cc","type":"ui_led","z":"57b26073.47916","order":2,"group":"b89f1435.0c4bf8","width":0,"height":0,"label":"PBLiving OK","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"PBLiving OK","x":610,"y":840,"wires":[]},{"id":"8c555022.ddcbc","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/PBTablero/out/LastSeen","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":210,"y":900,"wires":[["cd8a1740.44b838","95e968b8.b2d2f8"]]},{"id":"cd8a1740.44b838","type":"trigger","z":"57b26073.47916","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"7","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"topic","topic":"topic","outputs":1,"x":460,"y":880,"wires":[["eea63b5f.041388","12a042ce.4bb26d","282dd99f.b90e46"]]},{"id":"eea63b5f.041388","type":"ui_led","z":"57b26073.47916","order":10,"group":"b89f1435.0c4bf8","width":0,"height":0,"label":"PbTablero OK","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"PbTablero OK","x":620,"y":880,"wires":[]},{"id":"62acdaee.5710d4","type":"trigger","z":"235e5af0.561006","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"50","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":470,"y":960,"wires":[[]]},{"id":"50a9490.aee2eb8","type":"inject","z":"235e5af0.561006","name":"","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":470,"y":1020,"wires":[[]]},{"id":"dc07d014.12b79","type":"ui_button","z":"9bee6473.dc8598","name":"","group":"20a076b7.fe135a","order":3,"width":"3","height":"1","passthru":false,"label":"Bajar Volumen 2","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-down","payload":"18,15,35,15,17,15,18,15,18,15,18,15,18,15,18,32,35,15,18,15,18,31,18","payloadType":"str","topic":"","x":980,"y":500,"wires":[["f4236661.eb0168"]]},{"id":"ac435dc5.be83f","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Audio Patio","tooltip":"","group":"35f37aae.e9b246","order":11,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/38","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1030,"y":540,"wires":[["8591f331.53aaf"]]},{"id":"b4ead4ce.3b6be8","type":"function","z":"75f22ec1.216f","name":"Cambiar CurrLed","func":"var CurrLed = flow.get(\"CurrLed\")||0;\nif (CurrLed >= 4 )  { CurrLed = 0;}\nCurrLed += 1;\nflow.set(\"CurrLed\",CurrLed)\nmsg.currLed = CurrLed;\nmsg.Blink = true;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":690,"y":480,"wires":[["aa7469b3.affdc8"]]},{"id":"6b13299.94ad3d8","type":"function","z":"75f22ec1.216f","name":"CurrLedOnOff","func":"msg.currLed = flow.get(\"CurrLed\");\nvar Nombre = \"CurrLedOnOff\" + msg.currLed;\nflow.set(Nombre,!flow.get(Nombre))\nmsg.payload = flow.get(Nombre);\nmsg.topic =\"\";\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":520,"wires":[["e1797793.8d47b8"]]},{"id":"b96f3183.63427","type":"function","z":"75f22ec1.216f","name":"CurrLedMode","func":"msg.currLed = flow.get(\"CurrLed\");\nvar Nombre = \"CurrLedMode\" + msg.currLed;\nvar CurrMode = flow.get(Nombre)||\"FILL\";\nmsg.topic =\"\";\nswitch(parseInt(msg.currLed))\n{\n    case 1:\n    case 2:\n    case 3:\n    case 4:\n    case 99:\n        switch(CurrMode)\n        {\n            case \"FILL\":\n                msg.mode = \"SINELON\";\n                break;   \n            case \"SINELON\":\n                msg.mode = \"FULL\";\n                break;   \n           case \"FULL\":\n                msg.mode = \"RAINBOW\";\n                break;   \n           case \"RAINBOW\":\n                msg.mode = \"FILL\";\n                break;   \n        }\n        break;   \n} \n\nflow.set(Nombre,msg.mode);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":420,"wires":[["aa7469b3.affdc8"]]},{"id":"aa7469b3.affdc8","type":"function","z":"75f22ec1.216f","name":"Setear Topic CurrLed","func":"switch(parseInt(msg.currLed))\n{\n    case 1:\n        msg.topic = \"Arduino/PBTablero/in/WSSTRIP/0/\"\n        break;\n    case 2:\n        msg.topic = \"Arduino/PBTablero/in/WSSTRIP/2/\";\n        break;\n    case 3:\n        msg.topic = \"Arduino/PBTablero/in/WSSTRIP/3/\";\n        break;\n    case 4:\n        msg.topic = \"Arduino/PBTablero/in/WSSTRIP/1/\";\n        break;\n     case 5:\n        msg.topic = \"Arduino/PBLiving/in/WSSTRIP/0/\";\n        break;\n     case 6:\n        msg.topic = \"Arduino/PBTablero/in/WSSTRIP/4/\";\n        break;\n     case 10:\n        msg.topic = \"NodeMcu/PiezaNenes/in/WSSTRIP/0/\";\n        break;\n     case 11:\n        msg.topic = \"NodeMcu/PiezaNenes/in/WSSTRIP/1/\";\n        break;\n    case 99:\n        msg.topic = \"Arduino/PBTablero/in/WSSTRIP/0,1,2,3/\";\n        break;\n    case 98:\n        msg.topic = \"NodeMcu/PCAmbilight/in/WSSTRIP/0/\";\n        break;\n    case 97:\n        msg.topic = \"NodeMcu/RPILeds/in/WSSTRIP/0/\";\n        break;\n    \n} \nflow.set(\"CurrLedTopic\",msg.topic);\n//msg.topic += \"FILL\";\nmsg.payload =\"255,255,255\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":960,"y":440,"wires":[["665d91ff.3a69c","2865909.087147","3bd2a91e.be6996"]]},{"id":"efb462ab.601b6","type":"function","z":"75f22ec1.216f","name":"CurrLedEncoder","func":"msg.currLed = flow.get(\"CurrLed\");\nmsg.mode =  flow.get(\"CurrLedMode\" + msg.currLed)||\"FILL\";\nvar Nombre = \"CurrLed\" + msg.mode + \"Encoder\" +  msg.currLed + msg.NroEncoder;\nflow.set(Nombre,msg.payload);\nmsg.topic =\"\";\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":560,"wires":[["e1797793.8d47b8"]]},{"id":"e1797793.8d47b8","type":"function","z":"75f22ec1.216f","name":"Parametros","func":"if (msg.currLed == null) msg.currLed = flow.get(\"CurrLed\");\nvar CurrLed = msg.currLed; //flow.get(\"CurrLed\");\nvar Mode = flow.get(\"CurrLedMode\" + CurrLed);\nvar NombrePote = \"CurrLed\" + Mode + \"Encoder\" +  CurrLed;\nvar OnOff = flow.get(\"CurrLedOnOff\" + CurrLed);\nvar Pote1 = flow.get(NombrePote + \"0\")||global.get(\"Pote1\");\nvar Pote2 = flow.get(NombrePote + \"1\")||global.get(\"Pote2\");\nif (msg.topic == null || !msg.topic.includes(\"WSSTRIP\")) msg.topic = flow.get(\"CurrLedTopic\");\nmsg.onOff = OnOff;\nif (OnOff === true)\n{\n    msg.mode = Mode;\n    msg.hue = 0;\n    msg.sat = 100;\n    msg.light = 100;\n    msg.EncLoop0 = 0;\n    msg.EncLoop1 = 0;\n    \n    switch(msg.mode)\n    {\n        case \"FADETO\":\n        case \"FILL\":\n            msg.EncMode1 = \"light\";\n            msg.EncMode0 = \"hue\";\n            msg.mode = \"FADETO\"\n            break;   \n        case \"FULL\":\n            msg.EncMode0 = \"light\";\n            msg.EncMode1 = \"None\";\n            msg.mode = \"FADETO\"\n            msg.sat = 0;\n            break;   \n        case \"SINELON\":\n        case \"STROBE\":\n            msg.EncMode1 = \"bpm\";\n            msg.EncMode0 = \"hue\";\n            break;   \n        case \"RAINBOW\":\n            msg.EncMode0 = \"hue\";\n            msg.EncMode1 = \"spread\";\n            break;   \n         case \"JUGGLE\":\n            msg.EncMode1 = \"bpm\";\n       //     msg.EncMode0 = \"hue\";\n            break;   \n         case \"HUESPIN\":\n            msg.EncMode0 = \"bpm\";\n            break;   \n         case \"CONFETTI\":\n            msg.EncMode1 = \"bpm\";\n            msg.EncMode0 = \"spread\";\n            break;   \n        case \"RAINBOWSPIN\":\n            msg.EncMode0 = \"bpm\";\n            msg.EncMode1 = \"spread\";\n            break;   \n    }\n}\nelse\n{\n    //apagado\n  //  msg.topic += \"FILL\";\n    msg.payload =\"0,0,0\";\n    msg.light = 0;\n    msg.sat = 0;\n    msg.hue = 0;\n    msg.mode = \"FADETO\";\n}\n\n\nvar SetMsg = function(EncMode, value) {\n    var Value = Number(value);\n    switch (EncMode)\n    {\n        case \"hue\":\n            msg.hue = Value;\n            break;\n        case \"spread\":\n            msg.spread = Value;\n            break;\n        case \"bpm\":\n            msg.bpm = Value;\n            break;\n        case \"light\":\n            msg.light = Value;\n            break;\n    }\n    return msg\n}\nflow.set(\"EncMode0\",msg.EncMode0);\nflow.set(\"EncMode1\",msg.EncMode1);\nSetMsg(msg.EncMode0,Pote1);\nif (msg.EncMode0 == \"hue\") msg.EncLoop0 = 1;\nSetMsg(msg.EncMode1,Pote2);\nif (msg.EncMode1 == \"hue\") msg.EncLoop1 = 1;\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":540,"wires":[["bb7bea64.efa3f8","49702e85.9de17"]]},{"id":"bb7bea64.efa3f8","type":"range","z":"75f22ec1.216f","minin":"0","maxin":"1024","minout":"0","maxout":"360","action":"scale","round":false,"property":"hue","name":"hue","x":1290,"y":560,"wires":[["7edb8af9.e7f954"]]},{"id":"7edb8af9.e7f954","type":"range","z":"75f22ec1.216f","minin":"0","maxin":"1024","minout":"0","maxout":"100","action":"scale","round":true,"property":"light","name":"light","x":1410,"y":560,"wires":[["51d67c92.f0d4f4"]]},{"id":"d412b5c2.cad878","type":"function","z":"75f22ec1.216f","name":"HSV","func":"msg.payload  = [msg.hue,msg.sat,msg.light];\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":640,"wires":[["49f9f64a.063358"]]},{"id":"49f9f64a.063358","type":"color-convert","z":"75f22ec1.216f","input":"hsv","output":"rgb","outputType":"string","scaleInput":true,"x":1430,"y":640,"wires":[["5543b52d.1dea4c","f7028ca.c30fd7"]]},{"id":"5543b52d.1dea4c","type":"function","z":"75f22ec1.216f","name":"","func":"msg.payload = msg.payload.replace(\"rgb(\",'');\nmsg.payload = msg.payload.replace(')','');\nmsg.color = msg.payload;\nmsg.topic += msg.mode;\n\nswitch(msg.mode)\n{\n  case \"CONFETTI\":\n  case \"JUGGLE\":\n        msg.payload = msg.spread + \",\" + msg.bpm;\n        break;   \n  case \"SINELON\":\n  case \"STROBE\":\n      msg.payload += \",\" + msg.bpm;\n        break;   \n  case \"RAINBOW\":\n        msg.payload = msg.hue + \",\" + msg.spread;\n        break;  \n  case \"RAINBOWSPIN\":\n        msg.payload = msg.bpm + \",\" + msg.spread;\n        break;   \n  case \"HUESPIN\":\n        msg.payload = msg.bpm;\n        break;   \n  case \"FADETO\":\n        msg.payload += \",8\";\n        break;   \n}\nreturn msg;","outputs":1,"noerr":0,"x":1570,"y":580,"wires":[["50225624.29c5c8"]]},{"id":"f4b1e03.cb3782","type":"trigger","z":"75f22ec1.216f","name":"","op1":"","op2":"0,0,0","op1type":"pay","op2type":"str","duration":"300","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":1520,"y":440,"wires":[["8362404c.1d174"]]},{"id":"c864c27e.37a43","type":"delay","z":"75f22ec1.216f","name":"","pauseType":"delay","timeout":"600","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1310,"y":480,"wires":[["e1797793.8d47b8"]]},{"id":"51d67c92.f0d4f4","type":"range","z":"75f22ec1.216f","minin":"0","maxin":"1024","minout":"30","maxout":"100","action":"scale","round":true,"property":"bpm","name":"bpm","x":1290,"y":600,"wires":[["57871013.eb375"]]},{"id":"e9afa09b.d2877","type":"influxdb out","z":"235e5af0.561006","influxdb":"e5a1cfdf.94ab5","name":"","measurement":"SensoresMovimiento","precision":"s","retentionPolicy":"","x":1650,"y":320,"wires":[]},{"id":"773f1d0e.3a55d4","type":"delay","z":"235e5af0.561006","name":"","pauseType":"timed","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"10","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1280,"y":320,"wires":[["e9afa09b.d2877"]]},{"id":"ab30dfc8.c962","type":"bigtimer","z":"2bcc0ccb.cd26a4","outtopic":"","outpayload1":"","outpayload2":"","name":"Big Timer","comment":"","lat":"-34","lon":"-58","starttime":5001,"endtime":"5003","starttime2":0,"endtime2":0,"startoff":0,"endoff":0,"startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":120,"y":320,"wires":[[],[],[]]},{"id":"77f9b0ca.15fa","type":"ui_chart","z":"235e5af0.561006","name":"Entrada","group":"b32fa3e9.f2b7f","order":3,"width":0,"height":0,"label":"Entrada","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"0","ymax":"1","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1260,"y":140,"wires":[[]]},{"id":"cfa6340c.433a18","type":"ui_chart","z":"235e5af0.561006","name":"Vestidor","group":"b32fa3e9.f2b7f","order":6,"width":0,"height":0,"label":"Vestidor","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"0","ymax":"1","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1260,"y":200,"wires":[[]]},{"id":"90be3e1.bcbe5c","type":"ui_led","z":"235e5af0.561006","order":13,"group":"b32fa3e9.f2b7f","width":"","height":"","label":"Patio Arriba","colorForValue":[{"color":"grey","value":"0","valueType":"num"},{"color":"red","value":"1","valueType":"num"}],"name":"Patio Arriba","x":1050,"y":360,"wires":[]},{"id":"babfd7c.d410228","type":"ui_led","z":"235e5af0.561006","order":17,"group":"b32fa3e9.f2b7f","width":"","height":"","label":"Balcon PA Pieza Nuestra","colorForValue":[{"color":"grey","value":"0","valueType":"num"},{"color":"red","value":"1","valueType":"num"}],"name":"Balcon PA Pieza Nuestra","x":1110,"y":420,"wires":[]},{"id":"a1c6741d.1aaf08","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"20","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":870,"y":480,"wires":[["5239eab0.46b654","3572364f.e572ca","4165143e.08838c"]]},{"id":"5239eab0.46b654","type":"ui_led","z":"235e5af0.561006","order":10,"group":"b32fa3e9.f2b7f","width":"","height":"","label":"Balcon PA Pieza Nenes","colorForValue":[{"color":"grey","value":"0","valueType":"num"},{"color":"red","value":"1","valueType":"num"}],"name":"Balcon PA Pieza Nenes","x":1090,"y":480,"wires":[]},{"id":"8fea8ef8.9ae8b","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"20","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":890,"y":540,"wires":[["493adb3.7cbaa24","c8502bba.fce988"]]},{"id":"493adb3.7cbaa24","type":"ui_led","z":"235e5af0.561006","order":18,"group":"b32fa3e9.f2b7f","width":"","height":"","label":"Ventana Comedor","colorForValue":[{"color":"grey","value":"0","valueType":"num"},{"color":"red","value":"1","valueType":"num"}],"name":"Ventana Comedor","x":1150,"y":540,"wires":[]},{"id":"8ef2b4c3.eba3f8","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"20","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":890,"y":420,"wires":[["babfd7c.d410228","3ad14c82.5077d4"]]},{"id":"5882b20c.270a7c","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"20","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":870,"y":360,"wires":[["90be3e1.bcbe5c","282e013b.ffecce","ce65f162.8c35c"]]},{"id":"875113b9.1007f","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"20","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":870,"y":240,"wires":[["8f6a9ccd.2311f","cfa6340c.433a18","eeecbde7.9c834"]]},{"id":"6e7c6369.e563cc","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"20","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":870,"y":180,"wires":[["9b693f6f.31219","77f9b0ca.15fa","90a3c90a.f28b58"]]},{"id":"eae60e68.55c21","type":"trigger","z":"235e5af0.561006","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"20","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":870,"y":300,"wires":[["8439a120.efd7a","523ad42b.81a09c","91a43edc.1c95c"]]},{"id":"523ad42b.81a09c","type":"ui_chart","z":"235e5af0.561006","name":"Patio","group":"b32fa3e9.f2b7f","order":9,"width":0,"height":0,"label":"Patio","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"0","ymax":"1","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1230,"y":260,"wires":[[]]},{"id":"282e013b.ffecce","type":"ui_chart","z":"235e5af0.561006","name":"Patio Arriba","group":"b32fa3e9.f2b7f","order":15,"width":0,"height":0,"label":"Patio Arriba","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"0","ymax":"1","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1270,"y":360,"wires":[[]]},{"id":"3ad14c82.5077d4","type":"ui_chart","z":"235e5af0.561006","name":"Balcon PA Pieza Nuestra","group":"b32fa3e9.f2b7f","order":16,"width":0,"height":0,"label":"Balcon PA Pieza Nuestra","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"0","ymax":"1","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1330,"y":440,"wires":[[]]},{"id":"3572364f.e572ca","type":"ui_chart","z":"235e5af0.561006","name":"Balcon PA Pieza Nenes","group":"b32fa3e9.f2b7f","order":12,"width":0,"height":0,"label":"Balcon PA Pieza Nenes","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"0","ymax":"1","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1350,"y":500,"wires":[[]]},{"id":"c8502bba.fce988","type":"ui_chart","z":"235e5af0.561006","name":"Ventana Comedor","group":"b32fa3e9.f2b7f","order":19,"width":0,"height":0,"label":"Ventana Comedor","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"0","ymax":"1","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1370,"y":580,"wires":[[]]},{"id":"b9b0b21e.67f6f","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living LasSeen","topic":"OpenWrt/Ping/192.168.2.188/lastseen/epoch","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":110,"y":760,"wires":[["6f83706c.5cbff"]]},{"id":"6f83706c.5cbff","type":"trigger","z":"9bee6473.dc8598","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"5","extend":true,"units":"s","reset":"false","bytopic":"all","outputs":1,"x":300,"y":800,"wires":[["a36228ea.ffa108"]]},{"id":"a36228ea.ffa108","type":"change","z":"9bee6473.dc8598","name":"TVLivingPrendida","rules":[{"t":"set","p":"TVLivingPrendida","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":760,"wires":[["1e47eda6.2f5f02","e139894e.a3a858"]]},{"id":"1e47eda6.2f5f02","type":"ui_switch","z":"9bee6473.dc8598","name":"","label":"TV Living","tooltip":"","group":"6d3da8b1.90ed78","order":7,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":700,"y":740,"wires":[["9928c7b1.7cddb8"]]},{"id":"e139894e.a3a858","type":"ui_switch","z":"9bee6473.dc8598","name":"","label":"TV Living","tooltip":"","group":"20a076b7.fe135a","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":700,"y":800,"wires":[["9928c7b1.7cddb8"]]},{"id":"9252059.c8547f8","type":"switch","z":"9bee6473.dc8598","name":"Prendida?","property":"TVLivingPrendida","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1070,"y":720,"wires":[["ac636a16.410028"]],"outputLabels":["Prendida"]},{"id":"9928c7b1.7cddb8","type":"switch","z":"9bee6473.dc8598","name":"Apagar?","property":"payload","propertyType":"msg","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":880,"y":760,"wires":[["9252059.c8547f8"],["31eb6eb4.73e6d2"]],"outputLabels":["Apagar","Prender"]},{"id":"31eb6eb4.73e6d2","type":"wake on lan","z":"9bee6473.dc8598","mac":"28:35:45:93:bd:ea","host":"","udpport":"9","name":"","x":1130,"y":800,"wires":[]},{"id":"7b150618.afecc8","type":"mqtt in","z":"7ad2ef9d.dd79e","name":"","topic":"Arduino/+/out/Sensores/Ir","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":340,"y":200,"wires":[["b5dffc8d.7db07","7cda19f4.ebcd78"]]},{"id":"7cda19f4.ebcd78","type":"debug","z":"7ad2ef9d.dd79e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":990,"y":220,"wires":[]},{"id":"1a12a50e.225a8b","type":"switch","z":"7ad2ef9d.dd79e","name":"Control Muteki","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"49424","vt":"str"},{"t":"eq","v":"475408","vt":"str"},{"t":"eq","v":"1006","vt":"str"},{"t":"eq","v":"1036","vt":"str"},{"t":"eq","v":"17420","vt":"str"},{"t":"eq","v":"639248","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":620,"y":380,"wires":[["4735c757.d4e238"],["3071865d.65728a"],[],["c5995599.14e858"],["12848232.f8f20e"],["55e3c81.0475d38"]],"outputLabels":["Rew","Cat Left","Theater","ch up","ch down","Pause"]},{"id":"b5dffc8d.7db07","type":"delay","z":"7ad2ef9d.dd79e","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"0.5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":450,"y":300,"wires":[["1a12a50e.225a8b"]]},{"id":"4735c757.d4e238","type":"function","z":"7ad2ef9d.dd79e","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":380,"wires":[["6a34a0ac.11a2f"]]},{"id":"6a34a0ac.11a2f","type":"mqtt out","z":"7ad2ef9d.dd79e","name":"Luz Comedor (26)","topic":"Arduino/PBTablero/in/Relay/26","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1090,"y":420,"wires":[],"inputLabels":["kkl"]},{"id":"740fdbfd.f75e44","type":"mqtt out","z":"7ad2ef9d.dd79e","name":"Luz Living (48)","topic":"Arduino/PBTablero/in/Relay/48","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1040,"y":680,"wires":[],"inputLabels":["kkl"]},{"id":"3071865d.65728a","type":"function","z":"7ad2ef9d.dd79e","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":520,"wires":[["740fdbfd.f75e44"]]},{"id":"4d5c46a7.467778","type":"mqtt out","z":"7ad2ef9d.dd79e","name":"Toma SubWoofer (26)","topic":"Arduino/PBLiving/in/Relay/26","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":860,"y":760,"wires":[],"inputLabels":["kkl"]},{"id":"55e3c81.0475d38","type":"function","z":"7ad2ef9d.dd79e","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":600,"wires":[["4d5c46a7.467778"]]},{"id":"12848232.f8f20e","type":"link out","z":"7ad2ef9d.dd79e","name":"","links":["24810692.44e16a"],"x":580,"y":720,"wires":[]},{"id":"c5995599.14e858","type":"link out","z":"7ad2ef9d.dd79e","name":"","links":["4ed881e6.4c7a2"],"x":455,"y":620,"wires":[]},{"id":"20792344.3f7e0c","type":"ui_button","z":"9bee6473.dc8598","name":"","group":"20a076b7.fe135a","order":3,"width":"3","height":"1","passthru":false,"label":"Power ON","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-down","payload":"18,15,35,15,17,15,18,15,18,15,18,15,18,15,18,32,35,15,18,15,18,31,18","payloadType":"str","topic":"","x":890,"y":880,"wires":[["31eb6eb4.73e6d2"]]},{"id":"ac636a16.410028","type":"change","z":"9bee6473.dc8598","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"90,89,11,11,11,33,11,33,11,33,11,10,11,11,11,10,11,10,11,10,11,33,11,33,11,33,11,10,11,10,11,10,11,11,11,10,11,11,11,33,10,33,11,10,11,10,11,10,11,10,11,33,11,33,11,11,11,10,11,33,11,33,11,33,11,33,11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1260,"y":720,"wires":[["ed3caea1.14085"]]},{"id":"b98dacd6.73d4d","type":"switch","z":"9bee6473.dc8598","name":"Apagada?","property":"TVLivingPrendida","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":290,"y":700,"wires":[["71a7b234.90a0ac"]],"outputLabels":["Apagada"]},{"id":"a2dbc598.856968","type":"ui_level","z":"57b26073.47916","group":"b89f1435.0c4bf8","order":3,"width":0,"height":0,"name":"Ram Living","label":"Living RAM","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"10000","segWarn":"5600","segHigh":"7000","unit":"Bytes","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":1530,"y":120,"wires":[]},{"id":"ec9998a3.43ee18","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/PBLiving/out/FreeRam","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1150,"y":120,"wires":[["e45ac6ea.1255b8"]]},{"id":"e45ac6ea.1255b8","type":"function","z":"57b26073.47916","name":"Invertir","func":"msg.payload = Math.round(8096 - msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":120,"wires":[["a2dbc598.856968"]]},{"id":"da2ae2ac.c74c5","type":"ui_level","z":"57b26073.47916","group":"b89f1435.0c4bf8","order":11,"width":0,"height":0,"name":"Ram","label":"Tablero RAM","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"8096","segWarn":"5600","segHigh":"7000","unit":"Bytes","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":1510,"y":160,"wires":[]},{"id":"89c383bd.54c4b","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/PBTablero/out/FreeRam","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1150,"y":160,"wires":[["1e6e769b.f00e39"]]},{"id":"1e6e769b.f00e39","type":"function","z":"57b26073.47916","name":"Invertir","func":"msg.payload = Math.round(8096 - msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":160,"wires":[["da2ae2ac.c74c5"]]},{"id":"1d846740.a92609","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"7ad1e0a0.b2f66","order":2,"width":"3","height":"1","passthru":true,"label":"TELE","tooltip":"","color":"","bgcolor":"","icon":"","payload":"49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311,49,10,25,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,13,10,13,10,13,10,25,10,13,10,13,10,13,10,25,10,13,10,25,10,13,11,12,311","payloadType":"str","topic":"","x":450,"y":40,"wires":[["6fee71ed.0ff1"]]},{"id":"6fee71ed.0ff1","type":"change","z":"230ac56e.bc629a","name":"TELE","rules":[{"t":"set","p":"payload","pt":"msg","to":"48,11,12,11,24,11,24,11,12,11,24,11,12,10,13,11,12,11,12,11,12,11,12,11,24,11,12,11,12,11,12,11,24,11,12,11,24,11,12,10,13,299,48,11,12,11,24,11,24,11,12,11,24,11,12,10,13,11,12,11,12,11,12,11,12,11,24,11,12,11,12,11,12,11,24,11,12,11,24,11,12,10,13,299","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":80,"wires":[["e14546fc.fe30c8","6ffc208b.be4f8"]]},{"id":"fcb37e9f.1cf5a","type":"mqtt in","z":"930c94d9.38ece8","name":"Living Volts (A8)","topic":"Arduino/PBLiving/out/Sensores/Analog/Max/8","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":200,"y":160,"wires":[["8765ff6.a5792"]]},{"id":"8765ff6.a5792","type":"aggregator","z":"930c94d9.38ece8","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"aggregationType":"median","x":490,"y":140,"wires":[[]]},{"id":"a621d1.e6b56e3","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 1","topic":"Android/TvLiving/out/button/1","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":110,"y":1100,"wires":[["631a6258.e70a8c"]]},{"id":"631a6258.e70a8c","type":"function","z":"9bee6473.dc8598","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1100,"wires":[["b507d1fb.5df69"]]},{"id":"b8643582.7d1508","type":"mqtt out","z":"9bee6473.dc8598","name":"Luz Living (48)","topic":"Arduino/PBTablero/in/Relay/48","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1600,"y":1940,"wires":[],"inputLabels":["kkl"]},{"id":"aaee4de6.a54c9","type":"mqtt out","z":"9bee6473.dc8598","name":"Toma SubWoofer (26)","topic":"Arduino/PBLiving/in/Relay/26","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":500,"y":1500,"wires":[],"inputLabels":["kkl"]},{"id":"d4159be6.5b0648","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 2","topic":"Android/TvLiving/out/button/2","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":110,"y":1160,"wires":[["fb9f9d9b.f4b11"]]},{"id":"35701897.e27398","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 3","topic":"Android/TvLiving/out/button/3","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":110,"y":1220,"wires":[["ac41bed0.c124a"]]},{"id":"fb9f9d9b.f4b11","type":"function","z":"9bee6473.dc8598","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1160,"wires":[["cf2dab61.f057d8"]]},{"id":"ac41bed0.c124a","type":"function","z":"9bee6473.dc8598","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1220,"wires":[["87a321db.ae531"]]},{"id":"87a348ea.8babc8","type":"link in","z":"230ac56e.bc629a","name":"Muteki Tele","links":["eac8c914.6a0148"],"x":555,"y":20,"wires":[["6fee71ed.0ff1"]]},{"id":"10c536dc.ed24f9","type":"link out","z":"9bee6473.dc8598","name":"","links":["3cea545.81724ac"],"x":715,"y":500,"wires":[]},{"id":"eac8c914.6a0148","type":"link out","z":"9bee6473.dc8598","name":"","links":["87a348ea.8babc8"],"x":715,"y":540,"wires":[]},{"id":"f8a14883.c752e8","type":"mqtt in","z":"9bee6473.dc8598","name":"CurrentApp","topic":"Android/TvLiving/out/CurrentApp/#","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":110,"y":420,"wires":[["f805589a.44b608","103848db.7c2f77"]]},{"id":"406afe6d.15da3","type":"mqtt in","z":"9bee6473.dc8598","name":"VolumeDown","topic":"Android/TvLiving/out/volume/down","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":470,"y":900,"wires":[["da82011f.01a6e"]]},{"id":"ddb0ca5b.0123e8","type":"mqtt in","z":"9bee6473.dc8598","name":"VolumeUp","topic":"Android/TvLiving/out/volume/up","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":460,"y":960,"wires":[["2773c1d9.00231e"]]},{"id":"da82011f.01a6e","type":"link out","z":"9bee6473.dc8598","name":"","links":["5572a01.4dc876"],"x":635,"y":900,"wires":[]},{"id":"2773c1d9.00231e","type":"link out","z":"9bee6473.dc8598","name":"","links":["8db477cd.aac3e8"],"x":635,"y":960,"wires":[]},{"id":"8a314981.e48488","type":"change","z":"230ac56e.bc629a","name":"Volume Up","rules":[{"t":"set","p":"payload","pt":"msg","to":"49,10,13,10,25,10,13,10,13,11,24,10,13,10,13,10,13,10,13,11,12,10,13,11,25,11,24,10,13,10,13,442,49,10,13,10,25,10,13,10,13,11,24,10,13,10,13,10,13,10,13,11,12,10,13,11,25,11,24,10,13,10,13,442","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":600,"wires":[["e14546fc.fe30c8"]]},{"id":"a9c28ecf.eab8f","type":"change","z":"230ac56e.bc629a","name":"Volume Down","rules":[{"t":"set","p":"payload","pt":"msg","to":"49,10,25,10,25,10,13,10,13,10,25,10,13,10,13,10,13,10,12,10,13,10,13,10,25,10,25,10,13,10,13,430,49,10,25,10,25,10,13,10,13,10,25,10,13,10,13,10,13,10,12,10,13,10,13,10,25,10,25,10,13,10,13,430","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":660,"wires":[["e14546fc.fe30c8"]]},{"id":"8db477cd.aac3e8","type":"link in","z":"230ac56e.bc629a","name":"Volume Up","links":["744d68f5.52b7b8","2773c1d9.00231e"],"x":415,"y":600,"wires":[["8a314981.e48488"]]},{"id":"5572a01.4dc876","type":"link in","z":"230ac56e.bc629a","name":"Volume Down","links":["da82011f.01a6e"],"x":415,"y":680,"wires":[["a9c28ecf.eab8f"]]},{"id":"1240fe29.0786e2","type":"switch","z":"9bee6473.dc8598","name":"","property":"TVLivingCurrentApp","propertyType":"global","rules":[{"t":"eq","v":"Tv","vt":"str"},{"t":"eq","v":"Netflix","vt":"str"},{"t":"eq","v":"YouTube","vt":"str"},{"t":"eq","v":"Plex","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":5,"x":550,"y":520,"wires":[["10c536dc.ed24f9"],["eac8c914.6a0148"],["eac8c914.6a0148"],["eac8c914.6a0148"],["10c536dc.ed24f9"]]},{"id":"9498b8c3.c66448","type":"mqtt in","z":"9bee6473.dc8598","name":"Mute","topic":"Android/TvLiving/out/volume/mute","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":450,"y":1020,"wires":[["25714e8.454ecb2"]]},{"id":"25714e8.454ecb2","type":"link out","z":"9bee6473.dc8598","name":"","links":["7a8d5316.fd25ac"],"x":635,"y":1020,"wires":[]},{"id":"daeb0b1b.008378","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 7","topic":"Android/TvLiving/out/button/7","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":130,"y":1500,"wires":[["4ce2fc85.c90704"]]},{"id":"4ce2fc85.c90704","type":"function","z":"9bee6473.dc8598","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1500,"wires":[["aaee4de6.a54c9"]]},{"id":"219aa266.f0553e","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 0","topic":"Android/TvLiving/out/button/0","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":130,"y":1720,"wires":[["2c6a112c.8fd2ae"]]},{"id":"2c6a112c.8fd2ae","type":"link out","z":"9bee6473.dc8598","name":"","links":["d8ffd3b2.e534f"],"x":275,"y":1720,"wires":[]},{"id":"3be5da58.c5d4a6","type":"link out","z":"9bee6473.dc8598","name":"","links":["ad23c6a.6bda438"],"x":255,"y":960,"wires":[]},{"id":"e94cb371.a76dc","type":"mqtt out","z":"d4cc4a57.a7caa8","name":"","topic":"Arduino/PBTablero/in/RF433","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1120,"y":560,"wires":[],"inputLabels":["kkl"]},{"id":"90a692c0.1f9","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"73bc3aee.13bf44","order":9,"width":0,"height":0,"passthru":false,"label":"Prender","tooltip":"","color":"","bgcolor":"","icon":"","payload":"100000101100100011001000","payloadType":"str","topic":"","x":840,"y":640,"wires":[["8264b56d.0b3a68"]]},{"id":"8264b56d.0b3a68","type":"mqtt out","z":"d4cc4a57.a7caa8","name":"","topic":"Arduino/PBLiving/in/RF433","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1100,"y":642,"wires":[],"inputLabels":["kkl"]},{"id":"9f55c46f.c6d8b8","type":"switch","z":"235e5af0.561006","name":"Remoto 1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"3000001","vt":"str"},{"t":"eq","v":"3000002","vt":"str"},{"t":"eq","v":"3000003","vt":"str"},{"t":"eq","v":"3000010","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":580,"y":740,"wires":[["13249727.188d79"],["a3414e51.4f81c"],["93fbf702.da1998"],["eff538e0.ffbe98","ee42a323.d6201"]],"outputLabels":["A","B","C","D"]},{"id":"13249727.188d79","type":"function","z":"235e5af0.561006","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":760,"wires":[["b7c22d24.54a4b"]]},{"id":"b7c22d24.54a4b","type":"mqtt out","z":"235e5af0.561006","name":"Luz Escritorio (30)","topic":"Arduino/PBTablero/in/Relay/30","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1150,"y":760,"wires":[],"inputLabels":["kkl"]},{"id":"2409d46b.9c7d3c","type":"trigger","z":"235e5af0.561006","name":"","op1":"","op2":"","op1type":"pay","op2type":"nul","duration":"500","extend":true,"overrideDelay":false,"units":"ms","reset":"","bytopic":"topic","topic":"topic","outputs":1,"x":180,"y":420,"wires":[["8654a4a2.6ce7f8","7a876412.b73fec"]]},{"id":"49957b79.19c924","type":"switch","z":"235e5af0.561006","name":"Remoto 2","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"3000011","vt":"str"},{"t":"eq","v":"3000012","vt":"str"},{"t":"eq","v":"3000013","vt":"str"},{"t":"eq","v":"3000015","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":600,"y":860,"wires":[["13249727.188d79"],["16cf29a4.1648a6"],["19339ec5.32dd41"],["eff538e0.ffbe98","ee42a323.d6201"]],"outputLabels":["A","B","C","D"]},{"id":"bb0482fe.9bf8c","type":"mqtt out","z":"235e5af0.561006","name":"Luz Comedor (26)","topic":"Arduino/PBTablero/in/Relay/26","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1150,"y":820,"wires":[],"inputLabels":["kkl"]},{"id":"8cb76675.df4e78","type":"mqtt out","z":"235e5af0.561006","name":"Luz Living (48)","topic":"Arduino/PBTablero/in/Relay/48","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1140,"y":880,"wires":[],"inputLabels":["kkl"]},{"id":"cf8da29c.aee53","type":"function","z":"235e5af0.561006","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":820,"wires":[["bb0482fe.9bf8c"]]},{"id":"7c6d648f.70542c","type":"function","z":"235e5af0.561006","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":880,"wires":[["8cb76675.df4e78"]]},{"id":"eff538e0.ffbe98","type":"link out","z":"235e5af0.561006","name":"","links":["a905769a.3cb038"],"x":895,"y":920,"wires":[]},{"id":"b76b6203.dcece","type":"ui_button","z":"d4cc4a57.a7caa8","name":"","group":"73bc3aee.13bf44","order":9,"width":0,"height":0,"passthru":false,"label":"Apagar","tooltip":"","color":"","bgcolor":"","icon":"","payload":"100000101100100011001001","payloadType":"str","topic":"","x":840,"y":700,"wires":[["8264b56d.0b3a68"]]},{"id":"f32a2619.bc4298","type":"mqtt in","z":"254f6ab6.9adb86","name":"","topic":"RPI/BlueTooth","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":150,"y":120,"wires":[["7ea88ec0.cbd08"]]},{"id":"84ac9536.69a078","type":"mqtt out","z":"254f6ab6.9adb86","name":"Audio Patio (38)","topic":"Arduino/PBTablero/in/Relay/38","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1160,"y":200,"wires":[],"inputLabels":["kkl"]},{"id":"7ea88ec0.cbd08","type":"switch","z":"254f6ab6.9adb86","name":"Conecto?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Disconnected","vt":"str"},{"t":"eq","v":"Connected","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":320,"y":120,"wires":[["e4a0df9e.8b154"],["f2ea1215.b09","2234c3b8.11618c"]]},{"id":"88f0291.63bc6d8","type":"function","z":"57b26073.47916","name":"LastSeen","func":"msg.LastSeen = new Date();\nmsg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":800,"wires":[["b492275e.fcfe48","5c5e651a.a6069c"]]},{"id":"95e968b8.b2d2f8","type":"function","z":"57b26073.47916","name":"LastSeen","func":"msg.LastSeen = new Date();\nmsg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":920,"wires":[["de8340ab.decd","12a042ce.4bb26d"]]},{"id":"d23a3a74.2ed6d8","type":"ui_switch","z":"887b2e31.18293","name":"","label":"12V","tooltip":"","group":"93dce1d.02bb22","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/5","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1010,"y":980,"wires":[["8591f331.53aaf"]]},{"id":"70ceb7ed.bc3b58","type":"mqtt in","z":"75f22ec1.216f","name":"","topic":"Arduino/PBLiving/out/IP","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":180,"y":1000,"wires":[["2c12a849.8dd988","deb38ffe.37448"]]},{"id":"47b1c09f.4ea53","type":"mqtt out","z":"75f22ec1.216f","name":"","topic":"Arduino/PBLiving/in/Encoder/0/MIN","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":620,"y":940,"wires":[]},{"id":"2c12a849.8dd988","type":"change","z":"75f22ec1.216f","name":"Min","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":960,"wires":[["47b1c09f.4ea53","75a02353.38b54c"]]},{"id":"75a02353.38b54c","type":"mqtt out","z":"75f22ec1.216f","name":"","topic":"Arduino/PBLiving/in/Encoder/1/MIN","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":620,"y":980,"wires":[]},{"id":"deb38ffe.37448","type":"change","z":"75f22ec1.216f","name":"Max","rules":[{"t":"set","p":"payload","pt":"msg","to":"1024","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":1040,"wires":[["c73c48d3.9448d8","58644a84.7e9e64"]]},{"id":"c73c48d3.9448d8","type":"mqtt out","z":"75f22ec1.216f","name":"","topic":"Arduino/PBLiving/in/Encoder/0/MAX","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":630,"y":1020,"wires":[]},{"id":"58644a84.7e9e64","type":"mqtt out","z":"75f22ec1.216f","name":"","topic":"Arduino/PBLiving/in/Encoder/1/MAX","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":630,"y":1060,"wires":[]},{"id":"93e52afb.02aa18","type":"change","z":"611d2ba5.389f94","name":"","rules":[{"t":"set","p":"Pote2","pt":"global","to":"payload","tot":"msg"},{"t":"set","p":"NroEncoder","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":560,"wires":[[]]},{"id":"5c9fdad1.e0a4e4","type":"delay","z":"611d2ba5.389f94","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"5","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":490,"y":420,"wires":[["fba26c2c.32ce9","d4f546cd.ebdf88"]]},{"id":"99cf7cac.7f194","type":"delay","z":"611d2ba5.389f94","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"5","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":510,"y":540,"wires":[["93e52afb.02aa18","17267f05.d19c71"]]},{"id":"e82e1ba0.b22968","type":"mqtt in","z":"95877930.dde488","name":"Teclas Living Der 1 (49) (UTP Negro Naranja)","topic":"Arduino/PBLiving/out/Button/49/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":570,"y":260,"wires":[["c0e9d61d.5e9bd8"]]},{"id":"a53ca2b5.b8463","type":"mqtt in","z":"95877930.dde488","name":"Teclas Living Der 1 (47) (UTP Negro Naranja Claro)","topic":"Arduino/PBLiving/out/Button/47/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":510,"y":360,"wires":[["34824fdc.597ec"]]},{"id":"5205cc3e.dca144","type":"function","z":"95877930.dde488","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":260,"wires":[[]]},{"id":"aaa37ebb.8a33f","type":"function","z":"95877930.dde488","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":360,"wires":[[]]},{"id":"ee17a62d.74b9f8","type":"mqtt in","z":"95877930.dde488","name":"Teclas Living Der 1 (35) (UTP Negro Naranja Claro)","topic":"Arduino/PBLiving/out/Button/35/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":390,"y":440,"wires":[["1c9ab0b1.3ff9cf"]]},{"id":"1c9ab0b1.3ff9cf","type":"function","z":"95877930.dde488","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":440,"wires":[[]]},{"id":"c91d6c77.56e9e","type":"mqtt in","z":"95877930.dde488","name":"Potenciometro 1 (13)","topic":"Arduino/PBLiving/out/Encoder/0","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":520,"y":600,"wires":[["39ca5ec.232a4a2"]]},{"id":"23a11fed.29b29","type":"mqtt in","z":"95877930.dde488","name":"Potenciometro 2 (14)","topic":"Arduino/PBLiving/out/Encoder/1/value","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":700,"y":720,"wires":[["eb9edfbd.dc77f"]]},{"id":"34824fdc.597ec","type":"switch","z":"95877930.dde488","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":790,"y":360,"wires":[["aaa37ebb.8a33f"]]},{"id":"c0e9d61d.5e9bd8","type":"switch","z":"95877930.dde488","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":790,"y":200,"wires":[["5205cc3e.dca144"]]},{"id":"36e66b85.e42a14","type":"change","z":"95877930.dde488","name":"","rules":[{"t":"set","p":"Pote2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":720,"wires":[[]]},{"id":"39ca5ec.232a4a2","type":"delay","z":"95877930.dde488","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"24","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":840,"y":580,"wires":[["b1f41318.7071f"]]},{"id":"eb9edfbd.dc77f","type":"delay","z":"95877930.dde488","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"24","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":860,"y":780,"wires":[["36e66b85.e42a14"]]},{"id":"b1f41318.7071f","type":"switch","z":"95877930.dde488","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"+","vt":"str"},{"t":"eq","v":"-","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1030,"y":580,"wires":[["3fab11c4.3b9dae"],["3f63fc9d.7b9534"]]},{"id":"3fab11c4.3b9dae","type":"function","z":"95877930.dde488","name":"CurrLedOnOff","func":"val = global.get(\"Pote3\");\nglobal.set(\"Pote3\", val + 1);\nmsg.payload = val + 1;\nreturn msg;","outputs":1,"noerr":0,"x":1300,"y":620,"wires":[[]]},{"id":"3f63fc9d.7b9534","type":"function","z":"95877930.dde488","name":"CurrLedOnOff","func":"val = global.get(\"Pote3\");\nglobal.set(\"Pote3\", val - 1);\nmsg.payload = val - 1;\nreturn msg;","outputs":1,"noerr":0,"x":1300,"y":660,"wires":[[]]},{"id":"e3fb212b.04a93","type":"rpi-gpio out","z":"254f6ab6.9adb86","name":"20","pin":"38","set":true,"level":"0","freq":"","out":"out","x":1070,"y":580,"wires":[]},{"id":"a0fde477.db57f8","type":"rpi-gpio out","z":"254f6ab6.9adb86","name":"21","pin":"40","set":true,"level":"0","freq":"","out":"out","x":1070,"y":640,"wires":[]},{"id":"66089779.236368","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":1,"width":"3","height":"1","passthru":false,"label":"RaspBerry","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"num","topic":"","x":710,"y":340,"wires":[["bb8278c5.b6d8c8"]]},{"id":"efa3619a.6a1cb","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":2,"width":"3","height":"1","passthru":false,"label":"PC","tooltip":"","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"num","topic":"","x":310,"y":660,"wires":[["b1960c88.8eefe"]]},{"id":"8362404c.1d174","type":"mqtt out","z":"75f22ec1.216f","name":"Strip 1","topic":"","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1790,"y":480,"wires":[],"inputLabels":["kkl"]},{"id":"d4f546cd.ebdf88","type":"ui_slider","z":"611d2ba5.389f94","name":"","label":"slider","tooltip":"","group":"f687a4d9.3b1578","order":5,"width":0,"height":0,"passthru":false,"outs":"all","topic":"","min":0,"max":"1024","step":1,"x":670,"y":480,"wires":[["233d07c6.b7ac38","3e19ada3.3c4a02"]]},{"id":"17267f05.d19c71","type":"ui_slider","z":"611d2ba5.389f94","name":"","label":"slider","tooltip":"","group":"f687a4d9.3b1578","order":4,"width":0,"height":0,"passthru":false,"outs":"all","topic":"","min":0,"max":"1024","step":1,"x":630,"y":620,"wires":[["f997c93f.667d78","ac45c04c.03031"]]},{"id":"f997c93f.667d78","type":"mqtt out","z":"611d2ba5.389f94","name":"","topic":"Arduino/PBLiving/out/Encoder/1/value","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":870,"y":700,"wires":[]},{"id":"ac45c04c.03031","type":"mqtt out","z":"611d2ba5.389f94","name":"","topic":"Arduino/PBLiving/in/Encoder/1/VALUE","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":870,"y":740,"wires":[]},{"id":"3e19ada3.3c4a02","type":"mqtt out","z":"611d2ba5.389f94","name":"","topic":"Arduino/PBLiving/in/Encoder/0/VALUE","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1150,"y":540,"wires":[]},{"id":"233d07c6.b7ac38","type":"mqtt out","z":"611d2ba5.389f94","name":"","topic":"Arduino/PBLiving/out/Encoder/0/value","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1150,"y":500,"wires":[]},{"id":"d8ec2413.71b388","type":"mqtt in","z":"611d2ba5.389f94","name":"Encoder 1 (14)","topic":"Arduino/PBLiving/in/Encoder/1/VALUE","qos":"0","datatype":"auto","broker":"1ad27743.ce9fb9","x":320,"y":640,"wires":[["17267f05.d19c71"]]},{"id":"78c14307.8bd40c","type":"mqtt in","z":"611d2ba5.389f94","name":"Encoder 0 (13)","topic":"Arduino/PBLiving/in/Encoder/0/VALUE","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":300,"y":480,"wires":[["d4f546cd.ebdf88"]]},{"id":"f800c336.45fb8","type":"ui_dropdown","z":"75f22ec1.216f","name":"","label":"Current Led","tooltip":"","place":"Select option","group":"f687a4d9.3b1578","order":1,"width":0,"height":0,"passthru":false,"options":[{"label":"Teclas","value":"5","type":"str"},{"label":"Parlante Izq","value":"1","type":"str"},{"label":"Parlante Central","value":"2","type":"str"},{"label":"Parlante Derecho","value":"3","type":"str"},{"label":"Techo","value":"4","type":"str"},{"label":"Node Pieza 1","value":"10","type":"str"},{"label":"Node Pieza 2","value":"11","type":"str"},{"label":"Tablero","value":"6","type":"str"},{"label":"Todos","value":"99","type":"str"},{"label":"Ambilight","value":"98","type":"str"},{"label":"RPI","value":"97","type":"str"}],"payload":"","topic":"","x":550,"y":720,"wires":[["b4878cb0.93d7a"]]},{"id":"b4878cb0.93d7a","type":"function","z":"75f22ec1.216f","name":"Set CurrLed","func":"flow.set(\"CurrLed\",Number(msg.payload))\nmsg.currLed = Number(msg.payload);\nmsg.Blink = true;\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":720,"wires":[["aa7469b3.affdc8"]]},{"id":"2865909.087147","type":"function","z":"75f22ec1.216f","name":"Enc Value","func":"for (NroEncoder = 0; NroEncoder<2; NroEncoder++)\n{\n    msg.mode = flow.get(\"CurrLedMode\" + msg.currLed);\n    var NombrePote = \"CurrLed\" + msg.mode + \"Encoder\" +  msg.currLed;\n    msg.topic = \"Arduino/PBLiving/in/Encoder/\";\n    var EncValue = flow.get(NombrePote + NroEncoder)||global.get(\"Pote1\");\n    msg.topic = msg.topic + NroEncoder + \"/VALUE\"\n    msg.payload = EncValue\n    node.send(msg);    \n}\n","outputs":1,"noerr":0,"x":1420,"y":400,"wires":[["8362404c.1d174"]]},{"id":"fdde1b53.70f7a8","type":"ui_switch","z":"75f22ec1.216f","name":"","label":"Prendido","tooltip":"","group":"f687a4d9.3b1578","order":3,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":540,"y":800,"wires":[["581e00a7.d56dd"]]},{"id":"581e00a7.d56dd","type":"function","z":"75f22ec1.216f","name":"CurrLedOnOff","func":"var CurrLed = flow.get(\"CurrLed\");\nvar Nombre = \"CurrLedOnOff\" + CurrLed;\nflow.set(Nombre,msg.payload)\n//msg.onOff = msg.payload;\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":800,"wires":[["e1797793.8d47b8"]]},{"id":"e1689a8f.406708","type":"ui_dropdown","z":"75f22ec1.216f","name":"","label":"Current Mode","tooltip":"","place":"Select option","group":"f687a4d9.3b1578","order":2,"width":0,"height":0,"passthru":false,"options":[{"label":"FILL","value":"FILL","type":"str"},{"label":"","value":"RAINBOW","type":"str"},{"label":"","value":"SINELON","type":"str"},{"label":"","value":"FULL","type":"str"},{"label":"","value":"CONFETTI","type":"str"},{"label":"","value":"JUGGLE","type":"str"},{"label":"","value":"STROBE","type":"str"},{"label":"","value":"RAINBOWSPIN","type":"str"},{"label":"","value":"HUESWIPE","type":"str"}],"payload":"","topic":"","x":560,"y":760,"wires":[["77385e30.3ec13"]]},{"id":"77385e30.3ec13","type":"function","z":"75f22ec1.216f","name":"Set CurrMode","func":"msg.currLed = flow.get(\"CurrLed\");\nvar Nombre = \"CurrLedMode\" + msg.currLed;\nmsg.mode = msg.payload;\nflow.set(Nombre,msg.mode);\nreturn msg;\n","outputs":1,"noerr":0,"x":740,"y":760,"wires":[["aa7469b3.affdc8"]]},{"id":"253a00c4.be1f","type":"link in","z":"254f6ab6.9adb86","name":"Entrada PC","links":["b1960c88.8eefe"],"x":495,"y":660,"wires":[["9a03b8ea.1ab368","fb60839.afa9a8"]]},{"id":"f86aadcf.035b9","type":"link in","z":"254f6ab6.9adb86","name":"Entrada RPI","links":["bb8278c5.b6d8c8","f8a83356.4740f"],"x":495,"y":600,"wires":[["c3a6fe1.5c1b3","9db79f15.e8a6f"]]},{"id":"9a03b8ea.1ab368","type":"change","z":"254f6ab6.9adb86","name":"0","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":700,"wires":[["e3fb212b.04a93","a0fde477.db57f8","ef553b5b.2b7f68"]]},{"id":"c3a6fe1.5c1b3","type":"change","z":"254f6ab6.9adb86","name":"1","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":620,"wires":[["a0fde477.db57f8","e3fb212b.04a93","ef553b5b.2b7f68"]]},{"id":"b1960c88.8eefe","type":"link out","z":"254f6ab6.9adb86","name":"","links":["253a00c4.be1f"],"x":415,"y":660,"wires":[]},{"id":"bb8278c5.b6d8c8","type":"link out","z":"254f6ab6.9adb86","name":"","links":["f86aadcf.035b9"],"x":755,"y":220,"wires":[]},{"id":"f8a83356.4740f","type":"link out","z":"d0c77eb4.886e7","name":"","links":["f86aadcf.035b9"],"x":795,"y":380,"wires":[]},{"id":"ed873ba0.52a518","type":"mqtt out","z":"d0c77eb4.886e7","name":"Audio Patio (38)","topic":"Arduino/PBTablero/in/Relay/38","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":860,"y":300,"wires":[],"inputLabels":["kkl"]},{"id":"ef553b5b.2b7f68","type":"rpi-gpio out","z":"254f6ab6.9adb86","name":"16","pin":"36","set":true,"level":"1","freq":"","out":"out","x":1070,"y":700,"wires":[]},{"id":"fb60839.afa9a8","type":"change","z":"254f6ab6.9adb86","name":"AudioInput PC","rules":[{"t":"set","p":"AudioInput","pt":"flow","to":"PC","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":560,"wires":[["84ac9536.69a078"]]},{"id":"9db79f15.e8a6f","type":"change","z":"254f6ab6.9adb86","name":"AudioInput RPI","rules":[{"t":"set","p":"AudioInput","pt":"flow","to":"RPI","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":520,"wires":[["729bc9a1.f84d98"]]},{"id":"778ac368.022cbc","type":"switch","z":"254f6ab6.9adb86","name":"RPI? Apagar","property":"AudioInput","propertyType":"flow","rules":[{"t":"eq","v":"RPI","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":810,"y":80,"wires":[["84ac9536.69a078"]]},{"id":"57871013.eb375","type":"range","z":"75f22ec1.216f","minin":"0","maxin":"1024","minout":"0","maxout":"50","action":"scale","round":true,"property":"spread","name":"spread","x":1410,"y":600,"wires":[["d412b5c2.cad878"]]},{"id":"49702e85.9de17","type":"function","z":"75f22ec1.216f","name":"Enc Loop","func":"var NroEncoder = 0;\nmsg.topic = \"Arduino/PBLiving/in/Encoder/\";\nmsg.topic = msg.topic + NroEncoder + \"/LOOP\"\nmsg.payload = msg.EncLoop0\nnode.send(msg);\n\nNroEncoder = 1;\nmsg.topic = \"Arduino/PBLiving/in/Encoder/\";\nmsg.topic = msg.topic + NroEncoder + \"/LOOP\"\nmsg.payload = msg.EncLoop1\nnode.send(msg);\n","outputs":1,"noerr":0,"x":1460,"y":520,"wires":[["8362404c.1d174"]]},{"id":"9b70fc68.7aae3","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":3,"width":0,"height":0,"passthru":true,"label":"Curr Mode","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":470,"y":420,"wires":[["b96f3183.63427"]]},{"id":"f12c3ac9.7a4288","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":1,"width":0,"height":0,"passthru":true,"label":"Curr Led","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":480,"y":480,"wires":[["b4ead4ce.3b6be8"]]},{"id":"2c463fee.0bcca","type":"ui_colour_picker","z":"75f22ec1.216f","name":"","label":"","group":"f687a4d9.3b1578","format":"hsv","outformat":"object","showSwatch":true,"showPicker":false,"showValue":false,"showHue":true,"showAlpha":false,"showLightness":true,"square":"true","dynOutput":"false","order":6,"width":0,"height":0,"passthru":false,"topic":"","x":1310,"y":700,"wires":[["ea1f96fe.8f54c8"]]},{"id":"f7028ca.c30fd7","type":"function","z":"75f22ec1.216f","name":"RGB","func":"msg.payload = \"rgb(\" + msg.payload + \")\";\nreturn msg;","outputs":1,"noerr":0,"x":1570,"y":640,"wires":[["2c463fee.0bcca"]]},{"id":"ea1f96fe.8f54c8","type":"function","z":"75f22ec1.216f","name":"RGB","func":"var pl = msg.payload;\nfor (nro = 0 ; nro < 2 ; nro++)\n{\n    msg.hue2 = -99;\n    msg.light2 = -0.2;\n    if (flow.get(\"EncMode\" + nro) == \"hue\")\n    {\n        msg.tt = \"h\";\n        msg.NroEncoder = nro;\n        msg.hue2 = pl.h;\n        node.send(msg);\n    }\n    if (flow.get(\"EncMode\" + nro) == \"light\")\n    {\n        msg.tt = \"l\";\n        msg.NroEncoder = nro;\n        msg.light2 = pl.v;\n        node.send(msg);\n    }\n}\n\n","outputs":1,"noerr":0,"x":1450,"y":700,"wires":[["4c4e20dc.d469e"]]},{"id":"4c4e20dc.d469e","type":"range","z":"75f22ec1.216f","minin":"0","maxin":"358","minout":"0","maxout":"120","action":"scale","round":true,"property":"hue2","name":"hue","x":1310,"y":740,"wires":[["c0d2556a.189a68"]]},{"id":"c0d2556a.189a68","type":"range","z":"75f22ec1.216f","minin":"0","maxin":"1","minout":"0","maxout":"120","action":"scale","round":true,"property":"light2","name":"light","x":1450,"y":740,"wires":[["e509385b.986a18"]]},{"id":"e509385b.986a18","type":"function","z":"75f22ec1.216f","name":"RGB","func":"if (msg.hue2 >= 0) msg.payload = msg.hue2;\nif (msg.light2 >= 0) msg.payload = msg.light2;\nmsg.test = 1;\nmsg.test = null;\nreturn msg;","outputs":1,"noerr":0,"x":1370,"y":820,"wires":[["efb462ab.601b6"]]},{"id":"563f64e3.0f82dc","type":"function","z":"75f22ec1.216f","name":"Cambiar CurrLed TODOS","func":"var CurrLed = 99;\nflow.set(\"CurrLed\",CurrLed)\nmsg.currLed = CurrLed;\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":360,"wires":[["aa7469b3.affdc8"]]},{"id":"674a5e47.ef7a7","type":"ui_slider","z":"254f6ab6.9adb86","name":"","label":"Volumen","tooltip":"","group":"35f37aae.e9b246","order":13,"width":0,"height":0,"passthru":false,"outs":"all","topic":"LIVING/in/volume","min":0,"max":"100","step":1,"x":620,"y":960,"wires":[["a75ed155.98f35"]]},{"id":"d7bf09b8.5ef818","type":"mqtt out","z":"254f6ab6.9adb86","name":"","topic":"","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1220,"y":940,"wires":[],"inputLabels":["kkl"]},{"id":"c79f595.9a94ba8","type":"mqtt in","z":"254f6ab6.9adb86","name":"Comp Volume","topic":"LIVING/out/volume","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":160,"y":960,"wires":[["6e1f9113.6c611"]]},{"id":"af228dc5.3cbf","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":12,"width":"3","height":"1","passthru":false,"label":"Mute","tooltip":"","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"num","topic":"","x":720,"y":900,"wires":[["ad04a5de.b58ab8"]]},{"id":"d0ff8e4f.9f80d","type":"mqtt in","z":"254f6ab6.9adb86","name":"","topic":"RPI/out/volume","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":170,"y":1000,"wires":[["da3157ad.14b028"]]},{"id":"da3157ad.14b028","type":"switch","z":"254f6ab6.9adb86","name":"RPI","property":"AudioInput","propertyType":"flow","rules":[{"t":"eq","v":"RPI","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":340,"y":1000,"wires":[["80eb4483.72cd88"]]},{"id":"168a7cfe.a82503","type":"ui_slider","z":"d0c77eb4.886e7","name":"","label":"Volumen","tooltip":"","group":"5635ed61.b910e4","order":5,"width":0,"height":0,"passthru":false,"outs":"all","topic":"LIVING/in/volume","min":0,"max":"100","step":1,"x":320,"y":560,"wires":[["aa82e588.d6f338"]]},{"id":"22ff146a.f2a21c","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp Volume","topic":"ESCRITORIO/out/volume","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":110,"y":560,"wires":[["168a7cfe.a82503"]]},{"id":"aa82e588.d6f338","type":"mqtt out","z":"d0c77eb4.886e7","name":"","topic":"","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":480,"y":540,"wires":[],"inputLabels":["kkl"]},{"id":"233ee828.b83ff8","type":"ui_button","z":"d0c77eb4.886e7","name":"","group":"5635ed61.b910e4","order":4,"width":"3","height":"1","passthru":false,"label":"Mute","tooltip":"","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"num","topic":"ESCRITORIO/in/Mute","x":340,"y":500,"wires":[["aa82e588.d6f338"]]},{"id":"6e1f9113.6c611","type":"switch","z":"254f6ab6.9adb86","name":"PC","property":"AudioInput","propertyType":"flow","rules":[{"t":"eq","v":"PC","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":340,"y":960,"wires":[["674a5e47.ef7a7"]]},{"id":"a75ed155.98f35","type":"switch","z":"254f6ab6.9adb86","name":"RPI / PC","property":"AudioInput","propertyType":"flow","rules":[{"t":"eq","v":"PC","vt":"str"},{"t":"eq","v":"RPI","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":780,"y":960,"wires":[["daeb8c8f.81e92"],["797442f3.a10e1c"]]},{"id":"daeb8c8f.81e92","type":"change","z":"254f6ab6.9adb86","name":"PC","rules":[{"t":"set","p":"topic","pt":"msg","to":"LIVING/in/volume","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":960,"wires":[["d7bf09b8.5ef818"]]},{"id":"1a4097.7d08df6a","type":"change","z":"254f6ab6.9adb86","name":"RPI","rules":[{"t":"set","p":"topic","pt":"msg","to":"RPI/in/volume","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1000,"wires":[["d7bf09b8.5ef818"]]},{"id":"ad04a5de.b58ab8","type":"switch","z":"254f6ab6.9adb86","name":"RPI / PC","property":"AudioInput","propertyType":"flow","rules":[{"t":"eq","v":"PC","vt":"str"},{"t":"eq","v":"RPI","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":870,"y":900,"wires":[["c486dba.bbdca28"],["d9d330f1.657d3"]]},{"id":"c486dba.bbdca28","type":"change","z":"254f6ab6.9adb86","name":"PC","rules":[{"t":"set","p":"topic","pt":"msg","to":"LIVING/in/Mute","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":880,"wires":[["d7bf09b8.5ef818"]]},{"id":"d9d330f1.657d3","type":"change","z":"254f6ab6.9adb86","name":"RPI","rules":[{"t":"set","p":"topic","pt":"msg","to":"RPI/in/mute","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":920,"wires":[["d7bf09b8.5ef818"]]},{"id":"80eb4483.72cd88","type":"range","z":"254f6ab6.9adb86","minin":"65","maxin":"100","minout":"0","maxout":"100","action":"clamp","round":true,"property":"payload","name":"","x":480,"y":1020,"wires":[["674a5e47.ef7a7"]]},{"id":"797442f3.a10e1c","type":"range","z":"254f6ab6.9adb86","minin":"0","maxin":"100","minout":"65","maxout":"100","action":"clamp","round":true,"property":"payload","name":"","x":910,"y":1020,"wires":[["1a4097.7d08df6a"]]},{"id":"d90ca1be.aa2ca","type":"mqtt out","z":"254f6ab6.9adb86","name":"","topic":"RPI/in/volume","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":740,"y":140,"wires":[],"inputLabels":["kkl"]},{"id":"ed3caea1.14085","type":"mqtt out","z":"9bee6473.dc8598","name":"","topic":"Arduino/PBTablero/in/IR/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1510,"y":720,"wires":[]},{"id":"c9463021.a8f87","type":"ui_switch","z":"887b2e31.18293","name":"Living Adelante","label":"Living Adelante","tooltip":"","group":"6d3da8b1.90ed78","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/46","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1040,"y":780,"wires":[["8591f331.53aaf"]]},{"id":"e8d70996.265418","type":"ui_switch","z":"887b2e31.18293","name":"Living","label":"Living","tooltip":"","group":"6d3da8b1.90ed78","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/44","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1010,"y":700,"wires":[["8591f331.53aaf"]]},{"id":"e5b9b0f.2b9625","type":"ui_switch","z":"887b2e31.18293","name":"Comedor Centro","label":"Comedor Centro","tooltip":"","group":"8baa852c.3b6cc8","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/24","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1050,"y":1060,"wires":[["8591f331.53aaf"]]},{"id":"889bd440.0cc928","type":"mqtt out","z":"bb63d718.931208","name":"Luz Living Principal (44)","topic":"Arduino/PBTablero/in/Relay/44","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1270,"y":280,"wires":[],"inputLabels":["kkl"]},{"id":"50225624.29c5c8","type":"delay","z":"75f22ec1.216f","name":"","pauseType":"queue","timeout":"5","timeoutUnits":"seconds","rate":"24","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1730,"y":580,"wires":[["8362404c.1d174","3bd2a91e.be6996"]]},{"id":"b6ca793.0ceb988","type":"switch","z":"235e5af0.561006","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":650,"y":60,"wires":[["dbcfdb9c.cc17f8","875113b9.1007f"]]},{"id":"467cdc6b.580a24","type":"mqtt in","z":"235e5af0.561006","name":"Sensor Movimiento Vestidor (17)","topic":"Arduino/PBTablero/out/Button/17","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":430,"y":60,"wires":[["b6ca793.0ceb988"]]},{"id":"690ec881.6b6488","type":"function","z":"57b26073.47916","name":"WSLeds FPS","func":"msg.topic = msg.topic + \"WSSTRIP/FPS\";\nmsg.payload = 120;\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":400,"wires":[["c1566fcc.e4eaa"]]},{"id":"2f91069b.d0f17a","type":"mqtt in","z":"9bee6473.dc8598","name":"Teclas NodeMcu Pieza Nuestra","topic":"NodeMcu/PiezaNuestra/out/Button/16/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":150,"y":160,"wires":[["279fb7a.3818748","22e9676.8a7eb98"]]},{"id":"279fb7a.3818748","type":"switch","z":"9bee6473.dc8598","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":370,"y":160,"wires":[["904ba9a9.7982b8"],[]]},{"id":"46a26612.ea60a8","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/+/out/IP","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":230,"y":660,"wires":[["e360b60a.b071a8"]]},{"id":"e360b60a.b071a8","type":"function","z":"57b26073.47916","name":"Inicializar","func":"var topics = msg.topic.split(\"/\");\nif (topics[0].toUpperCase() == \"NODEMCU\")\n{\n    msg.ip = msg.topic;\n    msg.topic = \"NodeMcu/\" + topics[1] + \"/in/\";\n    msg.ArduinoName = \"NodeMcu/\" + topics[1];\n    msg.host = msg.payload;\n    global.set(msg.ArduinoName,msg.payload);\n    return msg;    \n}\n","outputs":1,"noerr":0,"x":420,"y":660,"wires":[["d739f16a.2cc3c","9c2a0d06.3f702","bfcfdbe9.f83478"]]},{"id":"d739f16a.2cc3c","type":"function","z":"57b26073.47916","name":"Milis","func":"msg.topic = msg.topic + \"Sensores/MILIS\";\nmsg.payload = 50;\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":620,"wires":[["e49c3dc2.2a193"]]},{"id":"9c2a0d06.3f702","type":"function","z":"57b26073.47916","name":"Noise Milis","func":"msg.topic = msg.topic + \"Relay/NOISEMILLIS\";\nmsg.payload = 30;\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":660,"wires":[["e49c3dc2.2a193"]]},{"id":"bfcfdbe9.f83478","type":"function","z":"57b26073.47916","name":"WSLeds FPS","func":"msg.topic = msg.topic + \"WSSTRIP/FPS\";\nmsg.payload = 120;\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":700,"wires":[["e49c3dc2.2a193"]]},{"id":"e49c3dc2.2a193","type":"mqtt out","z":"57b26073.47916","name":"","topic":"","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":850,"y":660,"wires":[]},{"id":"22e9676.8a7eb98","type":"trigger","z":"9bee6473.dc8598","name":"","op1":"","op2":"long","op1type":"nul","op2type":"str","duration":"2","extend":false,"units":"s","reset":"0","bytopic":"all","outputs":1,"x":380,"y":100,"wires":[[]]},{"id":"bb3e943a.d582b8","type":"ui_text","z":"57b26073.47916","group":"4672a874.eb0c98","order":2,"width":0,"height":0,"name":"Node Pieza","label":"LastSeen","format":"{{msg.LastSeen}}","layout":"row-spread","x":610,"y":960,"wires":[]},{"id":"d820f78a.1ba9c8","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/PiezaNenes/out/LastSeen","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":200,"y":980,"wires":[["b1fe0ba6.0eb548","9bd6f3d.c10651"]]},{"id":"b1fe0ba6.0eb548","type":"trigger","z":"57b26073.47916","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"7","extend":true,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":460,"y":1000,"wires":[["26264ea0.cae692"]]},{"id":"26264ea0.cae692","type":"ui_led","z":"57b26073.47916","order":1,"group":"4672a874.eb0c98","width":0,"height":0,"label":"Node Pieza Ok","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"Node Pieza OK","x":620,"y":1000,"wires":[]},{"id":"9bd6f3d.c10651","type":"function","z":"57b26073.47916","name":"LastSeen","func":"msg.LastSeen = new Date();\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":960,"wires":[["bb3e943a.d582b8"]]},{"id":"f21e4434.e3aef8","type":"ui_button","z":"57b26073.47916","name":"","group":"4672a874.eb0c98","order":4,"width":0,"height":0,"passthru":false,"label":"Reboot Node Pieza","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"NodeMcu/PiezaNuestra/in/RESET","x":1350,"y":400,"wires":[["aaed4da3.1d519"]]},{"id":"aaed4da3.1d519","type":"mqtt out","z":"57b26073.47916","name":"","topic":"","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1610,"y":360,"wires":[]},{"id":"86d78556.63ede8","type":"ui_button","z":"295f893a.42f726","name":"","group":"9baecddc.3dece","order":2,"width":"3","height":"1","passthru":false,"label":"Direct","tooltip":"","color":"","bgcolor":"","icon":"fa-rss","payload":"89,89,12,31,11,11,12,31,11,31,12,11,11,11,12,31,11,12,12,11,11,31,12,11,11,11,12,31,11,31,12,11,11,31,12,11,11,12,12,11,11,11,12,31,11,31,12,31,12,31,12,31,12,31,12,31,12,31,12,11,12,11,12,11,12,11,12,31,12,31,12,31,12,11,12,11,12,11,12,11,12,11,12,11,12,11,12,11,11,32,12,31,12,31,12,31,12,31,12","payloadType":"str","topic":"","x":930,"y":780,"wires":[["8154ad80.e9747"]]},{"id":"73a0fa3b.741ba4","type":"change","z":"295f893a.42f726","name":"Apagar AAC","rules":[{"t":"set","p":"payload","pt":"msg","to":"90,88,12,31,12,11,12,31,12,31,12,11,11,11,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,11,12,31,12,11,11,31,12,31,11,31,12,31,11,11,12,31,12,31,12,31,12,11,12,11,12,11,12,11,11,31,12,11,11,11,12,31,11,31,12,31,12,11,12,11,12,11,12,11,11,11,12,11,11,11,12,11,11,31,12,31,11,31,12,31,12,31,12,89,90,89,11,31,12,11,11,31,12,31,11,11,12,11,11,31,12,11,11,11,12,31,11,11,12,11,11,31,12,31,11,11,12,31,11,11,12,31,12,31,12,31,12,31,12,11,12,31,12,31,12,31,12,11,12,11,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,31,12,11,12,11,12,11,12,11,12,11,12,11,12,11,12,11,12,31,12,31,12,31,12,31,12,31,12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":840,"wires":[["8154ad80.e9747"]]},{"id":"e1288df.e7d9f7","type":"ui_slider","z":"295f893a.42f726","name":"","label":"Ventilador","tooltip":"","group":"9baecddc.3dece","order":5,"width":"4","height":"1","passthru":true,"outs":"end","topic":"","min":"1","max":"3","step":1,"x":500,"y":1040,"wires":[["5121bdbd.8d48a4"]]},{"id":"39ba01ae.d74a0e","type":"ui_switch","z":"295f893a.42f726","name":"","label":"Frio","tooltip":"","group":"9baecddc.3dece","order":4,"width":"2","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":510,"y":960,"wires":[["890cc36e.6095f"]]},{"id":"6420c64.cefb838","type":"ui_switch","z":"295f893a.42f726","name":"","label":"Prendido","tooltip":"","group":"9baecddc.3dece","order":3,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":500,"y":900,"wires":[["63173c28.5500c4"]]},{"id":"890cc36e.6095f","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACPiezaFrio","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":960,"wires":[["21eab5f4.6d638a"]]},{"id":"5121bdbd.8d48a4","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACPiezaVentilador","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":1040,"wires":[["21eab5f4.6d638a"]]},{"id":"21eab5f4.6d638a","type":"function","z":"295f893a.42f726","name":"","func":"if (global.get(\"AACPiezaPrendido\") === false) {\n    return; \n}\nvar Frio = global.get(\"AACPiezaFrio\");\n\n//msg.payload = global.AACLivingVentilador.Value;\nswitch(global.get(\"AACPiezaVentilador\")) {\n  case 1:\n      if (Frio === true)\n      {msg.payload = \"90,88,12,31,12,11,12,31,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,11,12,31,12,31,12,11,12,11,12,31,11,31,12,31,11,31,12,31,11,12,12,31,11,32,12,11,12,11,12,11,11,12,12,11,11,11,12,31,11,11,12,11,11,11,12,11,12,11,12,11,12,31,12,11,12,31,12,31,11,31,12,31,11,31,12,31,12,88,90,88,12,31,11,11,12,31,11,31,12,11,11,11,12,31,11,11,12,11,11,31,12,11,11,11,12,31,11,31,12,11,11,31,12,31,12,11,12,11,11,31,12,31,12,31,12,31,12,31,12,11,12,31,12,31,12,11,12,11,12,11,12,11,12,11,12,11,12,31,12,11,12,11,12,11,11,12,12,11,11,11,12,31,11,11,12,31,11,31,12,31,12,31,12,31,12,31,12\";}\n      else\n      {msg.payload = \"89,89,12,31,12,11,12,31,12,31,12,11,12,12,12,31,12,11,12,11,11,31,12,11,11,11,12,31,12,31,12,11,11,32,12,31,12,11,12,11,12,31,12,31,12,31,12,31,12,31,11,11,12,31,11,31,12,11,11,11,12,11,12,11,12,11,12,31,12,31,12,31,12,11,11,11,12,31,11,11,12,11,12,11,12,11,12,11,12,31,12,31,12,11,12,31,12,31,11,89,90,88,12,31,12,11,12,31,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,11,12,31,12,31,12,11,12,11,12,31,12,31,11,31,12,31,11,31,12,11,11,31,12,31,12,11,12,11,11,11,12,11,11,11,12,31,11,31,12,31,12,11,12,11,11,31,12,11,11,11,12,11,11,11,12,11,11,31,12,31,11,11,12,31,11,31,12\";}\n    break;\n  case 2:\n      if (Frio === true)\n      {msg.payload = \"90,89,12,31,12,11,12,31,12,31,11,11,12,11,12,31,12,11,12,11,12,31,11,11,12,11,12,31,12,31,11,11,12,31,11,11,12,31,11,11,12,31,11,31,12,31,12,31,12,31,12,31,12,11,12,31,12,11,12,11,12,11,12,11,12,11,12,11,12,31,12,11,12,11,12,11,12,11,11,11,12,11,12,31,12,11,12,31,12,31,11,31,12,31,12,31,12,31,12,89,90,88,12,31,12,11,12,31,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,11,12,31,12,11,12,31,12,11,12,31,12,31,12,31,12,31,12,31,12,31,12,11,12,31,12,11,12,11,12,11,12,11,12,11,12,11,12,31,12,11,12,11,12,11,12,11,12,11,12,11,12,31,12,11,12,31,12,31,12,31,12,31,12,31,12,31,12\";}\n      else\n      {msg.payload = \"90,88,12,30,12,11,12,30,12,31,12,11,12,11,12,30,12,11,12,10,12,31,12,11,12,11,12,30,12,31,12,11,12,31,12,11,13,31,12,11,12,31,12,31,12,30,11,32,13,30,12,31,13,10,12,31,12,10,12,11,12,10,12,11,12,10,11,32,13,30,12,31,12,10,12,11,12,30,13,11,13,10,11,12,13,10,11,12,13,30,11,32,12,10,11,32,13,30,12,88,90,88,12,30,11,12,13,30,11,32,13,10,11,12,12,30,11,12,13,11,12,31,12,11,11,11,13,30,11,32,12,10,11,32,13,10,11,32,13,10,11,32,12,30,12,31,12,30,12,31,12,30,12,11,12,30,12,11,12,10,12,11,12,10,12,11,12,30,12,31,12,30,12,11,12,10,12,31,12,10,12,11,12,10,12,11,12,10,12,31,13,30,12,11,13,30,12,31,12\";}\n    break;\n  case 3:\n      if (Frio === true)\n      {msg.payload = \"90,89,11,32,12,11,12,31,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,11,12,31,12,11,12,11,11,32,12,31,12,31,12,31,12,31,11,31,12,31,11,31,12,11,11,11,12,11,11,11,12,11,12,11,12,11,12,31,12,11,12,11,12,11,12,11,12,11,12,11,12,31,12,11,12,31,12,31,12,31,12,31,12,31,11,31,12,89,90,89,12,31,12,11,12,31,12,31,11,11,12,11,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,11,12,31,11,11,12,11,12,31,12,31,11,31,12,31,11,31,12,31,12,31,12,31,12,11,12,11,11,12,12,11,11,11,12,11,11,11,12,31,11,11,12,11,11,11,12,11,12,11,12,11,12,31,12,11,12,31,12,31,11,31,12,31,11,31,12,31,12\";}\n      else\n      {msg.payload = \"91,88,12,31,12,10,12,31,12,30,12,11,12,10,12,31,12,10,12,11,12,30,12,11,13,10,12,31,13,30,12,11,12,30,12,11,12,10,12,31,12,30,12,31,12,30,12,31,12,31,12,30,12,31,12,10,12,11,12,11,12,11,12,11,12,11,12,31,12,31,12,31,12,11,12,11,12,31,12,11,12,11,12,11,12,11,12,11,12,30,12,31,12,11,12,31,12,31,12,88,90,88,12,30,12,11,12,30,12,31,12,11,12,11,12,30,12,11,12,10,12,31,12,11,12,11,12,30,12,31,12,11,12,31,12,11,12,11,12,30,12,31,12,31,13,30,11,32,12,30,12,31,12,30,12,11,12,10,12,11,12,10,11,12,12,10,11,32,12,30,12,31,13,10,12,11,12,30,12,11,12,10,11,12,12,10,11,12,12,30,11,32,12,10,11,32,12,30,12\";}\n    break;\n  default:\n    // code block\n}\n    return msg;","outputs":1,"noerr":0,"x":1090,"y":980,"wires":[["8154ad80.e9747"]]},{"id":"63173c28.5500c4","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACPiezaPrendido","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":900,"wires":[["ff4489b.03cc078"]]},{"id":"ff4489b.03cc078","type":"switch","z":"295f893a.42f726","name":"Prendido","property":"payload","propertyType":"msg","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":920,"y":900,"wires":[["73a0fa3b.741ba4"],["21eab5f4.6d638a"]]},{"id":"6ad3540c.f55a2c","type":"ui_button","z":"295f893a.42f726","name":"","group":"9baecddc.3dece","order":1,"width":"3","height":"1","passthru":false,"label":"Apagar","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"90,88,12,31,12,11,12,31,12,31,12,11,11,11,12,31,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,11,12,31,12,11,11,31,12,31,11,31,12,31,11,11,12,31,12,31,12,31,12,11,12,11,12,11,12,11,11,31,12,11,11,11,12,31,11,31,12,31,12,11,12,11,12,11,12,11,11,11,12,11,11,11,12,11,11,31,12,31,11,31,12,31,12,31,12,89,90,89,11,31,12,11,11,31,12,31,11,11,12,11,11,31,12,11,11,11,12,31,11,11,12,11,11,31,12,31,11,11,12,31,11,11,12,31,12,31,12,31,12,31,12,11,12,31,12,31,12,31,12,11,12,11,12,11,12,11,12,31,12,11,12,11,12,31,12,31,12,31,12,11,12,11,12,11,12,11,12,11,12,11,12,11,12,11,12,31,12,31,12,31,12,31,12,31,12","payloadType":"str","topic":"","x":940,"y":700,"wires":[["8154ad80.e9747"]]},{"id":"39d7244d.096c8c","type":"ui_button","z":"295f893a.42f726","name":"","group":"9baecddc.3dece","order":2,"width":"3","height":"1","passthru":false,"label":"Luz Visor","tooltip":"","color":"","bgcolor":"","icon":"fa-rss","payload":"90,88,12,31,11,11,12,31,11,31,12,11,11,31,12,11,11,31,12,11,11,31,12,11,11,11,12,31,11,11,12,31,12,11,12,31,12,31,12,31,12,31,12,11,12,31,12,11,12,31,12,11,12,11,12,11,12,11,12,31,12,11,12,31,12,11,12,31,12,11,12,31,12,11,12,11,12,31,12,11,12,31,12,11,12,31,12,11,12,31,12,31,12,11,12,31,12,11,12,88,90,89,12,31,12,11,12,31,12,31,12,11,12,31,12,11,12,31,12,11,12,31,12,11,12,11,12,31,12,11,12,31,12,11,12,31,12,31,12,31,12,31,12,11,12,31,12,11,12,31,12,11,12,11,12,11,12,11,12,31,12,11,12,31,12,11,12,31,12,11,12,31,12,11,12,11,12,31,12,11,12,31,12,11,12,31,12,11,12,31,12,31,11,11,12,31,11,11,12","payloadType":"str","topic":"","x":940,"y":740,"wires":[["8154ad80.e9747"]]},{"id":"8154ad80.e9747","type":"mqtt out","z":"295f893a.42f726","name":"","topic":"NodeMcu/PiezaNuestra/in/IR/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1400,"y":860,"wires":[]},{"id":"f2ea1215.b09","type":"change","z":"254f6ab6.9adb86","name":"Bt On","rules":[{"t":"set","p":"payload","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"Modo","pt":"flow","to":"BlueTooth","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":140,"wires":[["bb8278c5.b6d8c8","d90ca1be.aa2ca"]]},{"id":"4b749e64.d5199","type":"change","z":"254f6ab6.9adb86","name":"Apagar","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":260,"wires":[["84ac9536.69a078"]]},{"id":"49e6de6.f1c412","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 4","topic":"Android/TvLiving/out/button/4","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":100,"y":1280,"wires":[["7e25ccd5.71cd74"]]},{"id":"d3ae6aa5.3b95b8","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 5","topic":"Android/TvLiving/out/button/5","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":100,"y":1340,"wires":[[]]},{"id":"71ffb770.7d20b8","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 6","topic":"Android/TvLiving/out/button/6","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":100,"y":1380,"wires":[["65bf0c89.3018f4"]]},{"id":"320e26.44e711da","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 9","topic":"Android/TvLiving/out/button/9","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":130,"y":1620,"wires":[["1c3d4d54.428f83","10c536dc.ed24f9"]]},{"id":"1c3d4d54.428f83","type":"function","z":"9bee6473.dc8598","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1620,"wires":[[]]},{"id":"daaa938d.71136","type":"mqtt in","z":"9bee6473.dc8598","name":"TV Living Boton 8","topic":"Android/TvLiving/out/button/8","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":130,"y":1560,"wires":[["ae23f99.e022308"]]},{"id":"ae23f99.e022308","type":"function","z":"9bee6473.dc8598","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1560,"wires":[["60ac302e.23f7d"]]},{"id":"87a321db.ae531","type":"mqtt out","z":"9bee6473.dc8598","name":"Luz Living Delante (46)","topic":"Arduino/PBTablero/in/Relay/46","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":590,"y":1180,"wires":[],"inputLabels":["kkl"]},{"id":"cf2dab61.f057d8","type":"mqtt out","z":"9bee6473.dc8598","name":"Luz Living Sillon (48)","topic":"Arduino/PBTablero/in/Relay/48","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":580,"y":1140,"wires":[],"inputLabels":["kkl"]},{"id":"b507d1fb.5df69","type":"mqtt out","z":"9bee6473.dc8598","name":"Luz Living Principal (44)","topic":"Arduino/PBTablero/in/Relay/44","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":590,"y":1100,"wires":[],"inputLabels":["kkl"]},{"id":"13259406.fd9c8c","type":"link out","z":"bb63d718.931208","name":"","links":["850e61b2.483ec","366f90d.f036f7","e599f5ad.985e38"],"x":1095,"y":540,"wires":[]},{"id":"4d05c7d3.f044e8","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACLivingFrio","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":120,"wires":[["df203fce.24388"]]},{"id":"5629f96d.258a18","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACLivingPrendido","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":120,"wires":[["4d05c7d3.f044e8"]]},{"id":"df203fce.24388","type":"function","z":"295f893a.42f726","name":"","func":"var Vent = global.get(\"AACLivingVentilador\")||1;\nif (Vent >= 3 )  { Vent = 0;}\nVent += 1;\nglobal.set(\"AACLivingVentilador\",Vent)\nmsg.payload = Vent; // para el dropdown\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":340,"wires":[["7bf2cd28.ce9dd4","9161da56.e95698"]]},{"id":"7e25ccd5.71cd74","type":"link out","z":"9bee6473.dc8598","name":"","links":["2ec73eb8.333af2","175e48f3.472687"],"x":455,"y":1280,"wires":[]},{"id":"65bf0c89.3018f4","type":"link out","z":"9bee6473.dc8598","name":"","links":["7feab9a2.7110a8"],"x":435,"y":1380,"wires":[]},{"id":"6c2874db.9f398c","type":"link in","z":"295f893a.42f726","name":"Inicializar","links":["3a768ca5.cc6034","45c3c873.15b6a8","a6fba51c.f0fcb8","121ff899.078827","8a1c847a.5042d8"],"x":1275,"y":80,"wires":[["b3a88b4.0c1c778"]]},{"id":"b3a88b4.0c1c778","type":"function","z":"295f893a.42f726","name":"Inicializar","func":"flow.set(\"AACLivingVentilador\",1)\nreturn msg;","outputs":1,"noerr":0,"x":1400,"y":80,"wires":[[]]},{"id":"898c12bd.77f5","type":"change","z":"295f893a.42f726","name":"","rules":[{"t":"set","p":"AACLivingPrendido","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":500,"wires":[["ad594988.7bd4b8"]]},{"id":"4614e06a.8b4d1","type":"udp in","z":"d9b60640.843728","name":"UDP AAC","iface":"","port":"20911","ipv":"udp4","multicast":"false","group":"255.255.255.0","datatype":"buffer","x":660,"y":60,"wires":[["4ad50089.810d2"]]},{"id":"4ad50089.810d2","type":"function","z":"d9b60640.843728","name":"","func":"var myInt = msg.payload.readInt32BE(11);\nmsg.Modo = msg.payload[18].toString();\nmsg.Vent = msg.payload[19].toString();\nmsg.Temp1 = parseInt(msg.payload[21].toString());\nmsg.Temp2 = parseInt(msg.payload[22].toString());\nmsg.Temp = ((msg.Temp2 * 256) + msg.Temp1) / 100\nmsg.TempSet1 = parseInt(msg.payload[23].toString());\nmsg.TempSet2 = parseInt(msg.payload[24].toString());\nmsg.TempSet = ((msg.TempSet2 * 256) + msg.TempSet1) / 100\n\nmsg.payload = {};\nmsg.payload.mode = \"\"\nmsg.payload.temperature = msg.Temp\nmsg.payload.humidity = parseInt(global.get(\"LivingHumedad\"));\nmsg.payload.setpoint = msg.TempSet\nswitch(parseInt(msg.Modo))\n{\n    case 0:\n        msg.payload.mode = \"off\"\n        break;\n    case 1:\n        msg.payload.mode = \"cool\"\n        break;\n    case 2:\n        msg.payload.mode = \"heat\"\n        break;\n    case 3:\n        msg.payload.mode = \"dry\"\n        break;\n    case 4:\n        msg.payload.mode = \"fan-only\"\n        break;\n    case 254:\n        msg.payload.mode = \"auto\"\n        break;\n}\n \nglobal.set(\"AACLivingVentilador\",msg.Vent);\nglobal.set(\"AACLivingModo\",msg.Modo);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":810,"y":60,"wires":[["6d6dc30d.2a5a8c","5310cb09.f78bb4"]]},{"id":"922e3aaf.8df418","type":"change","z":"d9b60640.843728","name":"","rules":[{"t":"set","p":"AACLivingVentilador","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":260,"wires":[["6d6dc30d.2a5a8c"]]},{"id":"813cbac1.f75108","type":"change","z":"d9b60640.843728","name":"","rules":[{"t":"set","p":"AACLivingModo","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1260,"y":300,"wires":[["4625dfa9.0778a","6d6dc30d.2a5a8c"]]},{"id":"90a3c90a.f28b58","type":"ui_statetrail","z":"235e5af0.561006","group":"b32fa3e9.f2b7f","order":2,"width":0,"height":0,"name":"Entrada","label":"Entrada","states":[{"state":1,"col":"#e60000","t":"num","label":""},{"state":0,"col":"#999999","t":"num","label":""}],"periodLimit":"12","periodLimitUnit":"3600","timeformat":"HH:mm:ss","tickmarks":4,"persist":false,"legend":1,"combine":true,"blanklabel":"","x":1560,"y":40,"wires":[[]]},{"id":"9d9e2803.346178","type":"udp out","z":"d9b60640.843728","name":"","addr":"192.168.2.169","iface":"","port":"20910","ipv":"udp4","outport":"54563","base64":false,"multicast":"false","x":1610,"y":460,"wires":[]},{"id":"cb92f004.2762","type":"function","z":"d9b60640.843728","name":"","func":"var Vent = global.get(\"AACLivingVentilador\")||1;\nvar CurrMode = global.get(\"AACLivingModo\")||0;\n//msg.payload = new Buffer(\"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xc2\\xcf\\x23\\xaa\\x31\\x90\\xc2\\x00\\x01\\x61\\x04\\x01\\x00\\x00\\x80\");\n//msg.payload = new Buffer([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xac,0xcf,0x23,0xaa,0x31,0x90,0xc2,0x00,0x01,0x61,0x04,0x01,0x00,0x00,0x80]);\nmsg.payload = Buffer.from(\"00000000000000accf23aa3190f60001610402000080\", \"hex\")\n//msg.payload[18] = CurrMode ;\nmsg.payload[17] = CurrMode;\nmsg.payload[18] = Vent;\nreturn msg;\n","outputs":1,"noerr":0,"x":1390,"y":380,"wires":[["9d9e2803.346178"]]},{"id":"cb96c096.0556d","type":"ui_switch","z":"887b2e31.18293","name":"Toma Patio","label":"Toma Patio","tooltip":"","group":"6d3da8b1.90ed78","order":4,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/4","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1030,"y":940,"wires":[["8591f331.53aaf"]]},{"id":"948f6b1.f2fa198","type":"ui_switch","z":"887b2e31.18293","name":"Vent Tablero","label":"Vent Tablero","tooltip":"","group":"93dce1d.02bb22","order":6,"width":"6","height":"1","passthru":false,"decouple":"true","topic":"Arduino/PBTablero/in/Relay/22","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1030,"y":1020,"wires":[["8591f331.53aaf"]]},{"id":"30af352c.1675fa","type":"bigtimer","z":"bb63d718.931208","outtopic":"","outpayload1":"1","outpayload2":"0","name":"Bomba Pileta","comment":"","lat":"-34.67439","lon":"-58.33209","starttime":"120","endtime":"210","starttime2":0,"endtime2":0,"startoff":0,"endoff":0,"startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":1310,"y":100,"wires":[[],[],[]]},{"id":"c6c003a9.be3e5","type":"mqtt out","z":"bb63d718.931208","name":"Tomas Patio","topic":"Arduino/PBTablero/in/Relay/4","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1570,"y":120,"wires":[],"inputLabels":["kkl"]},{"id":"ba628250.8d496","type":"nora-light","z":"887b2e31.18293","devicename":"Comedor","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Comedor","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/26","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1020,"y":60,"wires":[["8591f331.53aaf"]]},{"id":"aa5b0c1c.1dfe","type":"nora-light","z":"887b2e31.18293","devicename":"Distribuidor","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Distribuidor","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/28","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1030,"y":140,"wires":[["8591f331.53aaf"]]},{"id":"eae181f9.8e62c","type":"nora-light","z":"887b2e31.18293","devicename":"Escritorio","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Escritorio","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/30","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1020,"y":220,"wires":[["8591f331.53aaf"]]},{"id":"167468f2.ed98d7","type":"nora-light","z":"887b2e31.18293","devicename":"Reflector","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Patio","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/32","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1020,"y":300,"wires":[["8591f331.53aaf"]]},{"id":"43dac68f.75b118","type":"nora-light","z":"887b2e31.18293","devicename":"Vestidor","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Living","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/34","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1020,"y":380,"wires":[["8591f331.53aaf"]]},{"id":"ffc845a9.83d3b8","type":"nora-light","z":"887b2e31.18293","devicename":"Patio","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Patio","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/36","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1010,"y":460,"wires":[["8591f331.53aaf"]]},{"id":"92a41f0.bc2afe","type":"nora-blinds","z":"d4cc4a57.a7caa8","devicename":"Pantalla Proyector","roomhint":"Living","name":"","passthru":false,"nora":"1630588a.b134c7","topic":"","x":130,"y":120,"wires":[["700bb773.e660c8"]]},{"id":"700bb773.e660c8","type":"switch","z":"d4cc4a57.a7caa8","name":"","property":"payload.openPercent","propertyType":"msg","rules":[{"t":"eq","v":"100","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":290,"y":100,"wires":[["22ed0059.f7bab"],["ef07a12.2a0f46"]],"outputLabels":["Bajar","Subir"]},{"id":"9392d9b0.301738","type":"change","z":"d4cc4a57.a7caa8","name":"","rules":[{"t":"set","p":"Proyector","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":160,"y":640,"wires":[[]]},{"id":"2f955945.abb8f6","type":"inject","z":"d4cc4a57.a7caa8","name":"","repeat":"10","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"PantallaProyector","payloadType":"global","x":110,"y":340,"wires":[["92a41f0.bc2afe"]]},{"id":"1df9061c.6ee35a","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":4,"width":"3","height":"1","passthru":false,"label":"R&P","tooltip":"","color":"","bgcolor":"","icon":"","payload":"http://play-rockandpop.cdn.sion.com:1935/rockandpop/audioweb/playlist.m3u8","payloadType":"str","topic":"","x":110,"y":340,"wires":[["7a7edbe0.3146d4"]]},{"id":"9a0c4d1b.b7003","type":"exec","z":"254f6ab6.9adb86","command":"vlc ","addpay":true,"append":"","useSpawn":"true","timer":"","oldrc":false,"name":"","x":570,"y":300,"wires":[[],[],[]]},{"id":"38d34e79.1c33e2","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":5,"width":"3","height":"1","passthru":false,"label":"Mega","tooltip":"","color":"","bgcolor":"","icon":"","payload":"https://mega.stweb.tv/mega983/live/chunks.m3u8","payloadType":"str","topic":"","x":110,"y":540,"wires":[["7a7edbe0.3146d4"]]},{"id":"2234c3b8.11618c","type":"change","z":"254f6ab6.9adb86","name":"","rules":[{"t":"set","p":"kill","pt":"msg","to":"SIGTERM","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":260,"wires":[["9a0c4d1b.b7003","bb8278c5.b6d8c8"]]},{"id":"e397d898.247658","type":"trigger","z":"254f6ab6.9adb86","name":"","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"200","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":440,"y":460,"wires":[["9a0c4d1b.b7003","bb8278c5.b6d8c8"]]},{"id":"d5df1091.f56db","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":6,"width":"3","height":"1","passthru":false,"label":"POP","tooltip":"","color":"","bgcolor":"","icon":"","payload":" https://s8.stweb.tv/popradio/live/playlist.m3u8","payloadType":"str","topic":"","x":110,"y":380,"wires":[["7a7edbe0.3146d4"]]},{"id":"19d451bb.d4649e","type":"link in","z":"254f6ab6.9adb86","name":"Inicializar","links":["45c3c873.15b6a8","a6fba51c.f0fcb8","121ff899.078827","8a1c847a.5042d8"],"x":295,"y":180,"wires":[["c63f34d8.f12268","865bfc97.e3aa1"]]},{"id":"b24ba000.1db1f","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":7,"width":"3","height":"1","passthru":false,"label":"R&P","tooltip":"","color":"","bgcolor":"","icon":"","payload":"http://play-rockandpop.cdn.sion.com:1935/rockandpop/audioweb/playlist.m3u8","payloadType":"str","topic":"","x":110,"y":420,"wires":[["7a7edbe0.3146d4"]]},{"id":"bf225784.cc7f78","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":8,"width":"3","height":"1","passthru":false,"label":"Mitre","tooltip":"","color":"","bgcolor":"","icon":"","payload":"http://retransmisorasenelpais.cienradios.com.ar/Mitre790_Main.aac","payloadType":"str","topic":"","x":110,"y":460,"wires":[["7a7edbe0.3146d4"]]},{"id":"b7785ea9.11377","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":9,"width":"3","height":"1","passthru":false,"label":"Aspen","tooltip":"","color":"","bgcolor":"","icon":"","payload":"http://playerservices.streamtheworld.com/api/livestream-redirect/ASPENAAC","payloadType":"str","topic":"","x":110,"y":500,"wires":[["7a7edbe0.3146d4"]]},{"id":"7a7edbe0.3146d4","type":"function","z":"254f6ab6.9adb86","name":"","func":"flow.set(\"Modo\",\"Radio\");\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":440,"wires":[["2234c3b8.11618c","e397d898.247658"]]},{"id":"7efaabac.f60804","type":"nora-light","z":"75f22ec1.216f","devicename":"Leds","lightcolor":true,"brightnesscontrol":true,"passthru":false,"statepayload":false,"brightnessoverride":"100","roomhint":"Living","name":"","nora":"1630588a.b134c7","topic":"","onvalue":"true","onvalueType":"bool","offvalue":"false","offvalueType":"bool","x":970,"y":940,"wires":[[]]},{"id":"f4d77867.69c658","type":"inject","z":"75f22ec1.216f","name":"Refresh","repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"Arduino/PBTablero/in/WSSTRIP/0,1,2,3/REFRESH","payload":"","payloadType":"num","x":1560,"y":180,"wires":[["8362404c.1d174"]]},{"id":"b13a0950.189328","type":"function","z":"75f22ec1.216f","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":140,"wires":[["aa7469b3.affdc8"]]},{"id":"c446536b.06dda","type":"function","z":"75f22ec1.216f","name":"FILL","func":"msg.topic =flow.get(\"CurrLedTopic\") + \"FILL\";\nmsg.payload =\"255,255,255\";\nreturn msg;","outputs":1,"noerr":0,"x":1370,"y":440,"wires":[["f4b1e03.cb3782"]]},{"id":"3bd2a91e.be6996","type":"function","z":"75f22ec1.216f","name":"RefreshUI","func":"var CurrLed = flow.get(\"CurrLed\")||0;\nmsg.payload = CurrLed;\nmsg.tipo= \"CurrLed\"\nnode.send(msg);\n\nvar CurrMode = flow.get(\"CurrLedMode\" + CurrLed)\nmsg.payload = CurrMode;\nmsg.tipo= \"CurrMode\"\nnode.send(msg);\n\nmsg.payload = flow.get(\"CurrLedOnOff\" + CurrLed);\nmsg.tipo= \"OnOff\"\nnode.send(msg);\n\n//flow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",20);\n//flow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",120);\n","outputs":1,"noerr":0,"x":340,"y":700,"wires":[["992af7f2.ed56e8"]]},{"id":"992af7f2.ed56e8","type":"switch","z":"75f22ec1.216f","name":"","property":"tipo","propertyType":"msg","rules":[{"t":"eq","v":"CurrLed","vt":"str"},{"t":"eq","v":"CurrMode","vt":"str"},{"t":"eq","v":"OnOff","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":330,"y":760,"wires":[["f800c336.45fb8"],["e1689a8f.406708"],["fdde1b53.70f7a8"]]},{"id":"665d91ff.3a69c","type":"switch","z":"75f22ec1.216f","name":"","property":"Blink","propertyType":"msg","rules":[{"t":"else"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":1170,"y":440,"wires":[["e1797793.8d47b8"],["c446536b.06dda","c864c27e.37a43"]]},{"id":"5d7148ae.7ec118","type":"function","z":"75f22ec1.216f","name":"Teclas Default","func":"msg.mode = \"RAINBOW\";\nmsg.currLed = 5;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",60);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",256);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1040,"y":800,"wires":[["aa7469b3.affdc8"]]},{"id":"d9ade87e.d04cb8","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":5,"width":0,"height":0,"passthru":false,"label":"Teclas","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":870,"y":900,"wires":[["5d7148ae.7ec118"]]},{"id":"938ee41.529da18","type":"delay","z":"235e5af0.561006","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":390,"y":820,"wires":[["9f55c46f.c6d8b8","49957b79.19c924"]]},{"id":"bc7149d7.558368","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":210,"y":260,"wires":[["d62f77a0.eb91c8"]]},{"id":"e038d36d.83bbc","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"Router Telecentro\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":260,"wires":[["e6774774.977058","7cecd731.cbfff8"]]},{"id":"e6774774.977058","type":"ui_led","z":"73aaa5f5.ea3f4c","order":4,"group":"f177c7aa.290658","width":0,"height":0,"label":"Router Telecentro","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"Router Telecentro","x":680,"y":260,"wires":[]},{"id":"d62f77a0.eb91c8","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.0.1","x":370,"y":260,"wires":[["e038d36d.83bbc"]]},{"id":"9a26287f.e0b7b8","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":200,"y":200,"wires":[["5b9c7f08.aeb4f"]]},{"id":"5b9c7f08.aeb4f","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.2","x":360,"y":200,"wires":[["59421132.970b"]]},{"id":"59421132.970b","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"Router Living\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":200,"wires":[["bb79f373.93be7"]]},{"id":"bb79f373.93be7","type":"ui_led","z":"73aaa5f5.ea3f4c","order":2,"group":"f177c7aa.290658","width":0,"height":0,"label":"Router Living","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"Router Living","x":650,"y":200,"wires":[]},{"id":"79a0bcc.3b97644","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":220,"y":140,"wires":[["27ea5136.ec059e"]]},{"id":"27ea5136.ec059e","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.11","x":380,"y":140,"wires":[["66d39c8d.e0d8e4"]]},{"id":"66d39c8d.e0d8e4","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"Router PA\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":520,"y":140,"wires":[["bd0b096.c6ea9f8","70aa730a.2e462c"]]},{"id":"bd0b096.c6ea9f8","type":"ui_led","z":"73aaa5f5.ea3f4c","order":1,"group":"f177c7aa.290658","width":0,"height":0,"label":"Router PA","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"Router PA","x":670,"y":140,"wires":[]},{"id":"a120e198.a6d52","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":190,"y":320,"wires":[["724729b1.fc14a8"]]},{"id":"724729b1.fc14a8","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"8.8.8.8","x":330,"y":320,"wires":[["c0913706.550828"]]},{"id":"31dcf3c6.44c78c","type":"ui_led","z":"73aaa5f5.ea3f4c","order":6,"group":"f177c7aa.290658","width":0,"height":0,"label":"Internet","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"Internet","x":660,"y":320,"wires":[]},{"id":"c0913706.550828","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"Router Telecentro\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":320,"wires":[["31dcf3c6.44c78c","6087d124.34531","a1f7c83e.2651b8"]]},{"id":"6087d124.34531","type":"trigger","z":"73aaa5f5.ea3f4c","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"50","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":870,"y":300,"wires":[[]]},{"id":"70aa730a.2e462c","type":"trigger","z":"73aaa5f5.ea3f4c","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"50","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":870,"y":100,"wires":[[]]},{"id":"7cecd731.cbfff8","type":"trigger","z":"73aaa5f5.ea3f4c","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"50","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":890,"y":220,"wires":[[]]},{"id":"62c63bd4.f9f874","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":170,"y":480,"wires":[["b7702583.e6bee8"]]},{"id":"74195dc6.439bd4","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"Camara Patio\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":480,"wires":[["f24b5bc9.3621f8","d2c82e4f.d0496"]]},{"id":"f24b5bc9.3621f8","type":"ui_led","z":"73aaa5f5.ea3f4c","order":1,"group":"bc362a5c.0bea88","width":0,"height":0,"label":"Patio","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Camara Patio (51)","x":650,"y":480,"wires":[]},{"id":"8ad04419.7931b8","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":170,"y":520,"wires":[["ca067035.a848"]]},{"id":"d297b354.468a2","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"Camara Domo\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":520,"wires":[["7f1d2a4f.36c4f4","d2c82e4f.d0496"]]},{"id":"7f1d2a4f.36c4f4","type":"ui_led","z":"73aaa5f5.ea3f4c","order":4,"group":"bc362a5c.0bea88","width":0,"height":0,"label":"Domo","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"Camara Domo (52)","x":650,"y":520,"wires":[]},{"id":"1712bb76.19d6a5","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"","payloadType":"date","x":170,"y":560,"wires":[["53501a5c.f992a4"]]},{"id":"a11c3992.861d18","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"Camara Balcon\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":560,"wires":[["c3f184ec.3ac8b8","d2c82e4f.d0496"]]},{"id":"c3f184ec.3ac8b8","type":"ui_led","z":"73aaa5f5.ea3f4c","order":2,"group":"bc362a5c.0bea88","width":0,"height":0,"label":"Balcon","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"Camara Balcon (53)","x":660,"y":560,"wires":[]},{"id":"be772d3.0a165d","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"","payloadType":"date","x":170,"y":600,"wires":[["a649c67e.997788"]]},{"id":"117013b3.bb92ec","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"Camara Entrada\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":600,"wires":[["67cf1afb.491e84","d2c82e4f.d0496"]]},{"id":"67cf1afb.491e84","type":"ui_led","z":"73aaa5f5.ea3f4c","order":3,"group":"bc362a5c.0bea88","width":0,"height":0,"label":"Entrada","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"name":"Camara Entrada (186)","x":660,"y":600,"wires":[]},{"id":"b7702583.e6bee8","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.51","x":330,"y":480,"wires":[["74195dc6.439bd4"]]},{"id":"ca067035.a848","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.52","x":330,"y":520,"wires":[["d297b354.468a2"]]},{"id":"53501a5c.f992a4","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.53","x":330,"y":560,"wires":[["a11c3992.861d18"]]},{"id":"a649c67e.997788","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.186","x":340,"y":600,"wires":[["117013b3.bb92ec"]]},{"id":"d2c82e4f.d0496","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"if (msg.payload == false) value = 0;\nif (msg.payload == true) value = 1;\nmsg.payload = [{\n    value: value\n},\n{\n    host:msg.hostname\n}];\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":540,"wires":[[]]},{"id":"3f9ccff3.301a1","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":230,"y":40,"wires":[["cff6ca4e.0e0098"]]},{"id":"cff6ca4e.0e0098","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.6","x":390,"y":40,"wires":[["c6326a6c.e9fd38"]]},{"id":"c6326a6c.e9fd38","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"msg.hostname = \"MXQ\";\nif (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":40,"wires":[["b183b970.dcb748"]]},{"id":"b183b970.dcb748","type":"ui_led","z":"73aaa5f5.ea3f4c","order":3,"group":"f177c7aa.290658","width":0,"height":0,"label":"MXQ","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"MXQ","x":660,"y":40,"wires":[]},{"id":"4625dfa9.0778a","type":"switch","z":"d9b60640.843728","name":"","property":"AACLivingModo","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1530,"y":300,"wires":[["91aeb50e.fc1418"],["2c2dc4d7.25de0c"]]},{"id":"7e38647e.ad686c","type":"link in","z":"d9b60640.843728","name":"Inicializar","links":[],"x":715,"y":680,"wires":[[]]},{"id":"91aeb50e.fc1418","type":"change","z":"d9b60640.843728","name":"Apagado","rules":[{"t":"set","p":"AACLivingPrendido","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1660,"y":260,"wires":[[]]},{"id":"2c2dc4d7.25de0c","type":"change","z":"d9b60640.843728","name":"Prendido","rules":[{"t":"set","p":"AACLivingPrendido","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1660,"y":320,"wires":[[]]},{"id":"49050c3f.9eee24","type":"ui_dropdown","z":"d9b60640.843728","name":"Modo","label":"","tooltip":"","place":"Modo","group":"f6973454.34b7b8","order":3,"width":0,"height":0,"passthru":false,"options":[{"label":"Apagado","value":"0","type":"str"},{"label":"Frio","value":"1","type":"str"},{"label":"Ventilacion","value":"4","type":"str"},{"label":"Auto","value":"254","type":"str"},{"label":"Dry","value":"3","type":"str"}],"payload":"","topic":"","x":1030,"y":300,"wires":[["813cbac1.f75108","ec8d16ae.32f1a8"]]},{"id":"ea3e3e48.a86ec","type":"ui_slider","z":"d9b60640.843728","name":"","label":"Ventilador","tooltip":"","group":"f6973454.34b7b8","order":5,"width":"4","height":"1","passthru":false,"outs":"end","topic":"","min":"1","max":"3","step":1,"x":1020,"y":240,"wires":[["922e3aaf.8df418","ec8d16ae.32f1a8"]]},{"id":"6d6dc30d.2a5a8c","type":"function","z":"d9b60640.843728","name":"RefreshUI","func":"var Vent = global.get(\"AACLivingVentilador\")||1;\nmsg.payload = Vent;\nmsg.tipo= \"Vent\"\nmsg.Vent = Vent;\nnode.send(msg);\n\nvar CurrMode = global.get(\"AACLivingModo\")||0;\nmsg.payload = CurrMode;\nmsg.tipo= \"CurrMode\"\nmsg.Modo = CurrMode;\nnode.send(msg);\n\nvar Vent = global.get(\"AACLivingVentilador\")||1;\nmsg.payload = msg.Temp;\nmsg.tipo= \"TempAmbiente\"\nnode.send(msg);\n//flow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",20);\n//flow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",120);\n","outputs":1,"noerr":0,"x":960,"y":120,"wires":[["5e8a9cbe.b11ba4"]]},{"id":"5e8a9cbe.b11ba4","type":"switch","z":"d9b60640.843728","name":"","property":"tipo","propertyType":"msg","rules":[{"t":"eq","v":"Vent","vt":"str"},{"t":"eq","v":"CurrMode","vt":"str"},{"t":"eq","v":"TempAmbiente","vt":"str"},{"t":"eq","v":"Google","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":750,"y":320,"wires":[["ea3e3e48.a86ec"],["49050c3f.9eee24"],["50fe7f55.9e9ee","8a17748b.caeef8","df42b69f.46fd68"],[]]},{"id":"ec8d16ae.32f1a8","type":"trigger","z":"d9b60640.843728","name":"","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"250","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":1220,"y":380,"wires":[["cb92f004.2762"]]},{"id":"8a17748b.caeef8","type":"ui_gauge","z":"d9b60640.843728","name":"","group":"46ccdc7e.a82334","order":1,"width":0,"height":0,"gtype":"gage","title":"Temp. Interior AAC","label":"C","format":"{{value}}","min":0,"max":"50","colors":["#0400b5","#00d900","#ca3838"],"seg1":"20","seg2":"28","x":850,"y":500,"wires":[]},{"id":"3f9f6e25.190942","type":"ui_chart","z":"d9b60640.843728","name":"","group":"46ccdc7e.a82334","order":2,"width":0,"height":0,"label":"Temp. Interior AAC","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"40","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":970,"y":640,"wires":[[]]},{"id":"c516a2b7.00585","type":"function","z":"d9b60640.843728","name":"Redondeo","func":"msg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":560,"wires":[["3f9f6e25.190942"]]},{"id":"50fe7f55.9e9ee","type":"aggregator","z":"d9b60640.843728","name":"","topic":"","intervalCount":"10","intervalUnits":"m","submitIncompleteInterval":true,"aggregationType":"median","x":770,"y":560,"wires":[["c516a2b7.00585"]]},{"id":"12bc4b0f.9d0635","type":"function","z":"d9b60640.843728","name":"","func":"//msg.payload = new Buffer([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xac,0xcf,0x23,0xaa,0x31,0x90,0xc2,0x00,0x01,0x61,0x04,0x01,0x00,0x00,0x80]);\n//msg.payload = Buffer.from(\"00000000000000ffffffffffff9e0000a104\", \"hex\")\nmsg.payload = Buffer.from(\"00000000000000accf23aa3190590001e4\", \"hex\")\nreturn msg;\n","outputs":1,"noerr":0,"x":1430,"y":560,"wires":[["9d9e2803.346178"]]},{"id":"aeb4282f.b0f5f8","type":"inject","z":"d9b60640.843728","name":"","repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"Reportar AAC","payload":"","payloadType":"num","x":1320,"y":660,"wires":[["12bc4b0f.9d0635"]]},{"id":"162afe21.f76422","type":"ui_button","z":"d9b60640.843728","name":"","group":"f6973454.34b7b8","order":5,"width":0,"height":0,"passthru":true,"label":"APAGAR","tooltip":"","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":1080,"y":500,"wires":[["7e4cc182.69687"]]},{"id":"3914eb67.5338f4","type":"function","z":"d9b60640.843728","name":"Vent","func":"var Vent = parseInt(global.get(\"AACLivingVentilador\")||1);\nif (Vent >= 3 )  { Vent = 0;}\nVent += 1;\nglobal.set(\"AACLivingVentilador\",Vent);\nglobal.set(\"AACLivingModo\",4);\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":420,"wires":[["cb92f004.2762"]]},{"id":"175e48f3.472687","type":"link in","z":"d9b60640.843728","name":"Living Vent","links":["7e25ccd5.71cd74","2152d1d.25a1c2e"],"x":1100,"y":420,"wires":[["3914eb67.5338f4"]],"l":true},{"id":"6a71ca60.33b304","type":"function","z":"d9b60640.843728","name":"Off","func":"global.set(\"AACLivingModo\",0);\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":500,"wires":[["cb92f004.2762"]]},{"id":"ca91a708.345b28","type":"link in","z":"295f893a.42f726","name":"AAC Pieza Apagar","links":[],"x":635,"y":840,"wires":[["73a0fa3b.741ba4"]]},{"id":"7feab9a2.7110a8","type":"link in","z":"d9b60640.843728","name":"AAC Living Apagar","links":["26f8115c.6b657e","65bf0c89.3018f4"],"x":1155,"y":620,"wires":[["7e4cc182.69687"]]},{"id":"5310cb09.f78bb4","type":"nora-thermostat","z":"d9b60640.843728","devicename":"Aire","roomhint":"Living","name":"","modes":"off,heat,cool,auto,fan-only,dry","unit":"C","topic":"","passthru":false,"commandOnly":false,"queryOnly":false,"bufferRangeCelsius":2,"nora":"1630588a.b134c7","x":530,"y":300,"wires":[[]]},{"id":"9e44b44d.765fe8","type":"change","z":"d9b60640.843728","name":"","rules":[{"t":"set","p":"LivingHumedad","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":780,"wires":[[]]},{"id":"17538f3e.572961","type":"mqtt in","z":"2bcc0ccb.cd26a4","name":"PBLiving Humedad (DHT 25)","topic":"Arduino/PBLiving/out/DHT/0/Humedad","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":220,"y":600,"wires":[["c6674aee.b233c8","6bc3ab36.e4cb64"]]},{"id":"e7b81bce.aff2c8","type":"mqtt in","z":"2bcc0ccb.cd26a4","name":"PBLiving Temperatura (DHT 25)","topic":"Arduino/PBLiving/out/DHT/0/Temperatura","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":210,"y":700,"wires":[["6a70f799.10ff68","d63d26b4.b763a8","3f96eee1.cba962"]]},{"id":"6bc3ab36.e4cb64","type":"ui_gauge","z":"2bcc0ccb.cd26a4","name":"","group":"a0a12305.1eb01","order":2,"width":0,"height":0,"gtype":"gage","title":"Hum. Exterior","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":900,"y":580,"wires":[]},{"id":"d63d26b4.b763a8","type":"ui_gauge","z":"2bcc0ccb.cd26a4","name":"","group":"a0a12305.1eb01","order":1,"width":0,"height":0,"gtype":"gage","title":"Temp. Exterior","label":"C","format":"{{value}}","min":0,"max":"50","colors":["#0400b5","#00d900","#ca3838"],"seg1":"20","seg2":"28","x":900,"y":680,"wires":[]},{"id":"84abb273.2616c","type":"ui_chart","z":"2bcc0ccb.cd26a4","name":"","group":"a0a12305.1eb01","order":4,"width":0,"height":0,"label":"Hum. Exterior","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#0264d0","#f7d89f","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":900,"y":620,"wires":[[]]},{"id":"811691a7.7f418","type":"ui_chart","z":"2bcc0ccb.cd26a4","name":"","group":"a0a12305.1eb01","order":3,"width":0,"height":0,"label":"Temp. Exterior","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"40","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"x":900,"y":720,"wires":[[]]},{"id":"7d66b4f2.39c4fc","type":"function","z":"2bcc0ccb.cd26a4","name":"Redondeo","func":"msg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":600,"wires":[["84abb273.2616c"]]},{"id":"db2ba84e.dcbac8","type":"function","z":"2bcc0ccb.cd26a4","name":"Redondeo","func":"msg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":670,"y":720,"wires":[["811691a7.7f418"]]},{"id":"6a70f799.10ff68","type":"aggregator","z":"2bcc0ccb.cd26a4","name":"","topic":"","intervalCount":"10","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":470,"y":740,"wires":[["db2ba84e.dcbac8"]]},{"id":"c6674aee.b233c8","type":"aggregator","z":"2bcc0ccb.cd26a4","name":"","topic":"","intervalCount":"10","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":450,"y":600,"wires":[["7d66b4f2.39c4fc"]]},{"id":"534510c1.3e093","type":"mqtt in","z":"d9b60640.843728","name":"PBTablero Humedad (DHT 6)","topic":"Arduino/PBTablero/out/DHT/0/Humedad","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":640,"y":840,"wires":[["887e668b.be9af8","9826dd30.f7519","9e44b44d.765fe8","71d5902b.331f2"]]},{"id":"532471ea.c488c","type":"mqtt in","z":"d9b60640.843728","name":"PBTablero Temperatura (DHT 6)","topic":"Arduino/PBTablero/out/DHT/0/Temperatura","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":630,"y":940,"wires":[["9c163c2b.fa3b","4acc6704.529088","8a6402d5.99f1","86b759f2.3724f8","cd8d6ff1.2bb47"]]},{"id":"9826dd30.f7519","type":"ui_gauge","z":"d9b60640.843728","name":"","group":"bf36a591.082a28","order":2,"width":0,"height":0,"gtype":"gage","title":"Hum.Interior","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1310,"y":820,"wires":[]},{"id":"4acc6704.529088","type":"ui_gauge","z":"d9b60640.843728","name":"","group":"bf36a591.082a28","order":1,"width":0,"height":0,"gtype":"gage","title":"Temp. Interior","label":"C","format":"{{value}}","min":0,"max":"50","colors":["#0400b5","#00d900","#ca3838"],"seg1":"20","seg2":"28","x":1320,"y":920,"wires":[]},{"id":"b1a9d8c6.d46d48","type":"ui_chart","z":"d9b60640.843728","name":"","group":"bf36a591.082a28","order":4,"width":0,"height":0,"label":"Hum. Interior","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1310,"y":860,"wires":[[]]},{"id":"ded48a4b.83bb98","type":"ui_chart","z":"d9b60640.843728","name":"","group":"bf36a591.082a28","order":3,"width":0,"height":0,"label":"Temp. Interior","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"40","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1320,"y":960,"wires":[[]]},{"id":"148036f8.e627a9","type":"function","z":"d9b60640.843728","name":"Redondeo","func":"msg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1090,"y":840,"wires":[["b1a9d8c6.d46d48"]]},{"id":"e7aae05c.14c8b","type":"function","z":"d9b60640.843728","name":"Redondeo","func":"msg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1090,"y":940,"wires":[["ded48a4b.83bb98"]]},{"id":"9c163c2b.fa3b","type":"aggregator","z":"d9b60640.843728","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":870,"y":940,"wires":[["e7aae05c.14c8b"]]},{"id":"887e668b.be9af8","type":"aggregator","z":"d9b60640.843728","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":870,"y":840,"wires":[["148036f8.e627a9"]]},{"id":"8a6402d5.99f1","type":"change","z":"d9b60640.843728","name":"","rules":[{"t":"set","p":"LivingTemperatura","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":1020,"wires":[[]]},{"id":"48872c5b.418a94","type":"nora-light","z":"887b2e31.18293","devicename":"Comedor Centro","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Comedor","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/24","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1050,"y":1100,"wires":[["8591f331.53aaf"]]},{"id":"36e2c321.fbe4cc","type":"nora-light","z":"887b2e31.18293","devicename":"Living","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Living","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/44","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1010,"y":740,"wires":[["8591f331.53aaf"]]},{"id":"a37bbbaf.62f288","type":"nora-light","z":"887b2e31.18293","devicename":"Living Adelante","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Living","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/46","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1040,"y":820,"wires":[["8591f331.53aaf"]]},{"id":"29179a1e.be09e6","type":"nora-light","z":"887b2e31.18293","devicename":"Living Sillon","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Living","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/48","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1030,"y":900,"wires":[["8591f331.53aaf"]]},{"id":"82f14c8d.8eb31","type":"nora-light","z":"887b2e31.18293","devicename":"Escalera","lightcolor":false,"brightnesscontrol":false,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"Distribuidor","name":"","nora":"1630588a.b134c7","topic":"Arduino/PBTablero/in/Relay/42","onvalue":"1","onvalueType":"str","offvalue":"0","offvalueType":"str","x":1020,"y":660,"wires":[["8591f331.53aaf"]]},{"id":"1348b166.e2033f","type":"nora-switch","z":"887b2e31.18293","devicename":"Subwoofer","roomhint":"Living","name":"","passthru":false,"nora":"1630588a.b134c7","topic":"Arduino/PBLiving/in/Relay/26","onvalue":"1","onvalueType":"num","offvalue":"0","offvalueType":"num","x":1030,"y":1340,"wires":[["8591f331.53aaf","98ee3ff8.ef381"]]},{"id":"98ee3ff8.ef381","type":"debug","z":"887b2e31.18293","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1260,"y":1300,"wires":[]},{"id":"71d5902b.331f2","type":"ui_level","z":"d9b60640.843728","group":"f6973454.34b7b8","order":4,"width":0,"height":0,"name":"Humedad","label":"Humedad","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"%","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":860,"y":740,"wires":[]},{"id":"df42b69f.46fd68","type":"ui_level","z":"d9b60640.843728","group":"f6973454.34b7b8","order":3,"width":0,"height":0,"name":"Temp AAC","label":"Temp AAC","colorHi":"#e60000","colorWarn":"#20ff00","colorNormal":"#001fb3","colorOff":"#595959","min":"10","max":"37","segWarn":"11","segHigh":"12","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":610,"y":640,"wires":[]},{"id":"86b759f2.3724f8","type":"ui_level","z":"d9b60640.843728","group":"f6973454.34b7b8","order":3,"width":0,"height":0,"name":"Temp","label":"Temp","colorHi":"#e60000","colorWarn":"#20ff00","colorNormal":"#001fb3","colorOff":"#595959","min":"10","max":"37","segWarn":"20","segHigh":"26","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":810,"y":1120,"wires":[]},{"id":"f9f4734f.1aca5","type":"mqtt in","z":"9bee6473.dc8598","name":"ShutDown","topic":"Android/TvLiving/out/power/shutdown","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":60,"y":820,"wires":[["3284de1b.7198c2","113eac65.4a5474"]]},{"id":"3284de1b.7198c2","type":"change","z":"9bee6473.dc8598","name":"set TVLivingPrendida","rules":[{"t":"set","p":"TVLivingPrendida","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":880,"wires":[["6f83706c.5cbff"]]},{"id":"cc688568.d8b368","type":"mqtt in","z":"9bee6473.dc8598","name":"Start","topic":"Android/TvLiving/out/power/start","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":70,"y":600,"wires":[["71a7b234.90a0ac"]]},{"id":"71a7b234.90a0ac","type":"change","z":"9bee6473.dc8598","name":"set TVLivingPrendida","rules":[{"t":"set","p":"TVLivingPrendida","pt":"global","to":"true","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":600,"wires":[["a36228ea.ffa108","1240fe29.0786e2"]]},{"id":"f805589a.44b608","type":"change","z":"9bee6473.dc8598","name":"set TVLivingCurrentApp","rules":[{"t":"set","p":"TVLivingCurrentApp","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":420,"wires":[["71a7b234.90a0ac"]]},{"id":"aaf68c8d.e332f","type":"function","z":"d9b60640.843728","name":"Frio","func":"var Vent = parseInt(global.get(\"AACLivingVentilador\")||1);\nif (Vent >= 3 )  { Vent = 0;}\nVent += 1;\nglobal.set(\"AACLivingVentilador\",Vent);\nglobal.set(\"AACLivingModo\",1);\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":460,"wires":[["cb92f004.2762"]]},{"id":"c7144ea0.da045","type":"link in","z":"d9b60640.843728","name":"Living Frio","links":[],"x":1100,"y":460,"wires":[["aaf68c8d.e332f"]],"l":true},{"id":"4878ef67.a7caa","type":"ui_button","z":"d9b60640.843728","name":"","group":"f6973454.34b7b8","order":5,"width":0,"height":0,"passthru":true,"label":"FRIO","tooltip":"","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":930,"y":420,"wires":[["aaf68c8d.e332f"]]},{"id":"857bc617.a682d8","type":"ui_button","z":"d9b60640.843728","name":"","group":"f6973454.34b7b8","order":5,"width":0,"height":0,"passthru":true,"label":"VENT","tooltip":"","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":930,"y":360,"wires":[["3914eb67.5338f4"]]},{"id":"e1d9ed45.63aa9","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"b881457e.8f3768","order":2,"width":0,"height":0,"passthru":false,"label":"MUTE","tooltip":"","color":"","bgcolor":"","icon":"","payload":"178,89,11,11,11,10,11,10,11,11,11,10,11,10,11,11,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,10,11,11,11,10,11,33,11,33,11,33,11,10,11,11,11,33,11,33,11,33,11,10,11,10,11,11,11,33,11,33,11,10,11","payloadType":"str","topic":"","x":710,"y":740,"wires":[["96df8aba.3ea2c8"]]},{"id":"c8f29d5a.9f692","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"b881457e.8f3768","order":3,"width":"3","height":"1","passthru":false,"label":"Apagar","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"179,88,11,10,11,11,11,10,11,10,11,10,11,10,11,10,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,10,11,10,11,11,11,10,11,33,11,33,11,11,11,10,11,33,11,33,11,33,11,33,11,10,11,10,11,33,11,33,11,10,11,792,179,44,11","payloadType":"str","topic":"","x":720,"y":780,"wires":[["96df8aba.3ea2c8"]]},{"id":"66e4b6a0.38bf88","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"b881457e.8f3768","order":6,"width":"3","height":"1","passthru":false,"label":"Volumen UP","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-up","payload":"179,88,11,10,11,11,11,10,11,10,11,11,11,10,11,10,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,10,11,10,11,11,11,33,11,11,11,33,11,11,11,10,11,33,11,33,11,33,11,10,11,33,11,10,11,33,11,33,11,10,11,792,179,44,11","payloadType":"str","topic":"","x":730,"y":840,"wires":[["96df8aba.3ea2c8"]]},{"id":"a1d8601f.fa613","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"b881457e.8f3768","order":5,"width":"3","height":"1","passthru":false,"label":"Volumen Down","tooltip":"","color":"","bgcolor":"","icon":"fa-volume-down","payload":"179,88,11,10,11,11,11,10,11,10,11,11,11,10,11,10,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,10,11,10,11,11,11,10,11,10,11,33,11,10,11,11,11,33,11,33,11,33,11,33,11,33,11,10,11,33,11,33,11,10,11,791,179,44,11","payloadType":"str","topic":"","x":740,"y":880,"wires":[["96df8aba.3ea2c8"]]},{"id":"efd93a51.db4588","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"b881457e.8f3768","order":5,"width":"3","height":"1","passthru":false,"label":"DVD","tooltip":"","color":"","bgcolor":"","icon":"","payload":"179,88,11,10,11,10,11,10,11,10,11,10,11,10,11,10,11,32,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,10,11,33,11,10,11,33,11,33,11,33,11,10,11,11,11,33,11,11,11,33,11,11,11,10,11,10,11,33,11,33,11,10,11","payloadType":"str","topic":"","x":730,"y":940,"wires":[["96df8aba.3ea2c8"]]},{"id":"25ec14d8.b4e72c","type":"ui_button","z":"230ac56e.bc629a","name":"","group":"b881457e.8f3768","order":5,"width":"3","height":"1","passthru":false,"label":"STEREO","tooltip":"","color":"","bgcolor":"","icon":"","payload":"179,88,11,10,11,11,11,10,11,10,11,11,11,10,11,10,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,33,11,10,11,33,11,10,11,33,11,10,11,33,11,10,11,10,11,33,11,10,11,33,11,10,11,33,11,10,11,33,11,33,11,10,11,792,179,44,11","payloadType":"str","topic":"","x":740,"y":980,"wires":[["96df8aba.3ea2c8"]]},{"id":"96df8aba.3ea2c8","type":"mqtt out","z":"230ac56e.bc629a","name":"","topic":"NodeMcu/PiezaNuestra/in/IR/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1080,"y":860,"wires":[]},{"id":"acdb7c61.ea52a","type":"link out","z":"c5b2ea55.84d058","name":"","links":["3cea545.81724ac"],"x":795,"y":640,"wires":[]},{"id":"e9e9c2b1.9fdba","type":"delay","z":"c5b2ea55.84d058","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":920,"y":880,"wires":[[]]},{"id":"2d4563f6.7f655c","type":"delay","z":"c5b2ea55.84d058","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":660,"y":640,"wires":[["acdb7c61.ea52a"]]},{"id":"21496688.72dc4a","type":"link out","z":"c5b2ea55.84d058","name":"","links":["8c151f41.32899"],"x":520,"y":600,"wires":[]},{"id":"8c151f41.32899","type":"link in","z":"d4cc4a57.a7caa8","name":"Activar Modo Proyector","links":["21496688.72dc4a"],"x":55,"y":480,"wires":[["154b9521.7efb6b"]]},{"id":"27927a2a.f61346","type":"delay","z":"d4cc4a57.a7caa8","name":"","pauseType":"delay","timeout":"24","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":500,"y":340,"wires":[["78855132.54d3d"]]},{"id":"fb42c720.28e758","type":"link in","z":"d4cc4a57.a7caa8","name":"Desactivar Modo Proyector","links":["25b13e03.853852","74c5a710.74bec8"],"x":235,"y":480,"wires":[["22ed0059.f7bab","12954b05.ef1bd5","9d697de3.fe89c"]]},{"id":"3685c04c.89fdd","type":"link out","z":"c5b2ea55.84d058","name":"","links":["d8ffd3b2.e534f"],"x":995,"y":180,"wires":[]},{"id":"f4ca659a.008868","type":"trigger","z":"d4cc4a57.a7caa8","name":"","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"46","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":710,"y":160,"wires":[["511546f7.774948","dd0361d8.c95a9"]]},{"id":"2e0897ff.1eb158","type":"function","z":"c5b2ea55.84d058","name":"Leds Rojos","func":"msg.payload = 256 - (msg.cant*4);\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":480,"wires":[["158c4ef9.66f6a1"]]},{"id":"164d5153.d588ff","type":"msg-resend","z":"c5b2ea55.84d058","interval":"800","intervalUnit":"msecs","maximum":"64","bytopic":false,"clone":false,"firstDelayed":false,"addCounters":true,"highRate":false,"outputCountField":"cant","outputMaxField":"nax","name":"","x":590,"y":480,"wires":[["2e0897ff.1eb158"]]},{"id":"158c4ef9.66f6a1","type":"link out","z":"c5b2ea55.84d058","name":"","links":["a461f9e.53d5d08","d97b7740.0c53e8","943d8d5d.8b063"],"x":875,"y":480,"wires":[]},{"id":"772140a3.884df","type":"delay","z":"c5b2ea55.84d058","name":"","pauseType":"delay","timeout":"22","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":675,"y":717,"wires":[["d6975a9c.3dc248"]]},{"id":"d6975a9c.3dc248","type":"link out","z":"c5b2ea55.84d058","name":"","links":["abd1cb9f.c69ab8"],"x":795,"y":720,"wires":[]},{"id":"9d697de3.fe89c","type":"change","z":"d4cc4a57.a7caa8","name":"","rules":[{"t":"set","p":"Proyector","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":600,"wires":[[]]},{"id":"113eac65.4a5474","type":"switch","z":"9bee6473.dc8598","name":"Proy. Apagado","property":"Proyector","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":140,"y":980,"wires":[["3be5da58.c5d4a6"]]},{"id":"c0de4abd.966bd8","type":"nora-scene","z":"c5b2ea55.84d058","devicename":"Modo Cine","roomhint":"","scenereversible":false,"name":"","nora":"1630588a.b134c7","topic":"","onvalue":"true","onvalueType":"bool","offvalue":"false","offvalueType":"bool","x":100,"y":700,"wires":[["626cca4b.7a2014","fce73a35.a51d58"]]},{"id":"626cca4b.7a2014","type":"debug","z":"c5b2ea55.84d058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":270,"y":760,"wires":[]},{"id":"154b9521.7efb6b","type":"switch","z":"d4cc4a57.a7caa8","name":"Proy. Apagado","property":"Proyector","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":160,"y":400,"wires":[["ef07a12.2a0f46","27927a2a.f61346","9392d9b0.301738"]]},{"id":"28f0f831.ebe1b8","type":"switch","z":"c5b2ea55.84d058","name":"Proy. Apagado","property":"Proyector","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":400,"y":480,"wires":[["164d5153.d588ff"]]},{"id":"47ec5ce2.372f04","type":"link in","z":"230ac56e.bc629a","name":"Prender Subwoofers","links":["9744ab09.b13a28"],"x":515,"y":560,"wires":[["d7c38c73.41283"]]},{"id":"d7c38c73.41283","type":"change","z":"230ac56e.bc629a","name":"Prender Subwoofers","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":560,"wires":[["b57ff1b4.07a6f"]]},{"id":"9744ab09.b13a28","type":"link out","z":"c5b2ea55.84d058","name":"","links":["47ec5ce2.372f04"],"x":520,"y":580,"wires":[]},{"id":"98dd192.e1ab7e8","type":"ui_button","z":"c5b2ea55.84d058","name":"","group":"837d3079.305cd","order":14,"width":0,"height":0,"passthru":true,"label":"Activar Modo Tele","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":950,"y":580,"wires":[["74c5a710.74bec8","33d81369.56798c","5d9ad764.74a238"]]},{"id":"74c5a710.74bec8","type":"link out","z":"c5b2ea55.84d058","name":"","links":["fb42c720.28e758"],"x":1115,"y":540,"wires":[]},{"id":"33d81369.56798c","type":"link out","z":"c5b2ea55.84d058","name":"","links":["e7f0a3b8.edc83"],"x":1115,"y":580,"wires":[]},{"id":"a6e86e5e.5616c","type":"nora-scene","z":"c5b2ea55.84d058","devicename":"Tele","roomhint":"","scenereversible":false,"name":"","nora":"1630588a.b134c7","topic":"","onvalue":"true","onvalueType":"bool","offvalue":"false","offvalueType":"bool","x":750,"y":560,"wires":[["98dd192.e1ab7e8"]]},{"id":"4565d6ec.f2dc48","type":"debug","z":"c5b2ea55.84d058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1080,"y":480,"wires":[]},{"id":"ef5d007e.46c2","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":10,"width":"6","height":"1","passthru":false,"label":"APAGAR RADIO","tooltip":"","color":"","bgcolor":"","icon":"","payload":"http://play-rockandpop.cdn.sion.com:1935/rockandpop/audioweb/playlist.m3u8","payloadType":"str","topic":"","x":130,"y":200,"wires":[["c63f34d8.f12268"]]},{"id":"865bfc97.e3aa1","type":"delay","z":"254f6ab6.9adb86","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":220,"wires":[["bb8278c5.b6d8c8"]]},{"id":"e4a0df9e.8b154","type":"switch","z":"254f6ab6.9adb86","name":"BlueTooth?","property":"Modo","propertyType":"flow","rules":[{"t":"eq","v":"BlueTooth","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":530,"y":80,"wires":[["c4c0402.798aec"]]},{"id":"c4c0402.798aec","type":"change","z":"254f6ab6.9adb86","name":"Modo","rules":[{"t":"set","p":"Modo","pt":"flow","to":"","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":80,"wires":[["778ac368.022cbc"]]},{"id":"729bc9a1.f84d98","type":"switch","z":"254f6ab6.9adb86","name":"Modo","property":"Modo","propertyType":"flow","rules":[{"t":"eq","v":"Radio","vt":"str"},{"t":"eq","v":"BlueTooth","vt":"str"},{"t":"eq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":770,"y":420,"wires":[["4b749e64.d5199"],["4b749e64.d5199"],["84ac9536.69a078"]]},{"id":"c63f34d8.f12268","type":"change","z":"254f6ab6.9adb86","name":"Modo","rules":[{"t":"set","p":"Modo","pt":"flow","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":280,"wires":[["2234c3b8.11618c"]]},{"id":"508bff48.f7c56","type":"ui_button","z":"235e5af0.561006","name":"","group":"b89f1435.0c4bf8","order":8,"width":0,"height":0,"passthru":true,"label":"Hard Reset PBLiving","tooltip":"","color":"","bgcolor":"","icon":"","payload":"100000101100100011010011","payloadType":"str","topic":"","x":880,"y":1040,"wires":[["fc079f31.d66bf"]]},{"id":"fc079f31.d66bf","type":"mqtt out","z":"235e5af0.561006","name":"","topic":"Arduino/PBTablero/in/RF433/18","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1150,"y":1040,"wires":[],"inputLabels":["kkl"]},{"id":"5c5e651a.a6069c","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"PbLivingOk","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":820,"wires":[[]]},{"id":"eacce410.d071d8","type":"inject","z":"57b26073.47916","name":"Cada 5m","repeat":"180","crontab":"","once":true,"onceDelay":"120","topic":"","payload":"","payloadType":"date","x":1130,"y":720,"wires":[["3348c0d9.de932"]]},{"id":"3348c0d9.de932","type":"switch","z":"57b26073.47916","name":"PbLiving Down","property":"PbLivingOk","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":1320,"y":720,"wires":[["28318a85.c0f436"]]},{"id":"b556f051.67f2b","type":"link in","z":"235e5af0.561006","name":"Hard Reset PbLiving","links":["28318a85.c0f436"],"x":735,"y":1040,"wires":[["508bff48.f7c56"]]},{"id":"28318a85.c0f436","type":"link out","z":"57b26073.47916","name":"","links":["b556f051.67f2b"],"x":1655,"y":660,"wires":[]},{"id":"f23edcdc.c318c","type":"ui_button","z":"c5b2ea55.84d058","name":"","group":"f687a4d9.3b1578","order":8,"width":0,"height":0,"passthru":false,"label":"button","tooltip":"","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":510,"y":420,"wires":[["164d5153.d588ff"]]},{"id":"40221ae5.d21b44","type":"function","z":"75f22ec1.216f","name":"Teclas Sinelon","func":"msg.mode = \"SINELON\";\nmsg.currLed = 5;\nif (isNaN(msg.payload)) msg.payload = 0; //ROJO\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",msg.payload);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",3);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);","outputs":1,"noerr":0,"x":940,"y":80,"wires":[["4f0dd53f.f6b4bc","b13a0950.189328"]]},{"id":"702fc77d.77f908","type":"link in","z":"75f22ec1.216f","name":"Teclas Sinelon","links":["5d9ad764.74a238"],"x":795,"y":60,"wires":[["40221ae5.d21b44"]]},{"id":"4f0dd53f.f6b4bc","type":"trigger","z":"75f22ec1.216f","name":"","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":"2","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":1280,"y":80,"wires":[["5d7148ae.7ec118"]]},{"id":"5d9ad764.74a238","type":"link out","z":"c5b2ea55.84d058","name":"","links":["702fc77d.77f908"],"x":1055,"y":700,"wires":[]},{"id":"dd0361d8.c95a9","type":"link out","z":"d4cc4a57.a7caa8","name":"","links":["850e61b2.483ec","366f90d.f036f7","e599f5ad.985e38"],"x":780,"y":320,"wires":[]},{"id":"6ffc208b.be4f8","type":"debug","z":"230ac56e.bc629a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":880,"y":80,"wires":[]},{"id":"7ebac973.5a9558","type":"link out","z":"bb63d718.931208","name":"","links":["9b8f4570.c182a8","a17a01a7.288cc"],"x":1455,"y":540,"wires":[]},{"id":"879d9fe.4c7a66","type":"mqtt out","z":"5a08b38d.d6a17c","name":"","topic":"Arduino/PBLiving/in/RF433/3","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1460,"y":600,"wires":[],"inputLabels":["kkl"]},{"id":"c3e7ac68.8fb6d","type":"change","z":"5a08b38d.d6a17c","name":"Prender","rules":[{"t":"set","p":"VeladorComedor","pt":"global","to":"true","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"100000101100100010001101","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":120,"wires":[["d56392a.1a1917"]]},{"id":"22112df5.64c3c2","type":"change","z":"5a08b38d.d6a17c","name":"Apagar","rules":[{"t":"set","p":"VeladorComedor","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"100000101100100010001100","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":180,"wires":[["d56392a.1a1917"]]},{"id":"f3a7aa24.af0ee8","type":"switch","z":"5a08b38d.d6a17c","name":"Toogle","property":"VeladorComedor","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":120,"wires":[["c3e7ac68.8fb6d"],["22112df5.64c3c2"]]},{"id":"cddf63be.5edb5","type":"ui_switch","z":"5a08b38d.d6a17c","name":"","label":"Velador","tooltip":"","group":"8baa852c.3b6cc8","order":3,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":180,"wires":[["e6b23953.615688"]]},{"id":"e6b23953.615688","type":"switch","z":"5a08b38d.d6a17c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":180,"wires":[["c3e7ac68.8fb6d"],["22112df5.64c3c2"]]},{"id":"13739d76.e75a63","type":"link in","z":"5a08b38d.d6a17c","name":"Inicializar","links":[],"x":535,"y":300,"wires":[["22112df5.64c3c2","4ed3fb37.587ac4","26cde41f.49fbfc"]]},{"id":"4050ca0d.746bb4","type":"change","z":"5a08b38d.d6a17c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"VeladorComedor","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":40,"wires":[["cddf63be.5edb5"]]},{"id":"d56392a.1a1917","type":"function","z":"5a08b38d.d6a17c","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":140,"wires":[["4050ca0d.746bb4","654ae30e.34263c"]]},{"id":"43ae59e0.1879c8","type":"change","z":"5a08b38d.d6a17c","name":"Prender","rules":[{"t":"set","p":"LuzNegraNenes","pt":"global","to":"true","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"100000101100100011001000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":420,"wires":[["595b41bf.e286c"]]},{"id":"4ed3fb37.587ac4","type":"change","z":"5a08b38d.d6a17c","name":"Apagar","rules":[{"t":"set","p":"LuzNegraNenes","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"100000101100100011001001","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":480,"wires":[["595b41bf.e286c"]]},{"id":"b7267975.0093e8","type":"switch","z":"5a08b38d.d6a17c","name":"Toogle","property":"LuzNegraNenes","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":490,"y":440,"wires":[["43ae59e0.1879c8"],["4ed3fb37.587ac4"]]},{"id":"318bd05a.3d06a","type":"ui_switch","z":"5a08b38d.d6a17c","name":"","label":"Luz Negra Nenes","tooltip":"","group":"f26c6aa4.77c7d8","order":3,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":310,"y":480,"wires":[["c8539ea7.bd879"]]},{"id":"c8539ea7.bd879","type":"switch","z":"5a08b38d.d6a17c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":490,"y":500,"wires":[["43ae59e0.1879c8"],["4ed3fb37.587ac4"]]},{"id":"4e956d6f.4c2924","type":"change","z":"5a08b38d.d6a17c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"LuzNegraNenes","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":360,"wires":[["318bd05a.3d06a"]]},{"id":"595b41bf.e286c","type":"function","z":"5a08b38d.d6a17c","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":440,"wires":[["4e956d6f.4c2924","654ae30e.34263c"]]},{"id":"b2fd8c23.666dd","type":"link in","z":"5a08b38d.d6a17c","name":"Apagar Velador Comedor","links":["fa3e99d5.822c88"],"x":340,"y":280,"wires":[["22112df5.64c3c2"]]},{"id":"fa3e99d5.822c88","type":"link out","z":"bb63d718.931208","name":"","links":["b2fd8c23.666dd"],"x":1535,"y":760,"wires":[]},{"id":"103848db.7c2f77","type":"ui_text","z":"9bee6473.dc8598","group":"6d3da8b1.90ed78","order":7,"width":"3","height":"1","name":"","label":"","format":"{{msg.payload}}","layout":"row-spread","x":810,"y":420,"wires":[]},{"id":"28a86bac.ffe9d4","type":"mqtt in","z":"bb63d718.931208","name":"Tecla Tablero Azul (31)","topic":"Arduino/PBTablero/out/Button/31","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":140,"y":220,"wires":[["b1bf7fca.8175d"]]},{"id":"c47bebca.18de88","type":"change","z":"bb63d718.931208","name":"UnForce","rules":[{"t":"set","p":"payload","pt":"msg","to":"unforce","tot":"str"},{"t":"set","p":"VestidorForced","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":300,"wires":[["60ed99dc.830dd8","f7f4e79f.40f798"]]},{"id":"d0572925.1c2768","type":"switch","z":"bb63d718.931208","name":"","property":"VestidorForced","propertyType":"global","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":430,"y":260,"wires":[["c47bebca.18de88"],["b8e2c235.47fc6"]]},{"id":"b8e2c235.47fc6","type":"change","z":"bb63d718.931208","name":"force","rules":[{"t":"set","p":"payload","pt":"msg","to":"force-1","tot":"str"},{"t":"set","p":"VestidorForced","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":200,"wires":[["d58fafa8.afc3a","f7f4e79f.40f798"]]},{"id":"f7f4e79f.40f798","type":"trigger","z":"bb63d718.931208","name":"","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":"4","extend":false,"units":"min","reset":"unforce","bytopic":"all","outputs":1,"x":790,"y":220,"wires":[["c47bebca.18de88"]]},{"id":"a5d22c7b.cab1e","type":"mqtt in","z":"887b2e31.18293","name":"Tecla Tablero Naranja Claro UTP Gris (33)","topic":"Arduino/PBTablero/out/Button/33/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":340,"y":760,"wires":[[]]},{"id":"38ce8e9e.174e92","type":"mqtt out","z":"bb63d718.931208","name":"Vent Tablero (22)","topic":"Arduino/PBTablero/in/Relay/22","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1030,"y":60,"wires":[],"inputLabels":["kkl"]},{"id":"11629136.6e3c6f","type":"mqtt out","z":"bb63d718.931208","name":"Luz Living Principal (44)","topic":"Arduino/PBTablero/in/Relay/44","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":450,"y":380,"wires":[],"inputLabels":["kkl"]},{"id":"a6f382df.6a301","type":"mqtt in","z":"bb63d718.931208","name":"Tecla Tablero (33)","topic":"Arduino/PBTablero/out/Button/33/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":670,"y":60,"wires":[["eace5d2b.31f23"]]},{"id":"eace5d2b.31f23","type":"function","z":"bb63d718.931208","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":60,"wires":[["38ce8e9e.174e92"]]},{"id":"8f48c64d.ba72a8","type":"link in","z":"254f6ab6.9adb86","name":"Timbre","links":["c9ecbb70.86e948","41f25d62.786434"],"x":95,"y":640,"wires":[["79e09b79.93f924"]]},{"id":"79e09b79.93f924","type":"ui_button","z":"254f6ab6.9adb86","name":"","group":"35f37aae.e9b246","order":5,"width":"3","height":"1","passthru":true,"label":"Timbre","tooltip":"","color":"","bgcolor":"","icon":"","payload":"/srv/samba/share/timbre2.wav","payloadType":"str","topic":"","x":130,"y":600,"wires":[["a1b8b4ef.3b4958","7a7edbe0.3146d4"]]},{"id":"a1b8b4ef.3b4958","type":"trigger","z":"254f6ab6.9adb86","name":"","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"10","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":290,"y":600,"wires":[["c63f34d8.f12268"]]},{"id":"e66ec2fb.48ffb","type":"mqtt out","z":"5a08b38d.d6a17c","name":"","topic":"Arduino/PBTablero/in/RF433/18","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1470,"y":380,"wires":[],"inputLabels":["kkl"]},{"id":"ecbd23f3.4fedc","type":"function","z":"5f9dfcc6.ecd504","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":360,"wires":[[]]},{"id":"2152d1d.25a1c2e","type":"link out","z":"bb63d718.931208","name":"","links":["175e48f3.472687"],"x":255,"y":140,"wires":[]},{"id":"61001a59.ae7164","type":"link out","z":"bb63d718.931208","name":"","links":["7a8d5316.fd25ac"],"x":255,"y":40,"wires":[]},{"id":"2e938730.aaa208","type":"function","z":"57b26073.47916","name":"LONGPRESSMILIS","func":"msg.topic = msg.topic + \"BUTTONS/LONGPRESSMILIS\";\nmsg.payload = 1000;\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":240,"wires":[["c1566fcc.e4eaa"]]},{"id":"5b8400aa.a2ab8","type":"function","z":"57b26073.47916","name":"PRESSMILIS","func":"msg.topic = msg.topic + \"BUTTONS/PRESSMILIS\";\nmsg.payload = 600;\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":200,"wires":[["c1566fcc.e4eaa"]]},{"id":"e7c03e96.56d8a","type":"mqtt in","z":"d9b60640.843728","name":"Teclas Living IR 1 (29) Boton Azul","topic":"Arduino/PBTablero/out/Button/29","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":350,"y":420,"wires":[["8d20e2c7.d741c"]]},{"id":"8d20e2c7.d741c","type":"switch","z":"d9b60640.843728","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"CLICK","vt":"str"},{"t":"eq","v":"LONGPRESSSTART","vt":"str"},{"t":"eq","v":"DOUBLECLICK","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":570,"y":420,"wires":[["857bc617.a682d8"],["162afe21.f76422"],["4878ef67.a7caa"]]},{"id":"ecb9b11f.03b67","type":"mqtt in","z":"230ac56e.bc629a","name":"Encoder","topic":"Arduino/PBTablero/out/Encoder/0","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":80,"y":460,"wires":[["a38a9e7.600496"]]},{"id":"87564c40.d727d","type":"switch","z":"230ac56e.bc629a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"+","vt":"str"},{"t":"eq","v":"-","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":170,"y":700,"wires":[["800b8d3.d14977"],["d12cc57d.dfa268"]]},{"id":"a38a9e7.600496","type":"delay","z":"230ac56e.bc629a","name":"","pauseType":"rate","timeout":"300","timeoutUnits":"milliseconds","rate":"8","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":150,"y":540,"wires":[["87564c40.d727d"]]},{"id":"cd4ec1fd.37c08","type":"mqtt in","z":"230ac56e.bc629a","name":"Teclas Living IR 1 (37) Boton Encoder","topic":"Arduino/PBTablero/out/Button/37","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":170,"y":180,"wires":[["a72f4975.8c3c28"]]},{"id":"a72f4975.8c3c28","type":"switch","z":"230ac56e.bc629a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"CLICK","vt":"str"},{"t":"eq","v":"LONGPRESSSTART","vt":"str"},{"t":"eq","v":"DOUBLECLICK","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":290,"y":280,"wires":[["f5fdfcff.d3be5"],["5b43e24f.1726fc"],[]]},{"id":"9720a0e0.0365a","type":"function","z":"230ac56e.bc629a","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":1210,"y":660,"wires":[["793fb1f8.dc34d"]]},{"id":"a6582d99.65e08","type":"mqtt in","z":"230ac56e.bc629a","name":"Teclas Living IR 1 (35) Tecla Negra","topic":"Arduino/PBTablero/out/Button/35/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":980,"y":660,"wires":[["9720a0e0.0365a"]]},{"id":"793fb1f8.dc34d","type":"mqtt out","z":"230ac56e.bc629a","name":"Toma SubWoofer (26)","topic":"Arduino/PBLiving/in/Relay/26","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1200,"y":560,"wires":[],"inputLabels":["kkl"]},{"id":"8c5f4b50.903368","type":"function","z":"57b26073.47916","name":"Encoder Loop","func":"msg.topic = msg.topic + \"Encoder/0/LOOP\";\nmsg.payload = 1;\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":440,"wires":[["c1566fcc.e4eaa"]]},{"id":"629dcb66.377934","type":"function","z":"57b26073.47916","name":"Encoder Value","func":"msg.topic = msg.topic + \"Encoder/0/VALUE\";\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":480,"wires":[["c1566fcc.e4eaa"]]},{"id":"a04a4f2e.c0df2","type":"mqtt in","z":"c5b2ea55.84d058","name":"Teclas Living IR 1 (27) Boton Blanco","topic":"Arduino/PBTablero/out/Button/27","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":180,"y":240,"wires":[["bc5e833f.26a4e"]]},{"id":"bc5e833f.26a4e","type":"switch","z":"c5b2ea55.84d058","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"CLICK","vt":"str"},{"t":"eq","v":"LONGPRESSSTART","vt":"str"},{"t":"eq","v":"DOUBLECLICK","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":470,"y":280,"wires":[["b5514a52.2ccb08"],["6abe0d5b.91b464"],["a557a1f9.4698b"]]},{"id":"de9914a1.a888a8","type":"mqtt out","z":"c5b2ea55.84d058","name":"Luz Living Sillon (48)","topic":"Arduino/PBTablero/in/Relay/48","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":760,"y":180,"wires":[],"inputLabels":["kkl"]},{"id":"a557a1f9.4698b","type":"change","z":"c5b2ea55.84d058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":140,"wires":[["de9914a1.a888a8"]]},{"id":"b1bf7fca.8175d","type":"switch","z":"bb63d718.931208","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"CLICK","vt":"str"},{"t":"eq","v":"LONGPRESSSTART","vt":"str"},{"t":"eq","v":"DOUBLECLICK","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":290,"y":280,"wires":[["d0572925.1c2768"],[],[]]},{"id":"8ddea43b.b609b8","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":170,"y":680,"wires":[["2e95d179.721c2e"]]},{"id":"2e95d179.721c2e","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.42","x":330,"y":680,"wires":[["e2bbc883.ff1d08"]]},{"id":"e2bbc883.ff1d08","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"if (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":470,"y":680,"wires":[["72c53f57.135f2"]]},{"id":"1026d0e3.77b5ff","type":"inject","z":"73aaa5f5.ea3f4c","name":"","repeat":"15","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":170,"y":640,"wires":[["648433ef.94549c"]]},{"id":"648433ef.94549c","type":"adv ping","z":"73aaa5f5.ea3f4c","name":"","host":"192.168.2.41","x":330,"y":640,"wires":[["6daa8c32.a30054"]]},{"id":"6daa8c32.a30054","type":"function","z":"73aaa5f5.ea3f4c","name":"","func":"if (msg.payload === false) return msg;\nif (msg.payload >= 0) msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":640,"wires":[["cdaf3689.c6da28"]]},{"id":"cdaf3689.c6da28","type":"ui_led","z":"73aaa5f5.ea3f4c","order":1,"group":"b89f1435.0c4bf8","width":0,"height":0,"label":"PBLiving Red","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"PBLiving Red","x":640,"y":640,"wires":[]},{"id":"72c53f57.135f2","type":"ui_led","z":"73aaa5f5.ea3f4c","order":9,"group":"b89f1435.0c4bf8","width":0,"height":0,"label":"PBTablero Red","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"PBTablero Red","x":640,"y":680,"wires":[]},{"id":"7a876412.b73fec","type":"function","z":"235e5af0.561006","name":"LastSeen","func":"var topics = msg.topic.split(\"/\");\nif (topics[0].toUpperCase() == \"ARDUINO\")\n{\n    msg.LastSeen = new Date();\n    msg.ArduinoName = topics[1];\n    return msg;    \n}\n","outputs":1,"noerr":0,"x":320,"y":540,"wires":[["5ff5e2e8.d59abc"]]},{"id":"5ff5e2e8.d59abc","type":"switch","z":"235e5af0.561006","name":"","property":"ArduinoName","propertyType":"msg","rules":[{"t":"eq","v":"PBLiving","vt":"str"},{"t":"eq","v":"PBTablero","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":390,"y":600,"wires":[["74e285a2.65795c"],["e94a454d.ed0788"]]},{"id":"74e285a2.65795c","type":"ui_text","z":"235e5af0.561006","group":"b89f1435.0c4bf8","order":6,"width":0,"height":0,"name":"PbLiving RF433","label":"RF433","format":"{{msg.LastSeen}}","layout":"row-spread","x":520,"y":540,"wires":[]},{"id":"e94a454d.ed0788","type":"ui_text","z":"235e5af0.561006","group":"b89f1435.0c4bf8","order":14,"width":0,"height":0,"name":"PBTablero RF433","label":"RF433","format":"{{msg.LastSeen}}","layout":"row-spread","x":490,"y":660,"wires":[]},{"id":"67705693.ca1278","type":"mqtt in","z":"930c94d9.38ece8","name":"Corriente 12v 1","topic":"Arduino/PBTablero/out/Sensores/INA/1/CURRENT","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":160,"y":820,"wires":[["a356fdd4.c59c5"]]},{"id":"80df8d5.7a44f7","type":"mqtt in","z":"930c94d9.38ece8","name":"Corriente 12v 2 ","topic":"Arduino/PBTablero/out/Sensores/INA/2/CURRENT","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":160,"y":860,"wires":[["97c90270.59be3"]]},{"id":"ba93d220.b3558","type":"mqtt in","z":"930c94d9.38ece8","name":"Corriente 12v 3","topic":"Arduino/PBTablero/out/Sensores/INA/3/CURRENT","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":160,"y":900,"wires":[["17e96302.e7c91d"]]},{"id":"a356fdd4.c59c5","type":"function","z":"930c94d9.38ece8","name":"","func":"msg.payload = (msg.payload * 2) / 1000\nmsg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"x":360,"y":820,"wires":[["3fd0a28f.c8619e"]]},{"id":"3fd0a28f.c8619e","type":"change","z":"930c94d9.38ece8","name":"","rules":[{"t":"set","p":"12vCurrent1","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"Resto","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":820,"wires":[["4dc1766f.d28e08","55006f1f.e7a46"]]},{"id":"7c55f922.785208","type":"change","z":"930c94d9.38ece8","name":"","rules":[{"t":"set","p":"12vCurrent2","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"Escritorio","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":860,"wires":[["b0dfc0cf.e11e2","55006f1f.e7a46"]]},{"id":"d1b1bf1e.061f8","type":"change","z":"930c94d9.38ece8","name":"","rules":[{"t":"set","p":"12vCurrent3","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"5v","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":900,"wires":[["ca8eac7f.d3bdc","271ccecc.de9f22","55006f1f.e7a46"]]},{"id":"17e96302.e7c91d","type":"function","z":"930c94d9.38ece8","name":"","func":"msg.payload = (msg.payload) / 1000\nmsg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":900,"wires":[["d1b1bf1e.061f8"]]},{"id":"97c90270.59be3","type":"function","z":"930c94d9.38ece8","name":"","func":"msg.payload = (msg.payload) / 1000\nmsg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":860,"wires":[["7c55f922.785208"]]},{"id":"5db53b07.727cf4","type":"function","z":"930c94d9.38ece8","name":"","func":"msg.payload = flow.get(\"12vCurrent1\") + flow.get(\"12vCurrent2\") + flow.get(\"12vCurrent3\");\nmsg.payload = Math.round(msg.payload * 100) /100;\nmsg.topic =\"Total\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":800,"y":740,"wires":[["55006f1f.e7a46"]]},{"id":"d9cab47.09fd948","type":"mqtt in","z":"2bcc0ccb.cd26a4","name":"BMP Press","topic":"RPI/out/BMP/Press","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":180,"y":880,"wires":[["66234373.4dc52c"]]},{"id":"66234373.4dc52c","type":"function","z":"2bcc0ccb.cd26a4","name":"Redondeo","func":"msg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":880,"wires":[["b82e9cf1.05b8e","c139f93f.d00548"]]},{"id":"b82e9cf1.05b8e","type":"aggregator","z":"2bcc0ccb.cd26a4","name":"","topic":"","intervalCount":"10","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":630,"y":920,"wires":[["fbd69705.87c648"]]},{"id":"c139f93f.d00548","type":"ui_gauge","z":"2bcc0ccb.cd26a4","name":"","group":"46ccdc7e.a82334","order":3,"width":0,"height":0,"gtype":"gage","title":"Presion","label":"Hp","format":"{{value}}","min":"900","max":"1100","colors":["#0400b5","#00d900","#ca3838"],"seg1":"20","seg2":"28","x":860,"y":880,"wires":[]},{"id":"fbd69705.87c648","type":"ui_chart","z":"2bcc0ccb.cd26a4","name":"","group":"46ccdc7e.a82334","order":4,"width":0,"height":0,"label":"Presion","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"990","ymax":"1020","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":860,"y":920,"wires":[[]]},{"id":"ce18262d.7ab0a8","type":"mqtt in","z":"930c94d9.38ece8","name":"Corriente 12v 1","topic":"Arduino/PBTablero/out/Sensores/INA/2/VOLTS","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":160,"y":960,"wires":[["6d9264fa.ba3fcc"]]},{"id":"6d9264fa.ba3fcc","type":"ui_level","z":"930c94d9.38ece8","group":"93dce1d.02bb22","order":3,"width":0,"height":0,"name":"12v","label":"","colorHi":"#e60000","colorWarn":"#3ef807","colorNormal":"#b32800","colorOff":"#595959","min":"10","max":"14","segWarn":"12","segHigh":"13","unit":"Volts","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":510,"y":960,"wires":[]},{"id":"935d1c93.8744b","type":"ui_level","z":"930c94d9.38ece8","group":"93dce1d.02bb22","order":4,"width":0,"height":0,"name":"Total","label":"Total","colorHi":"#e60000","colorWarn":"#ecd713","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"7","segWarn":"3","segHigh":"5","unit":"Amps","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"peaktime":"5000","x":970,"y":800,"wires":[]},{"id":"b0dfc0cf.e11e2","type":"ui_level","z":"930c94d9.38ece8","group":"93dce1d.02bb22","order":8,"width":0,"height":0,"name":"Escritorio","label":"Escritorio","colorHi":"#e60000","colorWarn":"#ecd713","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"4","segWarn":"1","segHigh":"3","unit":"Amps","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"peaktime":"5000","x":980,"y":920,"wires":[]},{"id":"ca8eac7f.d3bdc","type":"ui_level","z":"930c94d9.38ece8","group":"93dce1d.02bb22","order":9,"width":0,"height":0,"name":"5v","label":"5v","colorHi":"#e60000","colorWarn":"#ecd713","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"4","segWarn":"1","segHigh":"3","unit":"Amps","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"peaktime":"5000","x":950,"y":960,"wires":[]},{"id":"4dc1766f.d28e08","type":"ui_level","z":"930c94d9.38ece8","group":"93dce1d.02bb22","order":10,"width":0,"height":0,"name":"Resto","label":"Resto","colorHi":"#e60000","colorWarn":"#ecd713","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"4","segWarn":"1","segHigh":"3","unit":"Amps","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"peaktime":"5000","x":970,"y":880,"wires":[]},{"id":"b902c043.7dfc4","type":"ui_level","z":"930c94d9.38ece8","group":"e11d6ab1.7fd148","order":1,"width":0,"height":0,"name":"220v","label":"","colorHi":"#e60000","colorWarn":"#0dff00","colorNormal":"#b30000","colorOff":"#595959","min":"140","max":"260","segWarn":"200","segHigh":"240","unit":"Volts","layout":"sh","channelA":"","channelB":"","decimals":"0","animations":"soft","shape":2,"colorschema":"valuedriven","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"5000","x":850,"y":160,"wires":[]},{"id":"57a7a262.e9272c","type":"ui_level","z":"930c94d9.38ece8","group":"e11d6ab1.7fd148","order":2,"width":0,"height":0,"name":"Amps","label":"","colorHi":"#e60000","colorWarn":"#fbe904","colorNormal":"#1bb300","colorOff":"#595959","min":"0","max":"30","segWarn":"5","segHigh":"15","unit":"Amps","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"property":"payload","peaktime":"5000","x":870,"y":320,"wires":[]},{"id":"da409666.c002c8","type":"ui_level","z":"930c94d9.38ece8","group":"e11d6ab1.7fd148","order":3,"width":0,"height":0,"name":"Watts","label":"","colorHi":"#e60000","colorWarn":"#fbe904","colorNormal":"#1bb300","colorOff":"#595959","min":"0","max":"8000","segWarn":"2000","segHigh":"3500","unit":"Watts","layout":"sh","channelA":"","channelB":"","decimals":"0","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"peaktime":"5000","x":770,"y":560,"wires":[]},{"id":"55006f1f.e7a46","type":"ui_chart","z":"930c94d9.38ece8","name":"","group":"93dce1d.02bb22","order":12,"width":0,"height":0,"label":"Amps","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"8","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":970,"y":840,"wires":[[]]},{"id":"43b3abeb.5a4814","type":"debug","z":"235e5af0.561006","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":460,"y":440,"wires":[]},{"id":"ddc11681.f232e8","type":"change","z":"5a08b38d.d6a17c","name":"Prender","rules":[{"t":"set","p":"LuzNegraValen","pt":"global","to":"true","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"100000101100100010100000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":680,"wires":[["f9d6fbfd.4a60a8"]]},{"id":"26cde41f.49fbfc","type":"change","z":"5a08b38d.d6a17c","name":"Apagar","rules":[{"t":"set","p":"LuzNegraValen","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"100000101100100010100001","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":740,"wires":[["f9d6fbfd.4a60a8"]]},{"id":"43762971.b1d698","type":"switch","z":"5a08b38d.d6a17c","name":"Toogle","property":"LuzNegraValen","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":680,"wires":[["ddc11681.f232e8"],["26cde41f.49fbfc"]]},{"id":"dc347307.3f164","type":"ui_switch","z":"5a08b38d.d6a17c","name":"","label":"Luz Negra Valen","tooltip":"","group":"8baa852c.3b6cc8","order":3,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":720,"wires":[["cb37e817.cd1f68"]]},{"id":"cb37e817.cd1f68","type":"switch","z":"5a08b38d.d6a17c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":740,"wires":[["ddc11681.f232e8"],["26cde41f.49fbfc"]]},{"id":"cc430bb6.b4f318","type":"change","z":"5a08b38d.d6a17c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"LuzNegraValen","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":600,"wires":[["dc347307.3f164"]]},{"id":"f9d6fbfd.4a60a8","type":"function","z":"5a08b38d.d6a17c","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":700,"wires":[["cc430bb6.b4f318","654ae30e.34263c"]]},{"id":"9b8f4570.c182a8","type":"link in","z":"5a08b38d.d6a17c","name":"Toggle Velador","links":["7ebac973.5a9558"],"x":260,"y":100,"wires":[["f3a7aa24.af0ee8"]]},{"id":"3ad2a028.d8585","type":"change","z":"bb63d718.931208","name":"","rules":[{"t":"set","p":"TeclaApagado","pt":"global","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":1080,"wires":[[]]},{"id":"69460f1f.3024b","type":"change","z":"bb63d718.931208","name":"","rules":[{"t":"set","p":"TeclaApagadoDoble","pt":"global","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1100,"wires":[[]]},{"id":"ee42a323.d6201","type":"change","z":"235e5af0.561006","name":"","rules":[{"t":"set","p":"TeclaApagadoRF","pt":"global","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1120,"y":980,"wires":[[]]},{"id":"9f4448d8.e51c28","type":"link in","z":"5a08b38d.d6a17c","name":"Toggle Lus Negra Valen","links":["19339ec5.32dd41"],"x":240,"y":640,"wires":[["43762971.b1d698"]]},{"id":"d4daef37.98fb1","type":"link in","z":"5a08b38d.d6a17c","name":"Toggle Lus Negra Nenes","links":["16cf29a4.1648a6"],"x":195,"y":360,"wires":[["b7267975.0093e8"]]},{"id":"16cf29a4.1648a6","type":"link out","z":"235e5af0.561006","name":"","links":["d4daef37.98fb1"],"x":815,"y":980,"wires":[]},{"id":"19339ec5.32dd41","type":"link out","z":"235e5af0.561006","name":"","links":["9f4448d8.e51c28"],"x":835,"y":1160,"wires":[]},{"id":"a8e66c52.93cde","type":"mqtt out","z":"d4cc4a57.a7caa8","name":"","topic":"Arduino/PBLiving/in/RF433/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1320,"y":720,"wires":[],"inputLabels":["kkl"]},{"id":"904c7164.648af","type":"ui_slider","z":"c2cec058.34604","name":"","label":"Ventilador Techo","tooltip":"","group":"5635ed61.b910e4","order":6,"width":0,"height":0,"passthru":false,"outs":"end","topic":"","min":0,"max":"3","step":1,"x":480,"y":360,"wires":[["9bc1443b.076e08"]]},{"id":"9bc1443b.076e08","type":"switch","z":"c2cec058.34604","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":690,"y":360,"wires":[["ccc5d6a.35e4d28"],["9c04ad3a.ad60b"],["55bd038b.95ba2c"],["1cfbaaef.5bca15"]]},{"id":"1cfbaaef.5bca15","type":"change","z":"c2cec058.34604","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"01100101011010010110100101100110010101010110011002:292,652,6432,0,0,0,0,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":420,"wires":[["f24ba687.d1d3a8"]]},{"id":"ccc5d6a.35e4d28","type":"change","z":"c2cec058.34604","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"01100101010101010110100101011001010101010101010102:276,668,6436,0,0,0,0,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":300,"wires":[["f24ba687.d1d3a8"]]},{"id":"9c04ad3a.ad60b","type":"change","z":"c2cec058.34604","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"01100101011001100110100101101001010101010110100102:288,656,6444,0,0,0,0,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":340,"wires":[["f24ba687.d1d3a8"]]},{"id":"55bd038b.95ba2c","type":"change","z":"c2cec058.34604","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"01101001101010010110010110011010010110100101011002:292,648,6448,0,0,0,0,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":380,"wires":[["f24ba687.d1d3a8"]]},{"id":"f24ba687.d1d3a8","type":"mqtt out","z":"c2cec058.34604","name":"","topic":"Arduino/PBLiving/in/RF433/RAW","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1300,"y":320,"wires":[],"inputLabels":["kkl"]},{"id":"79f23766.e08058","type":"ui_button","z":"c2cec058.34604","name":"","group":"5635ed61.b910e4","order":1,"width":"6","height":"1","passthru":true,"label":"Luz","tooltip":"","color":"","bgcolor":"","icon":"","payload":"01100101011001010110100101101010010101010110101002:288,652,6452,0,0,0,0 ","payloadType":"str","topic":"","x":750,"y":160,"wires":[["f24ba687.d1d3a8"]]},{"id":"477c7967.474848","type":"link in","z":"c2cec058.34604","name":"Luz","links":["a81689ea.d25ec8","c2d0d04e.638f3","f6676648.5e2528","80a4aa19.c81498"],"x":575,"y":220,"wires":[["79f23766.e08058"]]},{"id":"3aab3cc2.cf38a4","type":"link in","z":"c2cec058.34604","name":"Apagar Todo","links":["44791da0.fb09b4","635d4c21.47ae94"],"x":135,"y":160,"wires":[["67e661d7.f9409","ef0e5931.09d2d8"]]},{"id":"b65f8307.4fd6a","type":"mqtt out","z":"57b26073.47916","name":"Luz Escritorio (30)","topic":"Arduino/PBTablero/in/Relay/30","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1550,"y":760,"wires":[],"inputLabels":["kkl"]},{"id":"760fbbe.8255644","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/PBTablero/out/IP","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1090,"y":760,"wires":[[]]},{"id":"e7580167.14c41","type":"mqtt out","z":"c2cec058.34604","name":"Luz Escritorio (30)","topic":"Arduino/PBTablero/in/Relay/30","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1090,"y":40,"wires":[],"inputLabels":["kkl"]},{"id":"9eb6ec73.f910a","type":"trigger","z":"c2cec058.34604","name":"","op1":"0","op2":"1","op1type":"str","op2type":"str","duration":"1","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":820,"y":40,"wires":[["e7580167.14c41"]]},{"id":"a7101ea8.d055c","type":"trigger","z":"c2cec058.34604","name":"","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"4","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":760,"y":80,"wires":[["79f23766.e08058"]]},{"id":"67e661d7.f9409","type":"ui_button","z":"c2cec058.34604","name":"","group":"5635ed61.b910e4","order":8,"width":0,"height":0,"passthru":true,"label":"Apagar Ventilador","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":290,"y":240,"wires":[["77fc56d8.e38898"]]},{"id":"77fc56d8.e38898","type":"change","z":"c2cec058.34604","name":"apagar","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":260,"wires":[["904c7164.648af","9bc1443b.076e08"]]},{"id":"a81689ea.d25ec8","type":"link out","z":"bb63d718.931208","name":"","links":["477c7967.474848"],"x":1535,"y":720,"wires":[]},{"id":"44791da0.fb09b4","type":"link out","z":"c5b2ea55.84d058","name":"","links":["3aab3cc2.cf38a4"],"x":995,"y":60,"wires":[]},{"id":"31e821c6.90385e","type":"link out","z":"c5b2ea55.84d058","name":"","links":[],"x":1260,"y":80,"wires":[]},{"id":"96795606.96daf8","type":"bigtimer","z":"d0c77eb4.886e7","outtopic":"","outpayload1":"1","outpayload2":"","name":"Big Timer","comment":"","lat":"-34.64793","lon":"-58.37805","starttime":"525","endtime":1425,"starttime2":0,"endtime2":0,"startoff":0,"endoff":0,"startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":1440,"sun":false,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":false,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"repeat":false,"atstart":true,"odd":false,"even":false,"x":1080,"y":40,"wires":[["849b3d9f.dee7d"],[],[]]},{"id":"e65da136.aa8ee","type":"switch","z":"75f22ec1.216f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"CLICK","vt":"str"},{"t":"eq","v":"LONGPRESSSTART","vt":"str"},{"t":"eq","v":"DOUBLECLICK","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":330,"y":500,"wires":[["f12c3ac9.7a4288"],[],[]]},{"id":"3b6ab568.c5be6a","type":"switch","z":"75f22ec1.216f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"DOUBLECLICK","vt":"str"},{"t":"eq","v":"CLICK","vt":"str"},{"t":"eq","v":"LONGPRESSSTART","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":290,"y":380,"wires":[["1ec50b6c.cdcaf5"],["9b70fc68.7aae3"],[]]},{"id":"1cd68a04.a22df6","type":"debug","z":"75f22ec1.216f","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1720,"y":720,"wires":[]},{"id":"ba28b51f.63add8","type":"plex-ws-playing","z":"d0b4c293.95815","name":"PLex","server":"1cabbab6.955e55","allowUpdates":false,"filters":[],"x":130,"y":160,"wires":[["93e6d9f7.cd0188","7f36a4d9.c230fc"]]},{"id":"93e6d9f7.cd0188","type":"debug","z":"d0b4c293.95815","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":570,"y":80,"wires":[]},{"id":"7f36a4d9.c230fc","type":"switch","z":"d0b4c293.95815","name":"","property":"session.Player.address","propertyType":"msg","rules":[{"t":"eq","v":"127.0.0.1","vt":"str"},{"t":"eq","v":"192.168.2.188","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":350,"y":220,"wires":[[],["ccb4372b.9449f8","69416d5e.ec1474"]],"outputLabels":["Compu","TV Living"]},{"id":"ccb4372b.9449f8","type":"switch","z":"d0b4c293.95815","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"paused","vt":"str"},{"t":"eq","v":"playing","vt":"str"},{"t":"eq","v":"stoped","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":470,"y":360,"wires":[["80a085bb.35e4d8"],["bc82ac7c.b92bf"],["80a085bb.35e4d8"]]},{"id":"c2c9232c.ef286","type":"function","z":"75f22ec1.216f","name":"Escena","func":"msg.mode = \"FILL\";\nmsg.currLed = 99;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed ,true);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",msg.payload);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",500);\nnode.send(msg);\n","outputs":1,"noerr":0,"x":980,"y":240,"wires":[["b13a0950.189328"]]},{"id":"1ec50b6c.cdcaf5","type":"random","z":"75f22ec1.216f","name":"","low":"1","high":"1024","inte":"true","property":"payload","x":800,"y":280,"wires":[["c2c9232c.ef286"]]},{"id":"9edff31.fa8661","type":"link in","z":"75f22ec1.216f","name":"Colores Random","links":["a73fc1c6.23ab8","6e56b3ee.42e21c","bc82ac7c.b92bf","60ac302e.23f7d"],"x":655,"y":200,"wires":[["1ec50b6c.cdcaf5"]]},{"id":"bc82ac7c.b92bf","type":"link out","z":"d0b4c293.95815","name":"","links":["9edff31.fa8661","e3e3bb8a.052148"],"x":735,"y":360,"wires":[]},{"id":"80a085bb.35e4d8","type":"change","z":"d0b4c293.95815","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":280,"wires":[["dc4431d9.67568"]]},{"id":"dc4431d9.67568","type":"mqtt out","z":"d0b4c293.95815","name":"Luz Living Delante (46)","topic":"Arduino/PBTablero/in/Relay/46","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":930,"y":280,"wires":[],"inputLabels":["kkl"]},{"id":"e3e3bb8a.052148","type":"link in","z":"bb63d718.931208","name":"Apagar Luces Living sin Leds","links":["bc82ac7c.b92bf"],"x":715,"y":480,"wires":[["3da337a9.1afa28"]]},{"id":"69416d5e.ec1474","type":"change","z":"d0b4c293.95815","name":"","rules":[{"t":"set","p":"LivingStatus","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":180,"wires":[[]]},{"id":"ec0ef09c.90a","type":"link in","z":"c5b2ea55.84d058","name":"Modo Cine","links":["5b43e24f.1726fc"],"x":180,"y":520,"wires":[["fce73a35.a51d58"]]},{"id":"5b43e24f.1726fc","type":"link out","z":"230ac56e.bc629a","name":"","links":["ec0ef09c.90a"],"x":295,"y":340,"wires":[]},{"id":"c915f07d.f44ef","type":"debug","z":"75f22ec1.216f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":200,"y":640,"wires":[]},{"id":"60ac302e.23f7d","type":"link out","z":"9bee6473.dc8598","name":"","links":["9edff31.fa8661"],"x":520,"y":1580,"wires":[]},{"id":"2e2f81f0.2ab90e","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":2,"width":0,"height":0,"passthru":true,"label":"Random","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":520,"y":220,"wires":[["1ec50b6c.cdcaf5"]]},{"id":"7e4cc182.69687","type":"switch","z":"d9b60640.843728","name":"Prendido?","property":"AACLivingModo","propertyType":"global","rules":[{"t":"neq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1250,"y":560,"wires":[["6a71ca60.33b304"]]},{"id":"d83b6687.017f08","type":"function","z":"75f22ec1.216f","name":"RefreshUI","func":"flow.set(\"CurrLed\",1);\n","outputs":1,"noerr":0,"x":300,"y":840,"wires":[[]]},{"id":"d20e3bdb.2283e8","type":"mqtt in","z":"e4c6ee16.54f72","name":"Luz Escritorio","topic":"NodeMcu/PCAmbilight/out/Sensores/Analog/0","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":90,"y":220,"wires":[["3495ee8a.683f82","835d8e35.1e9a4"]]},{"id":"3495ee8a.683f82","type":"ui_level","z":"e4c6ee16.54f72","group":"39827c21.42a8c4","order":1,"width":0,"height":0,"name":"","label":"Luz Escritorio","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":"1024","segWarn":"","segHigh":"","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":330,"y":120,"wires":[]},{"id":"835d8e35.1e9a4","type":"switch","z":"e4c6ee16.54f72","name":"","property":"payload","propertyType":"msg","rules":[{"t":"lt","v":"220","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":170,"y":280,"wires":[["d50ddd49.ca73d"],["f1d87f02.c6e1"]],"outputLabels":["Luz Apagada","Luz Prendida"]},{"id":"f05c6b13.a57698","type":"change","z":"e4c6ee16.54f72","name":"Luz Apagada","rules":[{"t":"set","p":"LuzEscritorio","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":530,"y":240,"wires":[["17e3b56d.b05fab"]]},{"id":"7e91bc82.a95fc4","type":"change","z":"e4c6ee16.54f72","name":"Luz Prendida","rules":[{"t":"set","p":"LuzEscritorio","pt":"global","to":"true","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"255","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":530,"y":300,"wires":[["f9e8ab62.0406d8"]]},{"id":"ca66185d.810e38","type":"switch","z":"bb63d718.931208","name":"Es de Noche?","property":"EsDeNoche","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1220,"y":680,"wires":[["b4dffb05.196758"]],"outputLabels":["Luz Apagada"]},{"id":"b4dffb05.196758","type":"switch","z":"bb63d718.931208","name":"Luz Escritorio Prendida","property":"LuzEscritorio","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1450,"y":660,"wires":[["a81689ea.d25ec8"]],"outputLabels":["Luz Apagada"]},{"id":"e18a440.6dac9c","type":"mqtt out","z":"e4c6ee16.54f72","name":"Strip 1","topic":"NodeMcu/PCAmbilight/in/WSSTRIP/0/BRIGHTNESS","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1270,"y":220,"wires":[],"inputLabels":["kkl"]},{"id":"3c6fac39.103794","type":"ui_slider","z":"e4c6ee16.54f72","name":"","label":"High Bright","tooltip":"","group":"39827c21.42a8c4","order":4,"width":0,"height":0,"passthru":true,"outs":"all","topic":"NodeMcu/PCAmbilight/in/WSSTRIP/0/BRIGHTNESS","min":0,"max":"255","step":1,"x":710,"y":360,"wires":[["ef3f3128.a97af"]]},{"id":"9e0c9959.590438","type":"ui_button","z":"e4c6ee16.54f72","name":"","group":"39827c21.42a8c4","order":5,"width":0,"height":0,"passthru":false,"label":"AMBILIGHT","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"NodeMcu/PCAmbilight/in/WSSTRIP/0/SERIAL","x":670,"y":700,"wires":[["38eeb135.e2bbce"]]},{"id":"38eeb135.e2bbce","type":"mqtt out","z":"e4c6ee16.54f72","name":"Strip 1","topic":"","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":830,"y":700,"wires":[],"inputLabels":["kkl"]},{"id":"dc312467.c25618","type":"mqtt in","z":"e4c6ee16.54f72","name":"","topic":"NodeMcu/PCAmbilight/out/IP","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":400,"y":540,"wires":[["443c41f4.538e5"]]},{"id":"443c41f4.538e5","type":"function","z":"e4c6ee16.54f72","name":"Noise Milis","func":"msg.topic = msg.topic + \"Sensores/REPORTMILIS\";\nmsg.payload = 800;\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":540,"wires":[["e6343b87.b73908"]]},{"id":"e6343b87.b73908","type":"mqtt out","z":"e4c6ee16.54f72","name":"","topic":"NodeMcu/PCAmbilight/in/Sensores/REPORTMILIS","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":930,"y":540,"wires":[]},{"id":"be1f2066.8ae45","type":"ui_slider","z":"e4c6ee16.54f72","name":"","label":"Low Bright","tooltip":"","group":"39827c21.42a8c4","order":3,"width":0,"height":0,"passthru":true,"outs":"all","topic":"NodeMcu/PCAmbilight/in/WSSTRIP/0/BRIGHTNESS","min":0,"max":"255","step":1,"x":730,"y":160,"wires":[["fe290ce5.52db7"]]},{"id":"fe290ce5.52db7","type":"change","z":"e4c6ee16.54f72","name":"","rules":[{"t":"set","p":"LowBright","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":160,"wires":[["836f1801.88e2d8"]]},{"id":"ef3f3128.a97af","type":"change","z":"e4c6ee16.54f72","name":"","rules":[{"t":"set","p":"HighBright","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":360,"wires":[["a7e67726.00a328"]]},{"id":"17e3b56d.b05fab","type":"change","z":"e4c6ee16.54f72","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"LowBright","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":240,"wires":[["e5134c05.f18d4"]]},{"id":"f9e8ab62.0406d8","type":"change","z":"e4c6ee16.54f72","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"HighBright","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":300,"wires":[["e5134c05.f18d4"]]},{"id":"fe007795.19f688","type":"inject","z":"e4c6ee16.54f72","name":"","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"20","payloadType":"num","x":750,"y":100,"wires":[["fe290ce5.52db7"]]},{"id":"c31178f.f985088","type":"inject","z":"e4c6ee16.54f72","name":"","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"255","payloadType":"num","x":730,"y":460,"wires":[["ef3f3128.a97af"]]},{"id":"d50ddd49.ca73d","type":"switch","z":"e4c6ee16.54f72","name":"Estaba Prendida?","property":"LuzEscritorio","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":240,"wires":[["f05c6b13.a57698"]],"outputLabels":["Luz Apagada"]},{"id":"f1d87f02.c6e1","type":"switch","z":"e4c6ee16.54f72","name":"Estaba Apagada?","property":"LuzEscritorio","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":300,"wires":[["7e91bc82.a95fc4"]],"outputLabels":["Luz Apagada"]},{"id":"836f1801.88e2d8","type":"switch","z":"e4c6ee16.54f72","name":"Esta Apagada?","property":"LuzEscritorio","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":1160,"y":160,"wires":[["17e3b56d.b05fab"]],"outputLabels":["Luz Apagada"]},{"id":"a7e67726.00a328","type":"switch","z":"e4c6ee16.54f72","name":"Esta Prendida?","property":"LuzEscritorio","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1160,"y":360,"wires":[["f9e8ab62.0406d8"]],"outputLabels":["Luz Apagada"]},{"id":"5779b36f.0fd29c","type":"ui_slider","z":"e4c6ee16.54f72","name":"","label":"Bright","tooltip":"","group":"39827c21.42a8c4","order":2,"width":0,"height":0,"passthru":false,"outs":"all","topic":"","min":0,"max":"255","step":1,"x":250,"y":360,"wires":[["1bffa895.e0be07","ae589b79.a45db8"]]},{"id":"1bffa895.e0be07","type":"switch","z":"e4c6ee16.54f72","name":"Luz Prendida?","property":"LuzEscritorio","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":460,"y":380,"wires":[["be1f2066.8ae45"],["3c6fac39.103794"]],"outputLabels":["Luz Apagada",""]},{"id":"654ae30e.34263c","type":"function","z":"5a08b38d.d6a17c","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":420,"wires":[["e66ec2fb.48ffb","879d9fe.4c7a66"]]},{"id":"3f96eee1.cba962","type":"ui_level","z":"2bcc0ccb.cd26a4","group":"cd9fc1f7.18d92","order":2,"width":0,"height":0,"name":"","label":"Ext Temp","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":"30","segWarn":"","segHigh":"","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":510,"y":820,"wires":[]},{"id":"cd8d6ff1.2bb47","type":"ui_level","z":"d9b60640.843728","group":"cd9fc1f7.18d92","order":2,"width":0,"height":0,"name":"","label":"Int Temp","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":"30","segWarn":"","segHigh":"","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":870,"y":1080,"wires":[]},{"id":"e7dda238.061c5","type":"mqtt in","z":"930c94d9.38ece8","name":"PBTablero Temperatura (DHT 6)","topic":"Arduino/PBTablero/out/DHT/1/Temperatura","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":210,"y":1020,"wires":[["6b583295.d92d0c","a7769058.3f16c","4fc0e3c7.891f7c"]]},{"id":"6b583295.d92d0c","type":"aggregator","z":"930c94d9.38ece8","name":"","topic":"","intervalCount":"1","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":490,"y":1100,"wires":[["33856e00.23cc92"]]},{"id":"a7769058.3f16c","type":"ui_level","z":"930c94d9.38ece8","group":"93dce1d.02bb22","order":5,"width":"0","height":"0","name":"Temp 12V","label":"Temp 12v","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"20","max":"45","segWarn":"31","segHigh":"35","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"off","shape":"1","colorschema":"rainbow","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":580,"y":1020,"wires":[]},{"id":"33856e00.23cc92","type":"ui_chart","z":"930c94d9.38ece8","name":"","group":"93dce1d.02bb22","order":11,"width":0,"height":0,"label":"Temp 12v","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"25","ymax":"40","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":780,"y":1100,"wires":[[]]},{"id":"c3b202ae.bfb8e","type":"mqtt in","z":"930c94d9.38ece8","name":"PBTablero Humedad (DHT 6)","topic":"Arduino/PBTablero/out/DHT/1/Humedad","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":180,"y":1140,"wires":[["d21d8f9.ae3497"]]},{"id":"d21d8f9.ae3497","type":"ui_level","z":"930c94d9.38ece8","group":"93dce1d.02bb22","order":5,"width":"0","height":"0","name":"Temp 12V","label":"Hum 12v","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"100","segWarn":"31","segHigh":"35","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"off","shape":"1","colorschema":"rainbow","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":500,"y":1160,"wires":[]},{"id":"4fc0e3c7.891f7c","type":"ui_level","z":"930c94d9.38ece8","group":"cd9fc1f7.18d92","order":2,"width":0,"height":0,"name":"","label":"Int Tablero Temp","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"10","max":"30","segWarn":"","segHigh":"","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":470,"y":1060,"wires":[]},{"id":"c38a2c87.7f4ac","type":"function","z":"2bcc0ccb.cd26a4","name":"Redondeo","func":"msg.payload = Math.round(msg.payload * 100) /100\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":980,"wires":[[]]},{"id":"5fb07d40.defb54","type":"rpi-gpio out","z":"28d40fc8.b7186","name":"","pin":"37","set":"","level":"0","freq":"","out":"out","x":500,"y":80,"wires":[]},{"id":"11f36254.79801e","type":"mqtt in","z":"28d40fc8.b7186","name":"","topic":"RPI/out/RAM/Used","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":250,"y":540,"wires":[["32f70647.e2356a"]]},{"id":"8efa92.3150757","type":"ui_level","z":"28d40fc8.b7186","group":"bee8228d.0d274","order":2,"width":0,"height":0,"name":"RAM","label":"RAM","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"100","segWarn":"50","segHigh":"75","unit":"%","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"3","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":550,"y":540,"wires":[]},{"id":"32f70647.e2356a","type":"range","z":"28d40fc8.b7186","minin":"0","maxin":"948304","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":420,"y":540,"wires":[["8efa92.3150757"]]},{"id":"c2a646b2.84ea08","type":"ui_button","z":"28d40fc8.b7186","name":"","group":"bee8228d.0d274","order":17,"width":0,"height":0,"passthru":false,"label":"Reboot PI","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":1180,"y":300,"wires":[["861dc1dc.0cd14"]]},{"id":"861dc1dc.0cd14","type":"exec","z":"28d40fc8.b7186","command":"sudo reboot","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1390,"y":300,"wires":[[],[],[]]},{"id":"ea17c79.2464e38","type":"mqtt in","z":"28d40fc8.b7186","name":"","topic":"RPI/NodeRed/out/lastseen/epoch","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":250,"y":400,"wires":[["e64c4eb8.aa43f"]]},{"id":"e64c4eb8.aa43f","type":"trigger","z":"28d40fc8.b7186","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"5","extend":true,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":480,"y":400,"wires":[["3f2a27b0.4f9818"]]},{"id":"3f2a27b0.4f9818","type":"ui_led","z":"28d40fc8.b7186","order":7,"group":"f177c7aa.290658","width":0,"height":0,"label":"MQTT","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"MQTT","x":610,"y":400,"wires":[]},{"id":"ba0aba12.4702a8","type":"inject","z":"28d40fc8.b7186","name":"Cada 3s","repeat":"3","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":840,"y":500,"wires":[["e14fd5ae.e91c78","a4c6cd6f.8e0a3","da3a4ead.6294d","bcf1c09d.95b88","ee1642b7.7f52f"]]},{"id":"e14fd5ae.e91c78","type":"mqtt out","z":"28d40fc8.b7186","name":"LastSeen","topic":"RPI/NodeRed/out/lastseen/epoch","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1040,"y":480,"wires":[]},{"id":"9bd50181.84b24","type":"mqtt out","z":"28d40fc8.b7186","name":"","topic":"RPI/out/cpu","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1270,"y":540,"wires":[]},{"id":"888aade4.97fe9","type":"aggregator","z":"28d40fc8.b7186","name":"","topic":"","intervalCount":"3","intervalUnits":"m","submitIncompleteInterval":true,"aggregationType":"median","x":1270,"y":600,"wires":[["db99e97a.c90e18"]]},{"id":"a4c6cd6f.8e0a3","type":"cpu","z":"28d40fc8.b7186","name":"","msgCore":false,"msgOverall":true,"msgArray":false,"msgTemp":false,"x":1050,"y":540,"wires":[["9bd50181.84b24","888aade4.97fe9","2862a209.35466e"]]},{"id":"2862a209.35466e","type":"ui_level","z":"28d40fc8.b7186","group":"bee8228d.0d274","order":1,"width":0,"height":0,"name":"CPU","label":"CPU","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"%","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"off","shape":"1","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"5000","x":1250,"y":480,"wires":[]},{"id":"da3a4ead.6294d","type":"trigger","z":"28d40fc8.b7186","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"50","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":1050,"y":440,"wires":[[]]},{"id":"bcf1c09d.95b88","type":"mqtt out","z":"28d40fc8.b7186","name":"MXQ Stop Node","topic":"MXQ/in/NODESTOP","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1060,"y":580,"wires":[]},{"id":"db99e97a.c90e18","type":"ui_chart","z":"28d40fc8.b7186","name":"","group":"bee8228d.0d274","order":14,"width":0,"height":0,"label":"CPU","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1410,"y":600,"wires":[[]]},{"id":"1a5fe516.39b1ab","type":"aggregator","z":"28d40fc8.b7186","name":"","topic":"","intervalCount":"3","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":430,"y":600,"wires":[["6ca9d3ad.f7ffac"]]},{"id":"a0443f5b.163e9","type":"ui_level","z":"28d40fc8.b7186","group":"bee8228d.0d274","order":4,"width":0,"height":0,"name":"Temp","label":"Temp CPU","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"30","max":"90","segWarn":"58","segHigh":"64","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"property":"payload","peaktime":"3000","x":610,"y":780,"wires":[]},{"id":"6ca9d3ad.f7ffac","type":"ui_chart","z":"28d40fc8.b7186","name":"","group":"bee8228d.0d274","order":15,"width":0,"height":0,"label":"Temp CPU","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":630,"y":600,"wires":[[]]},{"id":"74a5288d.225408","type":"mqtt in","z":"28d40fc8.b7186","name":"","topic":"RPI/out/BMP/Temp","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":230,"y":460,"wires":[["1124d336.17a26d","915219d.25efce8"]]},{"id":"1124d336.17a26d","type":"aggregator","z":"28d40fc8.b7186","name":"","topic":"","intervalCount":"3","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"median","x":430,"y":460,"wires":[["d6261367.798e2"]]},{"id":"d6261367.798e2","type":"ui_chart","z":"28d40fc8.b7186","name":"","group":"bee8228d.0d274","order":16,"width":0,"height":0,"label":"Temp Case","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"40","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":590,"y":460,"wires":[[]]},{"id":"915219d.25efce8","type":"ui_level","z":"28d40fc8.b7186","group":"bee8228d.0d274","order":5,"width":0,"height":0,"name":"Temp","label":"Temp Case","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"50","segWarn":"20","segHigh":"30","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"peaktime":"3000","x":570,"y":500,"wires":[]},{"id":"ccabaf8c.04ad5","type":"mqtt in","z":"57b26073.47916","name":"NodeMcu/PCAmbilight/out/LastSeen","topic":"NodeMcu/PCAmbilight/out/LastSeen","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":200,"y":1060,"wires":[["826a1b98.611128","ee723a16.8f8b58"]]},{"id":"29e71a00.2b2786","type":"ui_text","z":"57b26073.47916","group":"4672a874.eb0c98","order":11,"width":0,"height":0,"name":"Ambilight","label":"LastSeen","format":"{{msg.LastSeen}}","layout":"row-spread","x":600,"y":1040,"wires":[]},{"id":"ee723a16.8f8b58","type":"trigger","z":"57b26073.47916","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"7","extend":true,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":460,"y":1080,"wires":[["a7e9b8c1.5207f8"]]},{"id":"a7e9b8c1.5207f8","type":"ui_led","z":"57b26073.47916","order":10,"group":"4672a874.eb0c98","width":0,"height":0,"label":"Ambilight OK","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Ambilight OK","x":610,"y":1080,"wires":[]},{"id":"826a1b98.611128","type":"function","z":"57b26073.47916","name":"LastSeen","func":"msg.LastSeen = new Date();\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1040,"wires":[["29e71a00.2b2786"]]},{"id":"2504ea4f.d34ea6","type":"ui_button","z":"57b26073.47916","name":"","group":"4672a874.eb0c98","order":13,"width":0,"height":0,"passthru":false,"label":"Reboot Node Ambilight","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"NodeMcu/PiezaNuestra/in/RESET","x":1360,"y":440,"wires":[["aaed4da3.1d519"]]},{"id":"4fa119a3.838b38","type":"inject","z":"57b26073.47916","name":"Cada 5s","repeat":"5","crontab":"","once":false,"onceDelay":"120","topic":"NodeMcu/PiezaNenes/in/PING","payload":"1","payloadType":"str","x":1120,"y":960,"wires":[["4b0f1431.d1df4c","4e29853f.de5c8c","98cc875f.fe35b8","f55d6e64.9dd17","cf3c1a3.1f63ae8","f37ef34e.7f0d8","52b2be0d.d7e","be2419e9.97d178"]]},{"id":"bf4c93fa.6b62e","type":"mqtt out","z":"57b26073.47916","name":"","topic":"","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1530,"y":960,"wires":[],"inputLabels":["kkl"]},{"id":"4b0f1431.d1df4c","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"PiezaNenesPing","pt":"flow","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"NodeMcu/PiezaNenes/in/PING","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":900,"wires":[["bf4c93fa.6b62e"]]},{"id":"2cdc476c.ba5288","type":"function","z":"57b26073.47916","name":"","func":"msg.payload = Date.now() -  flow.get(\"AmbiLightPing\");\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":1360,"wires":[["8cf981f5.d4a7b"]]},{"id":"4e29853f.de5c8c","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"AmbiLightPing","pt":"flow","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"NodeMcu/PCAmbilight/in/PING","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":940,"wires":[["bf4c93fa.6b62e"]]},{"id":"98cc875f.fe35b8","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"PBTableroPing","pt":"flow","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"Arduino/PBTablero/in/PING","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":980,"wires":[["bf4c93fa.6b62e"]]},{"id":"f55d6e64.9dd17","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"PBLivingPing","pt":"flow","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"Arduino/PBLiving/in/PING","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":1020,"wires":[["bf4c93fa.6b62e"]]},{"id":"8cf981f5.d4a7b","type":"ui_level","z":"57b26073.47916","group":"4672a874.eb0c98","order":12,"width":0,"height":0,"name":"Latencia AmbiLight","label":"Latencia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1000","segWarn":"200","segHigh":"500","unit":"ms","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":1550,"y":1360,"wires":[]},{"id":"32e983e6.2c255c","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/PiezaNenes/out/PONG","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1150,"y":1320,"wires":[["a71dd013.a7c0a"]]},{"id":"a71dd013.a7c0a","type":"function","z":"57b26073.47916","name":"","func":"msg.payload = Date.now() -  flow.get(\"PiezaNenesPing\");\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":1320,"wires":[["9864c21b.8951b"]]},{"id":"9864c21b.8951b","type":"ui_level","z":"57b26073.47916","group":"4672a874.eb0c98","order":3,"width":0,"height":0,"name":"Latencia PiezaNenes","label":"Latencia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1000","segWarn":"200","segHigh":"500","unit":"ms","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":1560,"y":1320,"wires":[]},{"id":"c2d663b.1ba67a","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/PBTablero/out/PONG","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1140,"y":1400,"wires":[["964a539.d772eb"]]},{"id":"964a539.d772eb","type":"function","z":"57b26073.47916","name":"","func":"msg.payload = Date.now() -  flow.get(\"PBTableroPing\");\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":1400,"wires":[["408acb39.291204"]]},{"id":"408acb39.291204","type":"ui_level","z":"57b26073.47916","group":"b89f1435.0c4bf8","order":12,"width":0,"height":0,"name":"Latencia PBTablero","label":"Latencia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1000","segWarn":"200","segHigh":"500","unit":"ms","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":1550,"y":1400,"wires":[]},{"id":"ab278fc5.e862b","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/PBLiving/out/PONG","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1140,"y":1440,"wires":[["7a24bd9.1753644"]]},{"id":"7a24bd9.1753644","type":"function","z":"57b26073.47916","name":"","func":"msg.payload = Date.now() -  flow.get(\"PBLivingPing\");\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":1440,"wires":[["161e3376.21241d"]]},{"id":"161e3376.21241d","type":"ui_level","z":"57b26073.47916","group":"b89f1435.0c4bf8","order":4,"width":0,"height":0,"name":"Latencia PBLiving","label":"Latencia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1000","segWarn":"200","segHigh":"500","unit":"ms","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":1550,"y":1440,"wires":[]},{"id":"12a042ce.4bb26d","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"PbTableroOk","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":900,"wires":[[]]},{"id":"d11b7e40.86cf3","type":"ui_button","z":"28d40fc8.b7186","name":"","group":"5635ed61.b910e4","order":9,"width":0,"height":0,"passthru":false,"label":"pip","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":110,"y":60,"wires":[["cc4efe3d.11151"]]},{"id":"d540d9c.9897428","type":"link in","z":"28d40fc8.b7186","name":"Beep 50ms","links":["a6fba51c.f0fcb8","121ff899.078827","8a1c847a.5042d8"],"x":175,"y":100,"wires":[["cc4efe3d.11151"]]},{"id":"52b0c328.15058c","type":"link in","z":"28d40fc8.b7186","name":"beep 100ms","links":[],"x":175,"y":140,"wires":[["bb1ee6c2.7f9b38"]]},{"id":"9ed01947.124318","type":"ui_button","z":"28d40fc8.b7186","name":"","group":"5635ed61.b910e4","order":10,"width":0,"height":0,"passthru":false,"label":"pip 2","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":110,"y":180,"wires":[["bb1ee6c2.7f9b38"]]},{"id":"bb1ee6c2.7f9b38","type":"trigger","z":"28d40fc8.b7186","name":"","op1":"0","op2":"1","op1type":"str","op2type":"str","duration":"100","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":320,"y":120,"wires":[["5fb07d40.defb54"]]},{"id":"d2bbe6b4.504618","type":"rpi-gpio in","z":"28d40fc8.b7186","name":"Tecla","pin":"35","intype":"down","debounce":"200","read":false,"x":950,"y":820,"wires":[["c2d0d04e.638f3"]]},{"id":"dcca4ed3.3f4ab","type":"rpi-gpio in","z":"28d40fc8.b7186","name":"Encoder 2","pin":"31","intype":"down","debounce":"25","read":false,"x":820,"y":740,"wires":[["e655f0f4.5900b"]]},{"id":"c7b5b2c4.f7a99","type":"rpi-gpio in","z":"28d40fc8.b7186","name":"Encoder 1","pin":"32","intype":"down","debounce":"25","read":false,"x":820,"y":660,"wires":[["7445b34f.e94eac"]]},{"id":"2082a710.acd9b8","type":"rpi-gpio in","z":"28d40fc8.b7186","name":"Encoder Click","pin":"33","intype":"down","debounce":"200","read":false,"x":1390,"y":880,"wires":[["244d7438.1020ac"]]},{"id":"7445b34f.e94eac","type":"change","z":"28d40fc8.b7186","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"CLK","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":660,"wires":[["3799374b.dae248"]]},{"id":"e655f0f4.5900b","type":"change","z":"28d40fc8.b7186","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"DT","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":740,"wires":[["3799374b.dae248"]]},{"id":"3799374b.dae248","type":"function","z":"28d40fc8.b7186","name":"","func":"var CLK;\nif (global.get('RPIEncoder') == null)\n{\n    global.set('RPIEncoder',100);\n}\n\nif ((msg['topic']) == 'CLK') {\n  CLK = (msg['payload']);\n  if (context.keys().includes('DT')) {\n    if (CLK != (context.get('DT'))) {\n      msg['payload'] = 1;\n        global.set('RPIEncoder', global.get('RPIEncoder') + 1);\n        \n    } else {\n      msg['payload'] = -1;\n        global.set('RPIEncoder', global.get('RPIEncoder') - 1);\n    }\n  }\n} else {\n  context.set('DT', (msg['payload']));\n}\n\nif (global.get('RPIEncoder') > 24) \n        global.set('RPIEncoder',  24);\nif (global.get('RPIEncoder') < 0) \n        global.set('RPIEncoder',  0);\n\nmsg.payload = global.get('RPIEncoder');\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":700,"wires":[["f2009e64.1fd0b","7ca1fb6a.2aa944"]]},{"id":"87e8b215.f7807","type":"mqtt out","z":"fc481a7.a3f47e8","name":"","topic":"NodeMcu/RPILeds/in/WSSTRIP/0/LED","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1130,"y":160,"wires":[]},{"id":"9de6eb68.6ef4a8","type":"function","z":"fc481a7.a3f47e8","name":"","func":"msg.originalTopic = \"NodeMcu/RPILeds/in/WSSTRIP/0/LED/\";\nmsg.payload = msg.rgb + \",\" + msg.led;\nmsg.topic = msg.originalTopic + msg.led;\n\nif (msg.delay == null)\n{ msg.delay = 50\n    \n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":500,"y":180,"wires":[["898b8727.821b68"]]},{"id":"898b8727.821b68","type":"trigger","z":"fc481a7.a3f47e8","name":"","op1":"","op2":"-1","op1type":"pay","op2type":"str","duration":"50","extend":false,"overrideDelay":true,"units":"ms","reset":"","bytopic":"topic","topic":"topic","outputs":1,"x":670,"y":180,"wires":[["3463fbfe.de2a04"]]},{"id":"3463fbfe.de2a04","type":"function","z":"fc481a7.a3f47e8","name":"","func":"msg.topic = msg.originalTopic;\nif (msg.payload == \"-1\")\n    msg.payload = \"0,0,0,\" + msg.led;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":870,"y":180,"wires":[["87e8b215.f7807"]]},{"id":"44e2e889.d40c18","type":"change","z":"fc481a7.a3f47e8","name":"","rules":[{"t":"set","p":"led","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"rgb","pt":"msg","to":"255,0,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":260,"wires":[["9de6eb68.6ef4a8"]]},{"id":"f77e28c7.eaa048","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/RPILeds/out/PONG","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1140,"y":1480,"wires":[["f16f3556.89e4f8"]]},{"id":"f16f3556.89e4f8","type":"function","z":"57b26073.47916","name":"","func":"msg.payload = Date.now() -  flow.get(\"RPILedsPing\");\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":1480,"wires":[["c0c5c4e0.d59f08"]]},{"id":"c0c5c4e0.d59f08","type":"ui_level","z":"57b26073.47916","group":"4672a874.eb0c98","order":7,"width":0,"height":0,"name":"Latencia RPI Leds","label":"Latencia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1000","segWarn":"200","segHigh":"500","unit":"ms","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":1550,"y":1480,"wires":[]},{"id":"cf3c1a3.1f63ae8","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"RPILedsPing","pt":"flow","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"NodeMcu/RPILeds/in/PING","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":860,"wires":[["bf4c93fa.6b62e"]]},{"id":"afee899c.193878","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/RPILeds/out/LastSeen","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":190,"y":1160,"wires":[["e059d2ea.4b1ce","3aa2aa80.d30006"]]},{"id":"3aa2aa80.d30006","type":"function","z":"57b26073.47916","name":"LastSeen","func":"msg.LastSeen = new Date();\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1140,"wires":[["c98ed77f.0e51d8"]]},{"id":"e059d2ea.4b1ce","type":"trigger","z":"57b26073.47916","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"7","extend":true,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":460,"y":1180,"wires":[["96bcce98.f8fa9"]]},{"id":"96bcce98.f8fa9","type":"ui_led","z":"57b26073.47916","order":5,"group":"4672a874.eb0c98","width":0,"height":0,"label":"RPI Leds Ok","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"RPILeds OK","x":610,"y":1180,"wires":[]},{"id":"c98ed77f.0e51d8","type":"ui_text","z":"57b26073.47916","group":"4672a874.eb0c98","order":6,"width":0,"height":0,"name":"RPI Leds","label":"LastSeen","format":"{{msg.LastSeen}}","layout":"row-spread","x":600,"y":1140,"wires":[]},{"id":"a79e7e70.92c04","type":"ui_button","z":"57b26073.47916","name":"","group":"4672a874.eb0c98","order":8,"width":0,"height":0,"passthru":false,"label":"Reboot RPILeds","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"NodeMcu/RPILeds/in/RESET","x":1340,"y":480,"wires":[["aaed4da3.1d519"]]},{"id":"54784600.2f089c","type":"mqtt in","z":"792c9759.e6c028","name":"Buttons Toggle","topic":"+/+/out/Button/+/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":380,"y":360,"wires":[["8dbf6160.be981"]]},{"id":"eb3895a6.281498","type":"mqtt in","z":"792c9759.e6c028","name":"","topic":"Arduino/PBLiving/out/#","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":260,"y":740,"wires":[["c52a7050.21ebe"]]},{"id":"8b08517d.031e4","type":"mqtt in","z":"792c9759.e6c028","name":"","topic":"Arduino/PBTablero/out/#","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":270,"y":880,"wires":[["6324d106.3bdb9"]]},{"id":"e87b7310.ae947","type":"change","z":"792c9759.e6c028","name":"Led 5 (PbTablero)","rules":[{"t":"set","p":"led","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":880,"wires":[["99052d6.bcf21d"]]},{"id":"99052d6.bcf21d","type":"subflow:fc481a7.a3f47e8","z":"792c9759.e6c028","name":"","env":[],"x":1480,"y":200,"wires":[]},{"id":"6324d106.3bdb9","type":"change","z":"792c9759.e6c028","name":"Amarillo","rules":[{"t":"set","p":"rgb","pt":"msg","to":"255,255,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":880,"wires":[["e87b7310.ae947"]]},{"id":"ec52090d.e12d28","type":"mqtt in","z":"792c9759.e6c028","name":"","topic":"Arduino/+/out/Sensores/RF433","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":370,"y":400,"wires":[["e8b8304.ebad8d"]]},{"id":"e8b8304.ebad8d","type":"change","z":"792c9759.e6c028","name":"Azul","rules":[{"t":"set","p":"rgb","pt":"msg","to":"0,0,255","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":380,"wires":[["6dec6232.524ebc"]]},{"id":"c52a7050.21ebe","type":"change","z":"792c9759.e6c028","name":"Amarillo","rules":[{"t":"set","p":"rgb","pt":"msg","to":"255,255,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":740,"wires":[["f8b32466.2cb268"]]},{"id":"f8b32466.2cb268","type":"change","z":"792c9759.e6c028","name":"Led 4 (PbLiving)","rules":[{"t":"set","p":"led","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":760,"wires":[["99052d6.bcf21d"]]},{"id":"8dbf6160.be981","type":"change","z":"792c9759.e6c028","name":"Rojo","rules":[{"t":"set","p":"rgb","pt":"msg","to":"255,0,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":340,"wires":[["6dec6232.524ebc"]]},{"id":"6dec6232.524ebc","type":"change","z":"792c9759.e6c028","name":"Led 3 (Acciones)","rules":[{"t":"set","p":"led","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":320,"wires":[["99052d6.bcf21d"]]},{"id":"3f3336ce.48cd5a","type":"inject","z":"792c9759.e6c028","name":"Cada 3s","repeat":"3","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":360,"y":80,"wires":[["5e6da676.2d53e8"]]},{"id":"5e6da676.2d53e8","type":"change","z":"792c9759.e6c028","name":"Verde","rules":[{"t":"set","p":"rgb","pt":"msg","to":"0,255,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":80,"wires":[["5ca6b47c.93823c"]]},{"id":"5ca6b47c.93823c","type":"change","z":"792c9759.e6c028","name":"Led 0 (Status)","rules":[{"t":"set","p":"led","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1000,"y":100,"wires":[["99052d6.bcf21d"]]},{"id":"e888307f.ee9f5","type":"mqtt in","z":"792c9759.e6c028","name":"Push Buttons","topic":"+/+/out/Button/+/","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":370,"y":300,"wires":[["ce191de1.33978"]]},{"id":"ce191de1.33978","type":"switch","z":"792c9759.e6c028","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"CLICK","vt":"str"},{"t":"eq","v":"LONGPRESSSTART","vt":"str"},{"t":"eq","v":"DOUBLECLICK","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":300,"wires":[["55b6213f.76007"],["55b6213f.76007"],["55b6213f.76007"]]},{"id":"55b6213f.76007","type":"change","z":"792c9759.e6c028","name":"Violeta","rules":[{"t":"set","p":"rgb","pt":"msg","to":"255,0,255","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":300,"wires":[["6dec6232.524ebc"]]},{"id":"ef0e5931.09d2d8","type":"switch","z":"c2cec058.34604","name":"","property":"LuzEscritorio","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":160,"wires":[["79f23766.e08058"]]},{"id":"c35d099a.96c458","type":"ui_switch","z":"c2cec058.34604","name":"","label":"Luz","tooltip":"","group":"5635ed61.b910e4","order":11,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":450,"y":80,"wires":[["79f23766.e08058","670c89a2.db0f58"]]},{"id":"3a050b22.8578a4","type":"link in","z":"c2cec058.34604","name":"Luz Status","links":["a3648552.918ac8"],"x":135,"y":80,"wires":[["5c31a5fe.1c381c"]]},{"id":"a3648552.918ac8","type":"link out","z":"e4c6ee16.54f72","name":"","links":["3a050b22.8578a4"],"x":1055,"y":220,"wires":[]},{"id":"5c31a5fe.1c381c","type":"change","z":"c2cec058.34604","name":"LuzEscritorio","rules":[{"t":"set","p":"payload","pt":"msg","to":"LuzEscritorio","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":80,"wires":[["c35d099a.96c458"]]},{"id":"670c89a2.db0f58","type":"debug","z":"c2cec058.34604","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":590,"y":40,"wires":[]},{"id":"83b0a434.3f9c08","type":"change","z":"e4c6ee16.54f72","name":"","rules":[{"t":"set","p":"RPIEncoder","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":460,"wires":[[]]},{"id":"e5134c05.f18d4","type":"function","z":"e4c6ee16.54f72","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":930,"y":260,"wires":[["e18a440.6dac9c","a3648552.918ac8","5779b36f.0fd29c","2387aeb5.340f52","ae589b79.a45db8"]]},{"id":"5d20e557.76920c","type":"link in","z":"e4c6ee16.54f72","name":"Setear Brillo","links":["eea60d7f.81246"],"x":255,"y":460,"wires":[["1bffa895.e0be07"]]},{"id":"2387aeb5.340f52","type":"trigger","z":"e4c6ee16.54f72","name":"","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"250","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":1180,"y":280,"wires":[["50891afe.650174"]]},{"id":"50891afe.650174","type":"mqtt out","z":"e4c6ee16.54f72","name":"Strip 1","topic":"NodeMcu/PCAmbilight/in/WSSTRIP/0/REFRESH","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1430,"y":280,"wires":[],"inputLabels":["kkl"]},{"id":"eea60d7f.81246","type":"link out","z":"28d40fc8.b7186","name":"","links":["5d20e557.76920c"],"x":1535,"y":820,"wires":[]},{"id":"f2009e64.1fd0b","type":"ui_numeric","z":"28d40fc8.b7186","name":"","label":"numeric","tooltip":"","group":"39827c21.42a8c4","order":5,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"","format":"{{value}}","min":0,"max":"500","step":1,"x":1360,"y":720,"wires":[[]]},{"id":"7ca1fb6a.2aa944","type":"range","z":"28d40fc8.b7186","minin":"0","maxin":"24","minout":"0","maxout":"255","action":"clamp","round":true,"property":"payload","name":"","x":1180,"y":780,"wires":[["eea60d7f.81246"]]},{"id":"ae589b79.a45db8","type":"range","z":"e4c6ee16.54f72","minin":"0","maxin":"255","minout":"0","maxout":"24","action":"clamp","round":true,"property":"payload","name":"","x":1130,"y":420,"wires":[["83b0a434.3f9c08"]]},{"id":"c2d0d04e.638f3","type":"link out","z":"28d40fc8.b7186","name":"","links":["477c7967.474848"],"x":1080,"y":820,"wires":[]},{"id":"7e8728e5.61bc98","type":"link out","z":"28d40fc8.b7186","name":"","links":["f5004db1.03693","cb372c92.8a6be","ac5686ae.027a08"],"x":1680,"y":920,"wires":[]},{"id":"244d7438.1020ac","type":"switch","z":"28d40fc8.b7186","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":1580,"y":900,"wires":[["7e8728e5.61bc98"]]},{"id":"635d4c21.47ae94","type":"link out","z":"d0c77eb4.886e7","name":"","links":["3aab3cc2.cf38a4","f715ce03.d3ebb"],"x":795,"y":340,"wires":[]},{"id":"415bf1d0.adeee","type":"link in","z":"75f22ec1.216f","name":"Set Leds","links":["2c54a59b.10cc1a","3f72ba6a.afb526"],"x":915,"y":140,"wires":[["b13a0950.189328"]]},{"id":"26c79b25.469984","type":"link in","z":"c2cec058.34604","name":"Apagar Ventilador","links":[],"x":255,"y":400,"wires":[["77fc56d8.e38898"]]},{"id":"505b98db.25e2f8","type":"function","z":"75f22ec1.216f","name":"sTROBE","func":"msg.mode = \"STROBE\";\nmsg.currLed = 1;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",120);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",30);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);\n\nmsg.currLed = 2;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",40);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",50);\nflow.set(\"CurrLedMode\"+ msg.currLed,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);\n\nmsg.currLed = 3;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",80);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",70);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);\n\nmsg.currLed = 4;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",20);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",90);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);","outputs":1,"noerr":0,"initialize":"","finalize":"","x":340,"y":1440,"wires":[["3f72ba6a.afb526"]]},{"id":"5bdeb493.761b7c","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":7,"width":0,"height":0,"passthru":false,"label":"Strobe","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":210,"y":1440,"wires":[["505b98db.25e2f8"]]},{"id":"3f72ba6a.afb526","type":"link out","z":"75f22ec1.216f","name":"","links":["415bf1d0.adeee"],"x":780,"y":1500,"wires":[]},{"id":"bbb12dbe.7e71","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":6,"width":0,"height":0,"passthru":false,"label":"Colores 1","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":260,"y":1580,"wires":[["fdcf14f2.1bb3b8"]]},{"id":"fdcf14f2.1bb3b8","type":"function","z":"75f22ec1.216f","name":"Escena","func":"msg.mode = \"FILL\";\nmsg.currLed = 1;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",120);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",120);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);\n\nmsg.currLed = 2;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",40);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",120);\nflow.set(\"CurrLedMode\"+ msg.currLed,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);\n\nmsg.currLed = 3;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",80);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",120);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);\n\nmsg.currLed = 4;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",20);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",120);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);","outputs":1,"noerr":0,"initialize":"","finalize":"","x":440,"y":1580,"wires":[["3f72ba6a.afb526"]]},{"id":"9fdf7bb3.a2e478","type":"trigger","z":"75f22ec1.216f","name":"","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":"2","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":720,"y":1780,"wires":[["3f72ba6a.afb526"]]},{"id":"74fa4a2e.5f2e34","type":"function","z":"75f22ec1.216f","name":"Strobe Verde","func":"msg.mode = \"STROBE\";\nmsg.currLed = 99;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",0);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",40);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);","outputs":1,"noerr":0,"initialize":"","finalize":"","x":490,"y":1780,"wires":[["9fdf7bb3.a2e478","3f72ba6a.afb526"]]},{"id":"be173caa.a6da3","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":9,"width":0,"height":0,"passthru":true,"label":"Strobe Verde","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":270,"y":1780,"wires":[["74fa4a2e.5f2e34"]]},{"id":"4496af1d.b2e2d","type":"link in","z":"75f22ec1.216f","name":"Strobe Verde","links":["5de71013.26547","182402ee.0f7fad"],"x":135,"y":1780,"wires":[["be173caa.a6da3"]]},{"id":"ac5686ae.027a08","type":"link in","z":"75f22ec1.216f","name":"Random Ambilight","links":["7e8728e5.61bc98"],"x":255,"y":1340,"wires":[["77276740.574e18"]]},{"id":"77276740.574e18","type":"random","z":"75f22ec1.216f","name":"","low":"1","high":"1024","inte":"true","property":"payload","x":420,"y":1340,"wires":[["1977bf84.f2efa"]]},{"id":"1977bf84.f2efa","type":"function","z":"75f22ec1.216f","name":"Random Ambilight","func":"msg.mode = \"FILL\";\nmsg.currLed = 98;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed ,true);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",msg.payload);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",1024);\nnode.send(msg);\n","outputs":1,"noerr":0,"x":630,"y":1340,"wires":[["3f72ba6a.afb526"]]},{"id":"5a85346a.5132bc","type":"function","z":"75f22ec1.216f","name":"All Off","func":"msg.currLed = 1;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLedOnOff1\",false);\nnode.send(msg);\n\nmsg.currLed = 2;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLedOnOff\" + msg.currLed ,false);\nnode.send(msg);\n\nmsg.currLed = 3;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLedOnOff\" + msg.currLed ,false);\nnode.send(msg);\n\nmsg.currLed = 4;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLedOnOff\" + msg.currLed ,false);\nnode.send(msg);\n\nmsg.currLed = 99;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLedOnOff\" + msg.currLed ,false);\nnode.send(msg);\n","outputs":1,"noerr":0,"x":450,"y":2000,"wires":[["3f72ba6a.afb526"]]},{"id":"69a22455.377a7c","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":4,"width":0,"height":0,"passthru":false,"label":"Apagar Todos","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":100,"y":2000,"wires":[["5a85346a.5132bc"]]},{"id":"e599f5ad.985e38","type":"link in","z":"75f22ec1.216f","name":"Apagar Todos","links":["fde89d11.67f4c","13259406.fd9c8c","dd0361d8.c95a9"],"x":355,"y":2040,"wires":[["5a85346a.5132bc"]]},{"id":"b1ceec7c.39285","type":"link in","z":"75f22ec1.216f","name":"Inicializar","links":["45c3c873.15b6a8","a6fba51c.f0fcb8","121ff899.078827","8a1c847a.5042d8"],"x":355,"y":1960,"wires":[["5a85346a.5132bc"]]},{"id":"8b7cddbe.cc5ff","type":"function","z":"75f22ec1.216f","name":"Rojo","func":"msg.mode = \"FILL\";\nmsg.currLed = 99;\nif (msg.payload <= 0) msg.payload = 0;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"0\",7);\nflow.set(\"CurrLed\"+ msg.mode + \"Encoder\" + msg.currLed + \"1\",msg.payload);\nflow.set(\"CurrLedMode\"+ msg.currLed ,msg.mode);\nflow.set(\"CurrLedOnOff\" + msg.currLed,true);\nnode.send(msg);","outputs":1,"noerr":0,"x":430,"y":1660,"wires":[["3f72ba6a.afb526"]]},{"id":"943d8d5d.8b063","type":"link in","z":"75f22ec1.216f","name":"Rojo","links":["158c4ef9.66f6a1"],"x":295,"y":1660,"wires":[["8b7cddbe.cc5ff"]]},{"id":"62cdb8fb.b70178","type":"function","z":"75f22ec1.216f","name":"Ambi Off","func":"msg.currLed = 98;\nflow.set(\"CurrLed\",msg.currLed);\nflow.set(\"CurrLedOnOff\" + msg.currLed ,false);\nnode.send(msg);\n","outputs":1,"noerr":0,"x":460,"y":1880,"wires":[["3f72ba6a.afb526"]]},{"id":"f715ce03.d3ebb","type":"link in","z":"75f22ec1.216f","name":"Ambi Off","links":["635d4c21.47ae94"],"x":280,"y":1860,"wires":[["62cdb8fb.b70178"]]},{"id":"ec0168f3.c6a848","type":"ui_button","z":"75f22ec1.216f","name":"","group":"95807cf0.32584","order":4,"width":0,"height":0,"passthru":false,"label":"Ambi Off","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":120,"y":1880,"wires":[["62cdb8fb.b70178"]]},{"id":"8063b5fb.ca1048","type":"mqtt in","z":"1ac54ead.f37ca1","name":"Boton Timbre","topic":"NodeMcu/Timbre/out/Button/3/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":110,"y":140,"wires":[["e4c190c1.30f86"]]},{"id":"cc4efe3d.11151","type":"trigger","z":"28d40fc8.b7186","name":"","op1":"0","op2":"1","op1type":"str","op2type":"str","duration":"50","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":310,"y":80,"wires":[["5fb07d40.defb54"]]},{"id":"77be961b.03d9a8","type":"trigger","z":"28d40fc8.b7186","name":"","op1":"0","op2":"1","op1type":"str","op2type":"str","duration":"2","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":300,"y":40,"wires":[["5fb07d40.defb54"]]},{"id":"e00971b8.2d444","type":"link in","z":"28d40fc8.b7186","name":"beep 2s","links":["1837fea6.4b1881"],"x":140,"y":40,"wires":[["77be961b.03d9a8"]]},{"id":"1837fea6.4b1881","type":"link out","z":"1ac54ead.f37ca1","name":"","links":["e00971b8.2d444"],"x":715,"y":180,"wires":[]},{"id":"4e0169b2.ef5ba8","type":"mqtt out","z":"1ac54ead.f37ca1","name":"","topic":"","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":870,"y":280,"wires":[]},{"id":"965576fd.5bd2b8","type":"change","z":"1ac54ead.f37ca1","name":"Celu Pablo","rules":[{"t":"set","p":"topic","pt":"msg","to":"Android/Chicho/Timbre","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":280,"wires":[["4e0169b2.ef5ba8"]]},{"id":"182402ee.0f7fad","type":"link out","z":"1ac54ead.f37ca1","name":"","links":["34d37719.4be3e8","aa6991ac.b65be","4496af1d.b2e2d"],"x":715,"y":140,"wires":[]},{"id":"41f25d62.786434","type":"link out","z":"1ac54ead.f37ca1","name":"","links":["8f48c64d.ba72a8"],"x":715,"y":220,"wires":[]},{"id":"3ce006a5.0b58fa","type":"debug","z":"1ac54ead.f37ca1","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":710,"y":80,"wires":[]},{"id":"37cb2160.d1c52e","type":"delay","z":"1ac54ead.f37ca1","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":460,"y":140,"wires":[["3ce006a5.0b58fa","965576fd.5bd2b8","1837fea6.4b1881","182402ee.0f7fad","41f25d62.786434","55ed6821.7a3278","35dca0ef.d86cd","39a278e4.b52e68"]]},{"id":"e4c190c1.30f86","type":"switch","z":"1ac54ead.f37ca1","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":140,"wires":[["37cb2160.d1c52e"]]},{"id":"f2a9c8de.22e948","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/Timbre/out/LastSeen","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":190,"y":1260,"wires":[["2029e8e3.0d85c8","a396df52.b88"]]},{"id":"a396df52.b88","type":"function","z":"57b26073.47916","name":"LastSeen","func":"msg.LastSeen = new Date();\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1240,"wires":[["4f054e00.8b6184"]]},{"id":"2029e8e3.0d85c8","type":"trigger","z":"57b26073.47916","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"7","extend":true,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":460,"y":1280,"wires":[["90c1ce27.6caeb"]]},{"id":"90c1ce27.6caeb","type":"ui_led","z":"57b26073.47916","order":1,"group":"d267a3e3.05ccb","width":0,"height":0,"label":"Timbre Ok","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Timbre OK","x":610,"y":1280,"wires":[]},{"id":"4f054e00.8b6184","type":"ui_text","z":"57b26073.47916","group":"d267a3e3.05ccb","order":2,"width":0,"height":0,"name":"Timbre","label":"LastSeen","format":"{{msg.LastSeen}}","layout":"row-spread","x":590,"y":1240,"wires":[]},{"id":"9416803c.f65a3","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/Timbre/out/PONG","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1140,"y":1520,"wires":[["238d7190.93cfde"]]},{"id":"238d7190.93cfde","type":"function","z":"57b26073.47916","name":"","func":"msg.payload = Date.now() -  flow.get(\"TimbrePing\");\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":1520,"wires":[["2d0c0f36.023e7"]]},{"id":"2d0c0f36.023e7","type":"ui_level","z":"57b26073.47916","group":"d267a3e3.05ccb","order":3,"width":0,"height":0,"name":"Latencia Timbre","label":"Latencia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1000","segWarn":"200","segHigh":"500","unit":"ms","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":1540,"y":1520,"wires":[]},{"id":"755ee2a2.097dec","type":"ui_button","z":"57b26073.47916","name":"","group":"d267a3e3.05ccb","order":4,"width":0,"height":0,"passthru":false,"label":"Reboot Timbre","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"NodeMcu/Timbre/in/RESET","x":1340,"y":520,"wires":[["aaed4da3.1d519"]]},{"id":"873e26ff.e382c8","type":"mqtt in","z":"792c9759.e6c028","name":"","topic":"Arduino/+/out/Encoder/+/+","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":350,"y":480,"wires":[["8af54e93.ebce","7dbed68f.3ed448"]]},{"id":"8af54e93.ebce","type":"change","z":"792c9759.e6c028","name":"Violeta","rules":[{"t":"set","p":"rgb","pt":"msg","to":"255,0,255","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":480,"wires":[["6dec6232.524ebc"]]},{"id":"7dbed68f.3ed448","type":"debug","z":"792c9759.e6c028","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":750,"y":560,"wires":[]},{"id":"f37ef34e.7f0d8","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"TimbrePing","pt":"flow","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"NodeMcu/Timbre/in/PING","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":1060,"wires":[["bf4c93fa.6b62e"]]},{"id":"eeecbde7.9c834","type":"ui_statetrail","z":"235e5af0.561006","group":"b32fa3e9.f2b7f","order":5,"width":0,"height":0,"name":"Vestidor","label":"Vestidor","states":[{"state":1,"col":"#e60000","t":"num","label":""},{"state":0,"col":"#999999","t":"num","label":""}],"periodLimit":"12","periodLimitUnit":"3600","timeformat":"HH:mm:ss","tickmarks":4,"persist":false,"legend":1,"combine":true,"blanklabel":"","x":1560,"y":100,"wires":[[]]},{"id":"91a43edc.1c95c","type":"ui_statetrail","z":"235e5af0.561006","group":"b32fa3e9.f2b7f","order":8,"width":0,"height":0,"name":"Patio","label":"Patio","states":[{"state":1,"col":"#e60000","t":"num","label":""},{"state":0,"col":"#999999","t":"num","label":""}],"periodLimit":"12","periodLimitUnit":"3600","timeformat":"HH:mm:ss","tickmarks":4,"persist":false,"legend":1,"combine":true,"blanklabel":"","x":1550,"y":160,"wires":[[]]},{"id":"ce65f162.8c35c","type":"ui_statetrail","z":"235e5af0.561006","group":"b32fa3e9.f2b7f","order":14,"width":0,"height":0,"name":"Patio Arriba","label":"Patio Arriba","states":[{"state":1,"col":"#e60000","t":"num","label":""},{"state":0,"col":"#999999","t":"num","label":""}],"periodLimit":"12","periodLimitUnit":"3600","timeformat":"HH:mm:ss","tickmarks":4,"persist":false,"legend":1,"combine":true,"blanklabel":"","x":1530,"y":220,"wires":[[]]},{"id":"4165143e.08838c","type":"ui_statetrail","z":"235e5af0.561006","group":"b32fa3e9.f2b7f","order":11,"width":0,"height":0,"name":"Balcon PA Pieza nenes","label":"Balcon PA Pieza nenes","states":[{"state":1,"col":"#e60000","t":"num","label":""},{"state":0,"col":"#999999","t":"num","label":""}],"periodLimit":"12","periodLimitUnit":"3600","timeformat":"HH:mm:ss","tickmarks":4,"persist":false,"legend":1,"combine":true,"blanklabel":"","x":1570,"y":280,"wires":[[]]},{"id":"452c6d80.88f5d4","type":"inject","z":"235e5af0.561006","name":"","repeat":"20","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":1070,"y":40,"wires":[["90a3c90a.f28b58","eeecbde7.9c834","91a43edc.1c95c","ce65f162.8c35c","4165143e.08838c"]]},{"id":"957abb4b.b3c148","type":"ui_text","z":"28d40fc8.b7186","group":"bee8228d.0d274","order":9,"width":"3","height":"1","name":"rpi Freq","label":"","format":"Freq; {{msg.payload}} Mhz","layout":"row-spread","x":700,"y":1060,"wires":[]},{"id":"36645baa.e5da44","type":"ui_text","z":"28d40fc8.b7186","group":"bee8228d.0d274","order":8,"width":"3","height":"1","name":"","label":"","format":"Volt: {{msg.payload}}","layout":"row-spread","x":670,"y":1000,"wires":[]},{"id":"7161a3a5.8cc3dc","type":"function","z":"28d40fc8.b7186","name":"","func":"msg.payload =msg.payload / 1000000;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":540,"y":1060,"wires":[["957abb4b.b3c148"]]},{"id":"a65bc789.c4e378","type":"rpi-gpio out","z":"28d40fc8.b7186","name":"Reset RPILeds","pin":"7","set":true,"level":"0","freq":"","out":"out","x":1620,"y":240,"wires":[]},{"id":"738a96ec.174e78","type":"rpi-gpio out","z":"28d40fc8.b7186","name":"Cooler","pin":"11","set":"","level":"0","freq":"","out":"out","x":950,"y":960,"wires":[]},{"id":"a3fb5643.7e9368","type":"ui_switch","z":"28d40fc8.b7186","name":"","label":"Cooler","tooltip":"","group":"bee8228d.0d274","order":7,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"num","onicon":"","oncolor":"","offvalue":"0","offvalueType":"num","officon":"","offcolor":"","x":790,"y":960,"wires":[["738a96ec.174e78"]]},{"id":"d3824543.795b68","type":"ui_button","z":"28d40fc8.b7186","name":"","group":"4672a874.eb0c98","order":9,"width":0,"height":0,"passthru":false,"label":"HARD RESET","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":1240,"y":240,"wires":[["1980e537.af6ceb"]]},{"id":"1980e537.af6ceb","type":"trigger","z":"28d40fc8.b7186","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"1","extend":true,"units":"s","reset":"","bytopic":"all","outputs":1,"x":1420,"y":240,"wires":[["a65bc789.c4e378"]]},{"id":"271ccecc.de9f22","type":"ui_level","z":"930c94d9.38ece8","group":"bee8228d.0d274","order":6,"width":0,"height":0,"name":"5v","label":"5v","colorHi":"#e60000","colorWarn":"#ecd713","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1.5","segWarn":"0.8","segHigh":"1","unit":"Amps","layout":"sh","channelA":"","channelB":"","decimals":"2","animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"property":"payload","peaktime":"5000","x":950,"y":1000,"wires":[]},{"id":"4916b097.ab482","type":"switch","z":"28d40fc8.b7186","name":"55c  58c","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"58","vt":"num"},{"t":"lt","v":"55","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":400,"y":920,"wires":[["8f35d62e.3f4cd8"],["5e90ef32.9f229"]]},{"id":"5e90ef32.9f229","type":"change","z":"28d40fc8.b7186","name":"Apagar","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":940,"wires":[["a3fb5643.7e9368"]]},{"id":"8f35d62e.3f4cd8","type":"change","z":"28d40fc8.b7186","name":"Prender","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":880,"wires":[["a3fb5643.7e9368"]]},{"id":"a161690c.fe8438","type":"change","z":"792c9759.e6c028","name":"Led 1 (Internet Status)","rules":[{"t":"set","p":"led","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":200,"wires":[["99052d6.bcf21d"]]},{"id":"473c7508.c2613c","type":"change","z":"792c9759.e6c028","name":"Rojo","rules":[{"t":"set","p":"rgb","pt":"msg","to":"255,0,0","tot":"str"},{"t":"set","p":"delay","pt":"msg","to":"10000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":200,"wires":[["a161690c.fe8438"]]},{"id":"deabdee.193a22","type":"inject","z":"930c94d9.38ece8","name":"","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":360,"y":760,"wires":[["5db53b07.727cf4"]]},{"id":"511739ce.de5368","type":"mqtt out","z":"1ac54ead.f37ca1","name":"Pc Escritorio","topic":"ESCRITORIO/desktop/in/run","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":870,"y":380,"wires":[]},{"id":"55ed6821.7a3278","type":"change","z":"1ac54ead.f37ca1","name":"Abrir Camara","rules":[{"t":"set","p":"payload","pt":"msg","to":"vlc,rtsp://CamAdmin:jst4kix@192.168.2.52:1052/11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":380,"wires":[["511739ce.de5368"]]},{"id":"e5a7a7a3.58fe68","type":"inject","z":"1ac54ead.f37ca1","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":330,"y":420,"wires":[["55ed6821.7a3278"]]},{"id":"b229f4be.adc378","type":"switch","z":"d0c77eb4.886e7","name":"Prendida?","property":"CompuPrendida","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":650,"y":240,"wires":[["d8c8b958.b3a5d8"],["ed873ba0.52a518","635d4c21.47ae94","f8a83356.4740f","ef3d62f7.0f167"]]},{"id":"d8c8b958.b3a5d8","type":"change","z":"d0c77eb4.886e7","name":"1","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":220,"wires":[["26418e8.f185b72"]]},{"id":"ef3d62f7.0f167","type":"change","z":"d0c77eb4.886e7","name":"0","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":260,"wires":[["26418e8.f185b72"]]},{"id":"b5436718.4cef28","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/out/Temp","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":140,"y":80,"wires":[["9745ac4.bdcb95"]]},{"id":"31b65e39.2b4512","type":"aggregator","z":"848f86f5.f33168","name":"","topic":"","intervalCount":"3","intervalUnits":"m","submitIncompleteInterval":true,"aggregationType":"median","x":510,"y":40,"wires":[["e7570b3.34947f8"]]},{"id":"66e281c4.c912a","type":"ui_level","z":"848f86f5.f33168","group":"fce9dc0d.50b3","order":3,"width":0,"height":0,"name":"Temp","label":"TEMP","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"30","max":"90","segWarn":"60","segHigh":"75","unit":"C","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":650,"y":80,"wires":[]},{"id":"e7570b3.34947f8","type":"ui_chart","z":"848f86f5.f33168","name":"","group":"fce9dc0d.50b3","order":9,"width":0,"height":0,"label":"Temp","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":650,"y":40,"wires":[[]]},{"id":"9745ac4.bdcb95","type":"function","z":"848f86f5.f33168","name":"Redondeo","func":"msg.payload = Math.round(msg.payload / 1000);\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":80,"wires":[["31b65e39.2b4512","66e281c4.c912a"]]},{"id":"bb33c578.aaa548","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/out/RAM/Used","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":150,"y":140,"wires":[["d450a0cc.5a7c5"]]},{"id":"d450a0cc.5a7c5","type":"range","z":"848f86f5.f33168","minin":"0","maxin":"948304","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":320,"y":140,"wires":[["1ddbc0e6.5349df"]]},{"id":"1ddbc0e6.5349df","type":"ui_level","z":"848f86f5.f33168","group":"fce9dc0d.50b3","order":2,"width":0,"height":0,"name":"RAM","label":"RAM","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"100","segWarn":"50","segHigh":"75","unit":"%","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"3","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":"3000","x":450,"y":140,"wires":[]},{"id":"90f672b3.69f64","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/out/HDDCameras/Free","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":200,"y":720,"wires":[["546b393c.275528"]]},{"id":"3b4be76d.90db28","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/out/HDDCameras/Ok","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":170,"y":540,"wires":[["e6e89480.566028","aab0c1fe.35371"]]},{"id":"f29d5ab2.4e9818","type":"ui_level","z":"848f86f5.f33168","group":"fce9dc0d.50b3","order":4,"width":0,"height":0,"name":"Disco","label":"Disco","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"500","segWarn":"460","segHigh":"487","unit":"Gb","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"off","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"property":"payload","peaktime":"3000","x":590,"y":740,"wires":[]},{"id":"546b393c.275528","type":"range","z":"848f86f5.f33168","minin":"0","maxin":"500","minout":"500","maxout":"0","action":"scale","round":true,"property":"payload","name":"","x":410,"y":720,"wires":[["f29d5ab2.4e9818","a0f3296.9c8b8d8"]]},{"id":"e6e89480.566028","type":"ui_led","z":"848f86f5.f33168","order":5,"group":"fce9dc0d.50b3","width":"","height":"","label":"HDD Ok","colorForValue":[{"color":"red","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"}],"allowColorForValueInMessage":false,"name":"HDD Ok","x":420,"y":560,"wires":[]},{"id":"d146d2c7.b9053","type":"mqtt out","z":"848f86f5.f33168","name":"","topic":"MXQ/in/PSCOUNT","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":490,"y":420,"wires":[]},{"id":"617a6cae.46e7a4","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/out/PSCOUNT/ffmpeg","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":800,"y":380,"wires":[["4be7a7f8.6a9b88","a766b8f3.9b3608"]]},{"id":"4be7a7f8.6a9b88","type":"ui_text","z":"848f86f5.f33168","group":"fce9dc0d.50b3","order":6,"width":"3","height":"1","name":"","label":"ffmpeg","format":"{{msg.payload}}","layout":"row-spread","x":1010,"y":380,"wires":[]},{"id":"de8f5be8.467c78","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/out/PSCOUNT/vlc","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":800,"y":440,"wires":[["d2777e8e.6d18a","8e6f3bd2.aa7248"]]},{"id":"d2777e8e.6d18a","type":"ui_text","z":"848f86f5.f33168","group":"fce9dc0d.50b3","order":7,"width":"3","height":"1","name":"","label":"vlc","format":"{{msg.payload}}","layout":"row-spread","x":1010,"y":440,"wires":[]},{"id":"7f89a5e5.11a4cc","type":"inject","z":"848f86f5.f33168","name":"","props":[{"p":"payload"}],"repeat":"5","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"A","payloadType":"str","x":150,"y":420,"wires":[["8802acbf.d9592","7b129d47.623874"]]},{"id":"311db91d.63af86","type":"mqtt out","z":"848f86f5.f33168","name":"","topic":"MXQ/in/PSRUN","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1360,"y":820,"wires":[]},{"id":"aca0f7d3.16fd78","type":"mqtt out","z":"848f86f5.f33168","name":"","topic":"MXQ/in/PSKILL","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1400,"y":1140,"wires":[]},{"id":"7b129d47.623874","type":"change","z":"848f86f5.f33168","name":"ffmpeg","rules":[{"t":"set","p":"payload","pt":"msg","to":"ffmpeg","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":460,"wires":[["d146d2c7.b9053"]]},{"id":"8802acbf.d9592","type":"change","z":"848f86f5.f33168","name":"vlc","rules":[{"t":"set","p":"payload","pt":"msg","to":"vlc","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":305,"y":388,"wires":[["d146d2c7.b9053"]]},{"id":"51ef8146.ada2a","type":"inject","z":"848f86f5.f33168","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"vlc -vvv rtsp://CamAdmin:jst4kix@192.168.2.54:10554/tcp/av0_0 --sout='#http{mux=ffmpeg{mux=flv},dst=192.168.2.6:8054/54}' --rc-fake-tty  --quiet -I dummy > /dev/null 2>&1 < /dev/null &","payloadType":"str","x":1030,"y":640,"wires":[["311db91d.63af86"]]},{"id":"668a01d2.d9f7b","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/NodeRed/out/lastseen/epoch","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":880,"y":220,"wires":[["ba5543ce.7fd26"]]},{"id":"ba5543ce.7fd26","type":"mqtt out","z":"848f86f5.f33168","name":"","topic":"MXQ/in/NODESTOPFORCE","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1180,"y":220,"wires":[]},{"id":"3690c7ac.9787b8","type":"inject","z":"28d40fc8.b7186","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"1","topic":"Inicializar","payload":"1","payloadType":"num","x":1030,"y":100,"wires":[["8a1c847a.5042d8","917836c.2e262c8","eac6a2d3.b101e"]]},{"id":"8a1c847a.5042d8","type":"link out","z":"28d40fc8.b7186","name":"","links":["19d451bb.d4649e","6be7ded4.7aaa6","6c2874db.9f398c","d540d9c.9897428","ef621a5f.5db478","b1ceec7c.39285"],"x":1195,"y":180,"wires":[]},{"id":"917836c.2e262c8","type":"mqtt out","z":"28d40fc8.b7186","name":"MXQ Stop Node","topic":"MXQ/in/NODESTOP","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1260,"y":60,"wires":[]},{"id":"eac6a2d3.b101e","type":"change","z":"28d40fc8.b7186","name":"","rules":[{"t":"set","p":"PbLivingOk","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1280,"y":120,"wires":[[]]},{"id":"76c7478a.a4f648","type":"mqtt out","z":"848f86f5.f33168","name":"","topic":"","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":390,"y":220,"wires":[]},{"id":"386e983c.89e518","type":"ui_button","z":"848f86f5.f33168","name":"","group":"fce9dc0d.50b3","order":10,"width":0,"height":0,"passthru":false,"label":"Reboot MXQ","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"MXQ/in/RESET","x":190,"y":240,"wires":[["76c7478a.a4f648"]]},{"id":"5404e636.0638c8","type":"ui_button","z":"848f86f5.f33168","name":"","group":"fce9dc0d.50b3","order":11,"width":0,"height":0,"passthru":false,"label":"Start node Mxq","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"MXQ/in/NODESTART","x":200,"y":200,"wires":[["76c7478a.a4f648"]]},{"id":"ecbdcf91.de4ed","type":"aggregator","z":"848f86f5.f33168","name":"","topic":"","intervalCount":"3","intervalUnits":"m","submitIncompleteInterval":true,"aggregationType":"median","x":1130,"y":120,"wires":[["c8d77887.a01488"]]},{"id":"c8d77887.a01488","type":"ui_chart","z":"848f86f5.f33168","name":"","group":"fce9dc0d.50b3","order":8,"width":0,"height":0,"label":"CPU","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1390,"y":120,"wires":[[]]},{"id":"3417be21.c61ea2","type":"ui_level","z":"848f86f5.f33168","group":"fce9dc0d.50b3","order":1,"width":0,"height":0,"name":"CPU","label":"CPU","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"%","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"off","shape":"1","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":true,"peaktime":"5000","x":1130,"y":80,"wires":[]},{"id":"b926108c.142a7","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/out/CPU","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":830,"y":100,"wires":[["3417be21.c61ea2","ecbdcf91.de4ed"]]},{"id":"a766b8f3.9b3608","type":"change","z":"848f86f5.f33168","name":"","rules":[{"t":"set","p":"ffmpeg","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":320,"wires":[[]]},{"id":"8e6f3bd2.aa7248","type":"change","z":"848f86f5.f33168","name":"","rules":[{"t":"set","p":"vlc","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":480,"wires":[[]]},{"id":"aab0c1fe.35371","type":"change","z":"848f86f5.f33168","name":"","rules":[{"t":"set","p":"hdd","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":520,"wires":[[]]},{"id":"a0f3296.9c8b8d8","type":"switch","z":"848f86f5.f33168","name":"> 470gb","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"487","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":620,"y":700,"wires":[["fd8f27b.56d35d8"]]},{"id":"fd8f27b.56d35d8","type":"delay","z":"848f86f5.f33168","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":800,"y":700,"wires":[["232194b2.a5064c"]]},{"id":"232194b2.a5064c","type":"change","z":"848f86f5.f33168","name":"DEPURAR","rules":[{"t":"set","p":"payload","pt":"msg","to":"find /mnt/hdd/* -mtime +7 -type f -name \"*.mp4\" -delete","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":720,"wires":[["311db91d.63af86"]]},{"id":"3edc1a34.4476b6","type":"inject","z":"848f86f5.f33168","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7200","crontab":"","once":true,"onceDelay":"30","topic":"","payload":"","payloadType":"date","x":170,"y":940,"wires":[["70a33d94.adc5e4"]]},{"id":"dfe9a662.4e4078","type":"switch","z":"848f86f5.f33168","name":"vlc OK?","property":"vlc","propertyType":"flow","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":600,"y":1020,"wires":[["87ca7c0a.60fb8"],["816a857f.013da8"]]},{"id":"816a857f.013da8","type":"switch","z":"848f86f5.f33168","name":"ffmpeg?","property":"ffmpeg","propertyType":"flow","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"5","vt":"str"},{"t":"eq","v":"4","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":820,"y":1080,"wires":[["db5cf7bc.167a88"],[],["24dbe9a8.d22386"]]},{"id":"87ca7c0a.60fb8","type":"change","z":"848f86f5.f33168","name":"start VLC","rules":[{"t":"set","p":"payload","pt":"msg","to":"vlc -vvv rtsp://CamAdmin:jst4kix@192.168.2.54:10554/tcp/av0_0 --sout='#http{mux=ffmpeg{mux=flv},dst=192.168.2.6:8054/54}' --rc-fake-tty  --quiet -I dummy > /dev/null 2>&1 < /dev/null &","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":960,"wires":[["f3144335.160a","311db91d.63af86"]]},{"id":"f3144335.160a","type":"trigger","z":"848f86f5.f33168","name":"","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":"20","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1030,"y":980,"wires":[["dfe9a662.4e4078"]]},{"id":"24dbe9a8.d22386","type":"change","z":"848f86f5.f33168","name":"matar ffmpeg","rules":[{"t":"set","p":"payload","pt":"msg","to":"ffmpeg -r","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1150,"y":1140,"wires":[["aca0f7d3.16fd78","db5cf7bc.167a88"]]},{"id":"db5cf7bc.167a88","type":"trigger","z":"848f86f5.f33168","name":"Iniciar Camaras","op1":"","op2":"/srv/samba/share/camaras.sh","op1type":"nul","op2type":"str","duration":"2","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1260,"y":1040,"wires":[["311db91d.63af86"]]},{"id":"cc93b980.cf6218","type":"switch","z":"848f86f5.f33168","name":"vlc OK?","property":"vlc","propertyType":"flow","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":560,"y":940,"wires":[["87ca7c0a.60fb8"],[]]},{"id":"4b838b63.1db274","type":"inject","z":"848f86f5.f33168","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"3600","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":190,"y":1220,"wires":[["ec95e72d.01e4d8"]]},{"id":"2908f131.9529fe","type":"switch","z":"848f86f5.f33168","name":"ffmpeg?","property":"ffmpeg","propertyType":"flow","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"5","vt":"str"},{"t":"lt","v":"4","vt":"str"},{"t":"eq","v":"4","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":800,"y":1180,"wires":[["db5cf7bc.167a88"],[],["24dbe9a8.d22386"],["28b94e66.1e9802"]]},{"id":"70a33d94.adc5e4","type":"switch","z":"848f86f5.f33168","name":"hdd OK?","property":"hdd","propertyType":"flow","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":400,"y":940,"wires":[["cc93b980.cf6218"]]},{"id":"ec95e72d.01e4d8","type":"switch","z":"848f86f5.f33168","name":"hdd OK?","property":"hdd","propertyType":"flow","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":620,"y":1180,"wires":[["2908f131.9529fe"]]},{"id":"28b94e66.1e9802","type":"switch","z":"848f86f5.f33168","name":"vlc OK?","property":"vlc","propertyType":"flow","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":960,"y":1260,"wires":[["24dbe9a8.d22386"]]},{"id":"8a824197.3dcaa","type":"ui_button","z":"848f86f5.f33168","name":"","group":"fce9dc0d.50b3","order":12,"width":0,"height":0,"passthru":false,"label":"Check VLC","tooltip":"","color":"","bgcolor":"","icon":"","payload":"/srv/samba/share/camaras.sh","payloadType":"str","topic":"","x":170,"y":1040,"wires":[["70a33d94.adc5e4"]]},{"id":"b84d8dbb.6876b","type":"ui_button","z":"848f86f5.f33168","name":"","group":"fce9dc0d.50b3","order":12,"width":0,"height":0,"passthru":false,"label":"Check Camaras","tooltip":"","color":"","bgcolor":"","icon":"","payload":"/srv/samba/share/camaras.sh","payloadType":"str","topic":"","x":180,"y":1140,"wires":[["ec95e72d.01e4d8"]]},{"id":"8e930173.dcd34","type":"mqtt in","z":"848f86f5.f33168","name":"","topic":"MXQ/out/START","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":160,"y":820,"wires":[["53be9a83.fed8d4"]]},{"id":"53be9a83.fed8d4","type":"trigger","z":"848f86f5.f33168","name":"","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"10","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":350,"y":820,"wires":[["70a33d94.adc5e4"]]},{"id":"a3414e51.4f81c","type":"debug","z":"235e5af0.561006","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":800,"y":720,"wires":[]},{"id":"a953fdf8.eae21","type":"link in","z":"1ac54ead.f37ca1","name":"Tocar Timbre","links":["93fbf702.da1998"],"x":315,"y":20,"wires":[["826a487d.820f08"]]},{"id":"826a487d.820f08","type":"change","z":"1ac54ead.f37ca1","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":60,"wires":[["37cb2160.d1c52e"]]},{"id":"93fbf702.da1998","type":"link out","z":"235e5af0.561006","name":"","links":["a953fdf8.eae21"],"x":625,"y":1000,"wires":[]},{"id":"f599c61.cebe438","type":"mqtt out","z":"28d40fc8.b7186","name":"","topic":"MXQ/in/PSKILL","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1160,"y":380,"wires":[]},{"id":"ee1642b7.7f52f","type":"change","z":"28d40fc8.b7186","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"node","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":380,"wires":[["f599c61.cebe438"]]},{"id":"a1f7c83e.2651b8","type":"link out","z":"73aaa5f5.ea3f4c","name":"","links":["b519a3d2.dbb48"],"x":855,"y":380,"wires":[]},{"id":"b519a3d2.dbb48","type":"link in","z":"792c9759.e6c028","name":"Internet Status","links":["a1f7c83e.2651b8"],"x":440,"y":180,"wires":[["f97a3651.6b0cf8"]],"l":true},{"id":"f97a3651.6b0cf8","type":"switch","z":"792c9759.e6c028","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":630,"y":180,"wires":[["68847761.fe4328"],["473c7508.c2613c"]]},{"id":"68847761.fe4328","type":"change","z":"792c9759.e6c028","name":"Verde","rules":[{"t":"set","p":"rgb","pt":"msg","to":"0,255,0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":160,"wires":[["a161690c.fe8438"]]},{"id":"ed58f583.9e8488","type":"link in","z":"792c9759.e6c028","name":"Arduino PBLiving Status","links":["3fb20c49.151574"],"x":270,"y":780,"wires":[["5839f25f.a843cc"]],"l":true},{"id":"f8c1fdd2.2ac87","type":"link in","z":"792c9759.e6c028","name":"Arduino PBTablero Status","links":["282dd99f.b90e46"],"x":270,"y":920,"wires":[["86abc11.d95ff4"]],"l":true},{"id":"3fb20c49.151574","type":"link out","z":"57b26073.47916","name":"","links":["ed58f583.9e8488"],"x":795,"y":860,"wires":[]},{"id":"282dd99f.b90e46","type":"link out","z":"57b26073.47916","name":"","links":["f8c1fdd2.2ac87"],"x":805,"y":960,"wires":[]},{"id":"5839f25f.a843cc","type":"switch","z":"792c9759.e6c028","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":460,"y":780,"wires":[["b7985a59.f1b568"]]},{"id":"86abc11.d95ff4","type":"switch","z":"792c9759.e6c028","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":920,"wires":[["122db61b.c1180a"]]},{"id":"122db61b.c1180a","type":"change","z":"792c9759.e6c028","name":"Rojo","rules":[{"t":"set","p":"rgb","pt":"msg","to":"255,0,0","tot":"str"},{"t":"set","p":"delay","pt":"msg","to":"10000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":920,"wires":[["e87b7310.ae947"]]},{"id":"b7985a59.f1b568","type":"change","z":"792c9759.e6c028","name":"Rojo","rules":[{"t":"set","p":"rgb","pt":"msg","to":"255,0,0","tot":"str"},{"t":"set","p":"delay","pt":"msg","to":"20000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":780,"wires":[["f8b32466.2cb268"]]},{"id":"7219bfd3.b9b85","type":"mqtt out","z":"792c9759.e6c028","name":"Strip 1","topic":"NodeMcu/RPILeds/in/WSSTRIP/0/BRIGHTNESS","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1430,"y":500,"wires":[],"inputLabels":["kkl"]},{"id":"5fa44ece.e7181","type":"ui_slider","z":"792c9759.e6c028","name":"","label":"Bright","tooltip":"","group":"bee8228d.0d274","order":3,"width":0,"height":0,"passthru":false,"outs":"all","topic":"","min":0,"max":"255","step":1,"x":1210,"y":640,"wires":[["7219bfd3.b9b85"]]},{"id":"b97b387c.cc9c88","type":"inject","z":"848f86f5.f33168","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":850,"y":640,"wires":[["232194b2.a5064c"]]},{"id":"69bbbdc2.7c5d94","type":"inject","z":"848f86f5.f33168","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1150,"y":1280,"wires":[["24dbe9a8.d22386"]]},{"id":"8917fb0.a179c08","type":"http request","z":"2a658747.a40e88","name":"","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":490,"y":220,"wires":[["e0f45d84.2073c"]]},{"id":"e0f45d84.2073c","type":"json","z":"2a658747.a40e88","name":"","property":"payload","action":"","pretty":false,"x":650,"y":220,"wires":[["64e4d2ac.24fecc"]]},{"id":"de92246e.105268","type":"function","z":"2a658747.a40e88","name":"Auth","func":"function isNumeric(str) {\n  return !isNaN(str) && // use type coercion to parse the _entirety_ of the string (`parseFloat` alone does not do this)...\n         !isNaN(parseFloat(str)) // ...and ensure strings of whitespace fail\n}\nif (isNumeric(msg.item))\n{\n    msg.url = \"https://dev.azure.com/aleph-crm/AlephCrm%20V2/_apis/wit/workitems?ids=\" + msg.item + \"&api-version=6.0\";\n    msg.headers = {};\n//iamuser:g2g3uf4impwi7z57ky5obkzy3rmtpd5b5odafktnfcfq333n2txa\n    msg.headers['authorization'] = 'basic aWFtdXNlcjpnMmczdWY0aW1wd2k3ejU3a3k1b2Jrenkzcm10cGQ1YjVvZGFma3RuZmNmcTMzM24ydHhh';\n    msg.headers['Content-Type'] = 'application/json';\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":330,"y":220,"wires":[["8917fb0.a179c08"]]},{"id":"64e4d2ac.24fecc","type":"function","z":"2a658747.a40e88","name":"ItemTfs","func":"msg.itemTfs = msg.payload.value[0];\nif (msg.itemTfs == null) return;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":820,"y":220,"wires":[[]]},{"id":"c983b021.ec694","type":"vcgencmd","z":"28d40fc8.b7186","name":"","fullPath":"/opt/vc/bin/vcgencmd","command":"measure_temp","codec":"H264","clock":"core","voltage":"core","memory":"arm","videoOutput":"0","separateMsg":false,"x":220,"y":800,"wires":[["1a5fe516.39b1ab","a0443f5b.163e9","4916b097.ab482"]]},{"id":"e1b498fa.972ba8","type":"inject","z":"28d40fc8.b7186","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":70,"y":960,"wires":[["c983b021.ec694","c0722e2e.c1edf","4016eae2.995cd4","43a06ffb.5cb0b"]]},{"id":"c0722e2e.c1edf","type":"vcgencmd","z":"28d40fc8.b7186","name":"","fullPath":"/opt/vc/bin/vcgencmd","command":"measure_volts","codec":"H264","clock":"arm","voltage":"core","memory":"gpu","videoOutput":"0","separateMsg":false,"x":350,"y":1000,"wires":[["36645baa.e5da44"]]},{"id":"4016eae2.995cd4","type":"vcgencmd","z":"28d40fc8.b7186","name":"","fullPath":"/opt/vc/bin/vcgencmd","command":"measure_clock","codec":"H264","clock":"arm","voltage":"core","memory":"gpu","videoOutput":"0","separateMsg":false,"x":330,"y":1060,"wires":[["7161a3a5.8cc3dc"]]},{"id":"43a06ffb.5cb0b","type":"vcgencmd","z":"28d40fc8.b7186","name":"","fullPath":"/opt/vc/bin/vcgencmd","command":"get_throttled","codec":"H264","clock":"core","voltage":"sdram_p","memory":"arm","videoOutput":"0","separateMsg":false,"x":320,"y":1160,"wires":[["5a7d4c4d.637de4","61d7d52e.6f820c","d0bb2839.32f0a8","e64ef4b6.d08178"]]},{"id":"5a7d4c4d.637de4","type":"change","z":"28d40fc8.b7186","name":"underVoltage","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.underVoltage","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1120,"wires":[["c70c9da5.4a645","217982a6.00f20e"]]},{"id":"61d7d52e.6f820c","type":"change","z":"28d40fc8.b7186","name":"throttled","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.throttled","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":1160,"wires":[["e0a00384.3369c"]]},{"id":"d0bb2839.32f0a8","type":"change","z":"28d40fc8.b7186","name":"frequencyCapped","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.frequencyCapped","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1200,"wires":[["86972638.17a1c8"]]},{"id":"e0a00384.3369c","type":"ui_led","z":"28d40fc8.b7186","order":10,"group":"bee8228d.0d274","width":"2","height":"1","label":"Th","colorForValue":[{"color":"#ff0000","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":false,"name":"throttled","x":820,"y":1160,"wires":[]},{"id":"86972638.17a1c8","type":"ui_led","z":"28d40fc8.b7186","order":11,"group":"bee8228d.0d274","width":"2","height":"1","label":"Cap","colorForValue":[{"color":"#ff0000","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":false,"name":"Capp","x":810,"y":1200,"wires":[]},{"id":"c70c9da5.4a645","type":"ui_led","z":"28d40fc8.b7186","order":12,"group":"bee8228d.0d274","width":"2","height":"1","label":"Volt","colorForValue":[{"color":"#ff0000","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":false,"name":"Volt","x":790,"y":1120,"wires":[]},{"id":"217982a6.00f20e","type":"ui_statetrail","z":"28d40fc8.b7186","group":"bee8228d.0d274","order":13,"width":0,"height":0,"name":"UnderVolt","label":"UnderVolt","states":[{"state":true,"col":"#fc0000","t":"bool","label":""},{"state":false,"col":"#008000","t":"bool","label":""}],"periodLimit":"12","periodLimitUnit":"3600","timeformat":"HH:mm:ss","tickmarks":4,"persist":false,"legend":1,"combine":true,"blanklabel":"","x":900,"y":1040,"wires":[[]]},{"id":"e64ef4b6.d08178","type":"debug","z":"28d40fc8.b7186","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":520,"y":1260,"wires":[]},{"id":"733d1c45.c294a4","type":"mqtt out","z":"2bcc0ccb.cd26a4","name":"Luz Balcon (22)","topic":"Arduino/PBLiving/in/Relay/22","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":1400,"y":280,"wires":[]},{"id":"142446b4.25c239","type":"change","z":"2bcc0ccb.cd26a4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":340,"wires":[["1fefe0db.43387f"]]},{"id":"5c73d1cd.f08fd","type":"change","z":"2bcc0ccb.cd26a4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":400,"wires":[["1fefe0db.43387f"]]},{"id":"dbd45901.5a1598","type":"ui_button","z":"848f86f5.f33168","name":"","group":"fce9dc0d.50b3","order":12,"width":0,"height":0,"passthru":false,"label":"Kill","tooltip":"","color":"","bgcolor":"","icon":"","payload":"/srv/samba/share/camaras.sh","payloadType":"str","topic":"","x":870,"y":1300,"wires":[["24dbe9a8.d22386"]]},{"id":"a55b97a7.4179a8","type":"ui_button","z":"848f86f5.f33168","name":"","group":"fce9dc0d.50b3","order":12,"width":0,"height":0,"passthru":false,"label":"kill vlc","tooltip":"","color":"","bgcolor":"","icon":"","payload":"vlc","payloadType":"str","topic":"","x":1030,"y":1340,"wires":[["aca0f7d3.16fd78"]]},{"id":"368aa938.0adab6","type":"node-red-contrib-whatsapp-cmb-send-message","z":"bb63d718.931208","name":"","account":"d65d81f9.33213","text":"https://app.alephcrm.com/Assets/Images/logos/logo-aleph.png","inputtypemessage":"str","rejectssl":false,"x":420,"y":460,"wires":[[]]},{"id":"735716c3.586598","type":"inject","z":"bb63d718.931208","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":140,"y":480,"wires":[["3f5c44a3.82d6dc"]]},{"id":"66bca813.1d77a8","type":"node-red-contrib-whatsapp-cmb-send-message","z":"1ac54ead.f37ca1","name":"","account":"d65d81f9.33213","text":"https://alephteststorage.blob.core.windows.net/casa/cam.jpg","inputtypemessage":"str","rejectssl":true,"x":1360,"y":320,"wires":[[]]},{"id":"3f5c44a3.82d6dc","type":"telegrambot-payload","z":"bb63d718.931208","name":"","bot":"d17a98f.baf2068","chatId":"1683927493","sendMethod":"sendMessage","payload":"{\n    \"text\":\"test\"\n}","x":370,"y":520,"wires":[[]]},{"id":"35dca0ef.d86cd","type":"exec","z":"1ac54ead.f37ca1","command":"sudo ffmpeg -y -rtsp_transport tcp -i \"rtsp://CamAdmin:jst4kix@192.168.2.52:1052/11\" -vframes 1 /home/pi/share/cam/cam.jpg","addpay":false,"append":"","useSpawn":"false","timer":"5","oldrc":false,"name":"Tomar Captura","x":560,"y":540,"wires":[["7b26e736.120448","7a342981.075bd8"],["7b26e736.120448"],["7b26e736.120448"]]},{"id":"9aa4b81d.2016d8","type":"inject","z":"1ac54ead.f37ca1","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":340,"y":540,"wires":[["35dca0ef.d86cd"]]},{"id":"f986d1df.119e1","type":"http in","z":"1ac54ead.f37ca1","name":"","url":"/cam","method":"get","upload":false,"swaggerDoc":"","x":300,"y":820,"wires":[["b4f53d64.fabce"]]},{"id":"b4f53d64.fabce","type":"file in","z":"1ac54ead.f37ca1","name":"","filename":"/home/pi/share/cam.jpg","format":"","x":510,"y":820,"wires":[["d05b6d3a.80f2b"]]},{"id":"d05b6d3a.80f2b","type":"change","z":"1ac54ead.f37ca1","name":"Set Headers","rules":[{"t":"set","p":"headers","pt":"msg","to":"{}","tot":"json"},{"t":"set","p":"headers.content-type","pt":"msg","to":"image/jpg","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":820,"wires":[["110d3eec.35ac61"]]},{"id":"110d3eec.35ac61","type":"http response","z":"1ac54ead.f37ca1","name":"","statusCode":"","headers":{},"x":950,"y":820,"wires":[]},{"id":"b8bd30f4.1d49e","type":"telegrambot-payload","z":"1ac54ead.f37ca1","name":"","bot":"d17a98f.baf2068","chatId":"1683927493","sendMethod":"sendPhoto","payload":"{\n    \"photo\":\"https://alephteststorage.blob.core.windows.net/casa/cam.jpg?time={{{Math.floor(Date.now() / 1000)}}}\",\n    \"caption\":\"Tocaron el Timbre\"\n}","x":1350,"y":660,"wires":[[]]},{"id":"7b26e736.120448","type":"debug","z":"1ac54ead.f37ca1","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":700,"wires":[]},{"id":"7a342981.075bd8","type":"function","z":"1ac54ead.f37ca1","name":"","func":"var newMsg={\n    filename: \"/home/pi/share/cam/cam.jpg\",\n    payload:\"/home/pi/share/cam/cam.jpg\",\n    topic:\"\"\n}\n\n\nreturn newMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":840,"y":620,"wires":[["17751c68.c72f94"]]},{"id":"17751c68.c72f94","type":"Save Blob","z":"1ac54ead.f37ca1","name":"Azure Save Blob Storage","x":1070,"y":680,"wires":[["b8bd30f4.1d49e","66bca813.1d77a8"]]},{"id":"3d7352d9.fc405e","type":"inject","z":"1ac54ead.f37ca1","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":640,"y":660,"wires":[["7a342981.075bd8"]]},{"id":"2fb6815e.33cebe","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp LasSeen","topic":"ESCRITORIO/desktop/out/lastseen/epoch","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":140,"y":180,"wires":[["7f6526a6.d24708","1a8b8922.1ae247"]]},{"id":"eaf053ae.850f8","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp LasSeen","topic":"CHICOS/out/lastseen/epoch","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":640,"y":460,"wires":[["29df3b60.b02344","cee8ced.d38d83"]]},{"id":"29df3b60.b02344","type":"trigger","z":"d0c77eb4.886e7","name":"","op1":"","op2":"false","op1type":"nul","op2type":"bool","duration":"1","extend":true,"overrideDelay":false,"units":"min","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":870,"y":500,"wires":[["7fbf9c8f.2a3e64"]]},{"id":"7fbf9c8f.2a3e64","type":"change","z":"d0c77eb4.886e7","name":"set CompOn","rules":[{"t":"set","p":"CompuChicosPrendida","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":480,"wires":[["1b797e9b.186b41","49925924.581c58"]]},{"id":"1b797e9b.186b41","type":"ui_switch","z":"d0c77eb4.886e7","name":"","label":"Comp Chicos","tooltip":"","group":"5635ed61.b910e4","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":1260,"y":440,"wires":[["d9da96e7.b1ab78"]]},{"id":"20602e8a.2d9dc2","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp Off","topic":"CHICOS/out/SHUTDOWN","qos":"1","datatype":"auto","broker":"1ad27743.ce9fb9","x":640,"y":580,"wires":[["ae32e12a.a9269"]]},{"id":"ae32e12a.a9269","type":"change","z":"d0c77eb4.886e7","name":"Payload 0","rules":[{"t":"set","p":"payload","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":540,"wires":[["7fbf9c8f.2a3e64"]]},{"id":"d4ac6eb6.291fb","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp On","topic":"CHICOS/out/IP","qos":"1","datatype":"auto","broker":"1ad27743.ce9fb9","x":640,"y":400,"wires":[["cee8ced.d38d83"]]},{"id":"cee8ced.d38d83","type":"change","z":"d0c77eb4.886e7","name":"Payload 1","rules":[{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":420,"wires":[["7fbf9c8f.2a3e64"]]},{"id":"49925924.581c58","type":"switch","z":"d0c77eb4.886e7","name":"Prendida?","property":"CompuChicosPrendida","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1170,"y":580,"wires":[["5b1c976f.304e78"],["aeb64ca1.149c9"]]},{"id":"a5cb0dc1.ca2a3","type":"mqtt in","z":"d0c77eb4.886e7","name":"Comp LasSeen","topic":"CHICOS/desktop/out/lastseen/epoch","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":660,"y":520,"wires":[["29df3b60.b02344","cee8ced.d38d83"]]},{"id":"5b1c976f.304e78","type":"change","z":"d0c77eb4.886e7","name":"1","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":560,"wires":[[]]},{"id":"aeb64ca1.149c9","type":"change","z":"d0c77eb4.886e7","name":"0","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":600,"wires":[[]]},{"id":"d9da96e7.b1ab78","type":"switch","z":"d0c77eb4.886e7","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1090,"y":340,"wires":[["6a8648db.b053d8"],["b574464d.401728"]],"outputLabels":["Prendida","Apagada"]},{"id":"6a8648db.b053d8","type":"wake on lan","z":"d0c77eb4.886e7","mac":"1C:6F:65:3C:E0-47","host":"","udpport":"9","name":"PC Chicos","x":1290,"y":320,"wires":[]},{"id":"f9888295.ae81b","type":"ui_button","z":"d0c77eb4.886e7","name":"","group":"4776a043.c6708","order":2,"width":"3","height":"1","passthru":false,"label":"Turn Off","tooltip":"","color":"","bgcolor":"","icon":"fa-power-off","payload":"TOGGLE","payloadType":"str","topic":"","x":1100,"y":380,"wires":[["b574464d.401728"]]},{"id":"b574464d.401728","type":"function","z":"d0c77eb4.886e7","name":"Shut Down Comp","func":"msg.payload = \"now\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1310,"y":380,"wires":[["706e0879.b567d8"]]},{"id":"706e0879.b567d8","type":"mqtt out","z":"d0c77eb4.886e7","name":"","topic":"CHICOS/in/shutdown","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":1540,"y":380,"wires":[]},{"id":"3aaea96b.d9e3f6","type":"mqtt out","z":"1ac54ead.f37ca1","name":"Luz Living Delante (46)","topic":"Android/TvLiving/in/Timbre","qos":"","retain":"","broker":"1ad27743.ce9fb9","x":1150,"y":160,"wires":[],"inputLabels":["kkl"]},{"id":"39a278e4.b52e68","type":"change","z":"1ac54ead.f37ca1","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":180,"wires":[["3aaea96b.d9e3f6"]]},{"id":"f4687233.02766","type":"mqtt in","z":"bb63d718.931208","name":"Tecla Tablero Azul (31)","topic":"NodeMcu/Bao/out/Button/3/toggle","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":120,"y":360,"wires":[["3479a8a2.e54488"]]},{"id":"3479a8a2.e54488","type":"function","z":"bb63d718.931208","name":"Toggle","func":"msg.payload = \"TOGGLE\";\nreturn msg;","outputs":1,"noerr":0,"x":190,"y":580,"wires":[["6e3faea4.c4467"]]},{"id":"e6dcec6d.2f34","type":"mqtt out","z":"57b26073.47916","name":"Teclas Living","topic":"","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":830,"y":1620,"wires":[],"inputLabels":["kkl"]},{"id":"8824935.310707","type":"mqtt in","z":"57b26073.47916","name":"","topic":"Arduino/PBLiving/out/IP","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":340,"y":1620,"wires":[["daab659d.e49d68"]]},{"id":"daab659d.e49d68","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"50,50","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Arduino/PBLiving/in/WSSTRIP/0/RAINBOWSPIN","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":1640,"wires":[["e6dcec6d.2f34"]]},{"id":"b6e3c1f3.38ff1","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/Bao/out/IP","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":340,"y":1740,"wires":[["ec5471.f431fb9"]]},{"id":"ec5471.f431fb9","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"50,50","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"NodeMcu/Bao/in/WSSTRIP/0/RAINBOWSPIN","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":1760,"wires":[["2b705b3b.d3bb14"]]},{"id":"2b705b3b.d3bb14","type":"mqtt out","z":"57b26073.47916","name":"Teclas Bao","topic":"","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":830,"y":1740,"wires":[],"inputLabels":["kkl"]},{"id":"bfc2b80c.06f278","type":"inject","z":"57b26073.47916","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":390,"y":1560,"wires":[["daab659d.e49d68"]]},{"id":"2c58dc0e.c70e34","type":"mqtt in","z":"6fe007d2.25c638","name":"Sensor Tanque","topic":"NodeMcu/Bomba/out/Button/3","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":140,"y":260,"wires":[["32aa4ddc.548a12","b654588b.5f5cb8"]]},{"id":"426a0d64.698394","type":"mqtt out","z":"6fe007d2.25c638","name":"","topic":"NodeMcu/Bomba/in/Relay/0","qos":"","retain":"true","broker":"1ad27743.ce9fb9","x":820,"y":240,"wires":[]},{"id":"32aa4ddc.548a12","type":"ui_led","z":"6fe007d2.25c638","order":10,"group":"a95b4552.f7fa88","width":"3","height":"1","label":"Tanque","colorForValue":[{"color":"#ff0000","value":"1","valueType":"str"},{"color":"#008000","value":"0","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":false,"name":"throttled","x":680,"y":340,"wires":[]},{"id":"79bf5069.03ce5","type":"ui_statetrail","z":"6fe007d2.25c638","group":"a95b4552.f7fa88","order":14,"width":0,"height":0,"name":"Tanque","label":" Tanque","states":[{"state":1,"col":"#e60000","t":"num","label":""},{"state":0,"col":"#3cec42","t":"num","label":""}],"periodLimit":"12","periodLimitUnit":"3600","timeformat":"HH:mm:ss","tickmarks":4,"persist":false,"legend":1,"combine":true,"blanklabel":"","x":600,"y":60,"wires":[[]]},{"id":"111da924.54b127","type":"ui_chart","z":"6fe007d2.25c638","name":" Tanque","group":"a95b4552.f7fa88","order":9,"width":"0","height":"0","label":" Tanque","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"0","ymax":"1","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"x":580,"y":140,"wires":[[]]},{"id":"b654588b.5f5cb8","type":"aggregator","z":"6fe007d2.25c638","name":"","topic":"","intervalCount":"5","intervalUnits":"m","submitIncompleteInterval":true,"submitPerTopic":false,"aggregationType":"max","x":350,"y":120,"wires":[["79bf5069.03ce5","111da924.54b127","e7dd2009.bede5"]]},{"id":"2b766caf.56d994","type":"switch","z":"887b2e31.18293","name":"Bomba","property":"relay","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":720,"y":1440,"wires":[["463a2c69.8f1f94"]],"outputLabels":["Luces Balcon (30)"]},{"id":"463a2c69.8f1f94","type":"ui_switch","z":"887b2e31.18293","name":"","label":"Bomba","tooltip":"","group":"a95b4552.f7fa88","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"NodeMcu/Bomba/in/Relay/0","topicType":"str","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","animate":true,"x":1020,"y":1440,"wires":[["8591f331.53aaf"]]},{"id":"e7dd2009.bede5","type":"switch","z":"6fe007d2.25c638","name":"Vacio?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":260,"wires":[["7e08eedc.4be2e"],["426a0d64.698394"]],"outputLabels":["Vacio","Lleno"]},{"id":"7e08eedc.4be2e","type":"mqtt out","z":"6fe007d2.25c638","name":"","topic":"NodeMcu/Bomba/in/Relay/0","qos":"","retain":"false","broker":"1ad27743.ce9fb9","x":820,"y":160,"wires":[]},{"id":"52b2be0d.d7e","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"BaoPing","pt":"flow","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"NodeMcu/Bao/in/PING","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":1100,"wires":[["bf4c93fa.6b62e"]]},{"id":"be2419e9.97d178","type":"change","z":"57b26073.47916","name":"","rules":[{"t":"set","p":"BombaPing","pt":"flow","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"NodeMcu/Bomba/in/PING","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":1140,"wires":[["bf4c93fa.6b62e"]]},{"id":"5216596b.7ec8d8","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/Bomba/out/PONG","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1140,"y":1560,"wires":[["a8d755c2.7af728"]]},{"id":"a8d755c2.7af728","type":"function","z":"57b26073.47916","name":"","func":"msg.payload = Date.now() -  flow.get(\"BombaPing\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1350,"y":1560,"wires":[["77416b1b.88f484"]]},{"id":"77416b1b.88f484","type":"ui_level","z":"57b26073.47916","group":"d267a3e3.05ccb","order":11,"width":0,"height":0,"name":"Latencia Bomba","label":"Latencia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1000","segWarn":"200","segHigh":"500","unit":"ms","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"property":"payload","peaktime":"3000","x":1540,"y":1560,"wires":[]},{"id":"cf1b0221.4b8b5","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/Bao/out/PONG","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":1130,"y":1600,"wires":[["7b2f1587.6f122c"]]},{"id":"7b2f1587.6f122c","type":"function","z":"57b26073.47916","name":"","func":"msg.payload = Date.now() -  flow.get(\"BaoPing\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1350,"y":1600,"wires":[["981cf458.b956f8"]]},{"id":"981cf458.b956f8","type":"ui_level","z":"57b26073.47916","group":"d267a3e3.05ccb","order":7,"width":0,"height":0,"name":"Latencia Bao","label":"Latencia","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":"0","max":"1000","segWarn":"200","segHigh":"500","unit":"ms","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":"2","colorschema":"fixed","textoptions":"default","colorText":"#000000","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"property":"payload","peaktime":"3000","x":1540,"y":1600,"wires":[]},{"id":"9e6d05a2.c3fe28","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/Bao/out/LastSeen","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":180,"y":1340,"wires":[["f7bae46b.6eb788","5c64b9e4.1a3988"]]},{"id":"5c64b9e4.1a3988","type":"function","z":"57b26073.47916","name":"LastSeen","func":"msg.LastSeen = new Date();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":460,"y":1320,"wires":[["b8f571b9.5d32"]]},{"id":"f7bae46b.6eb788","type":"trigger","z":"57b26073.47916","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"7","extend":true,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":460,"y":1360,"wires":[["93c4b470.a1b398"]]},{"id":"93c4b470.a1b398","type":"ui_led","z":"57b26073.47916","order":5,"group":"d267a3e3.05ccb","width":0,"height":0,"label":"Bao Ok","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Bao OK","x":600,"y":1360,"wires":[]},{"id":"b8f571b9.5d32","type":"ui_text","z":"57b26073.47916","group":"d267a3e3.05ccb","order":6,"width":0,"height":0,"name":"Bao","label":"LastSeen","format":"{{msg.LastSeen}}","layout":"row-spread","x":590,"y":1320,"wires":[]},{"id":"1be96f42.306a51","type":"mqtt in","z":"57b26073.47916","name":"","topic":"NodeMcu/Bomba/out/LastSeen","qos":"2","datatype":"auto","broker":"1ad27743.ce9fb9","x":170,"y":1440,"wires":[["ef08a293.a1bb","bd29ff4d.7da41"]]},{"id":"bd29ff4d.7da41","type":"function","z":"57b26073.47916","name":"LastSeen","func":"msg.LastSeen = new Date();\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":1420,"wires":[["5a01ecc6.171074"]]},{"id":"ef08a293.a1bb","type":"trigger","z":"57b26073.47916","name":"","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"7","extend":true,"units":"s","reset":"","bytopic":"topic","outputs":1,"x":440,"y":1460,"wires":[["d7b1db0b.49ae18","b23b05bd.5d5a28"]]},{"id":"d7b1db0b.49ae18","type":"ui_led","z":"57b26073.47916","order":9,"group":"d267a3e3.05ccb","width":0,"height":0,"label":"Bomba Ok","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Bomba OK","x":590,"y":1460,"wires":[]},{"id":"5a01ecc6.171074","type":"ui_text","z":"57b26073.47916","group":"d267a3e3.05ccb","order":10,"width":0,"height":0,"name":"Bomba","label":"LastSeen","format":"{{msg.LastSeen}}","layout":"row-spread","x":580,"y":1420,"wires":[]},{"id":"b23b05bd.5d5a28","type":"ui_led","z":"57b26073.47916","order":14,"group":"a95b4552.f7fa88","width":0,"height":0,"label":"Bomba Ok","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Bomba OK","x":590,"y":1500,"wires":[]},{"id":"3cd6b33c.94b73c","type":"ui_button","z":"57b26073.47916","name":"","group":"d267a3e3.05ccb","order":12,"width":0,"height":0,"passthru":false,"label":"Reboot Bomba","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"NodeMcu/Bomba/in/RESET","topicType":"str","x":1340,"y":560,"wires":[["aaed4da3.1d519"]]},{"id":"69965687.53bda8","type":"ui_button","z":"57b26073.47916","name":"","group":"d267a3e3.05ccb","order":8,"width":0,"height":0,"passthru":false,"label":"Reboot Bao","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"NodeMcu/Bao/in/RESET","topicType":"str","x":1350,"y":600,"wires":[["aaed4da3.1d519"]]},{"id":"8fe27db8.2c0c8","type":"pi-gpiod in","z":"6fe007d2.25c638","name":"","host":"192.168.2.5","port":8888,"pin":"26","intype":"PUD_OFF","debounce":"30","read":false,"x":1040,"y":540,"wires":[["bec0d99.5f26f28"]]},{"id":"bec0d99.5f26f28","type":"debug","z":"6fe007d2.25c638","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1280,"y":580,"wires":[]},{"id":"185f34a7.fcc05b","type":"inject","z":"6fe007d2.25c638","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":420,"y":500,"wires":[["4342529b.7ed7fc","1eb739ea.3e83b6"]]},{"id":"d897de82.7a0b6","type":"inject","z":"6fe007d2.25c638","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":440,"y":640,"wires":[["3928d4f5.12cdfc","99670cbe.20378"]]},{"id":"c0393202.2337b","type":"pi-gpiod out","z":"6fe007d2.25c638","name":"","host":"RPI3","port":8888,"pin":"19","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","freq":"800","x":1040,"y":620,"wires":[]},{"id":"5999d41d.2cb4dc","type":"pi-gpiod out","z":"6fe007d2.25c638","name":"","host":"RPI3","port":8888,"pin":"13","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","freq":"800","x":1040,"y":680,"wires":[]},{"id":"52c19440.0122bc","type":"pi-gpiod out","z":"6fe007d2.25c638","name":"","host":"RPI3","port":8888,"pin":"6","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","freq":"800","x":1040,"y":760,"wires":[]},{"id":"4342529b.7ed7fc","type":"change","z":"6fe007d2.25c638","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":520,"wires":[["c0393202.2337b"]]},{"id":"1eb739ea.3e83b6","type":"change","z":"6fe007d2.25c638","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":580,"wires":[["5999d41d.2cb4dc","52c19440.0122bc","591f66bd.02e438"]]},{"id":"99670cbe.20378","type":"change","z":"6fe007d2.25c638","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":700,"wires":[["52c19440.0122bc","c0393202.2337b","591f66bd.02e438"]]},{"id":"3928d4f5.12cdfc","type":"change","z":"6fe007d2.25c638","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":660,"wires":[["5999d41d.2cb4dc"]]},{"id":"5faa7365.36ccac","type":"inject","z":"6fe007d2.25c638","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":477,"y":782,"wires":[["4d699d1f.0940f4","27e1386b.1ddd88"]]},{"id":"4d699d1f.0940f4","type":"change","z":"6fe007d2.25c638","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":760,"wires":[["52c19440.0122bc"]]},{"id":"27e1386b.1ddd88","type":"change","z":"6fe007d2.25c638","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":840,"wires":[["5999d41d.2cb4dc","c0393202.2337b","591f66bd.02e438"]]},{"id":"591f66bd.02e438","type":"pi-gpiod out","z":"6fe007d2.25c638","name":"","host":"RPI3","port":8888,"pin":"5","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","freq":"800","x":1020,"y":840,"wires":[]},{"id":"1af5c965.710da7","type":"inject","z":"6fe007d2.25c638","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":460,"y":860,"wires":[["268f6543.6df0da"]]},{"id":"268f6543.6df0da","type":"change","z":"6fe007d2.25c638","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":920,"wires":[["591f66bd.02e438"]]},{"id":"3f4beeea.113902","type":"change","z":"6fe007d2.25c638","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":400,"wires":[["c0393202.2337b","5999d41d.2cb4dc","52c19440.0122bc","591f66bd.02e438"]]},{"id":"ff655180.a93d","type":"inject","z":"6fe007d2.25c638","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":460,"y":400,"wires":[["3f4beeea.113902"]]}]